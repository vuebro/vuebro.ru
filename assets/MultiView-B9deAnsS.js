import{defineComponent as F,ref as m,computed as d,watch as M,onUnmounted as k,openBlock as f,createElementBlock as $,Fragment as L,renderList as P,normalizeClass as U,createBlock as X,resolveDynamicComponent as Y}from"vue";import{a as y,b as C}from"./vueuse-Bs6x0GOr.js";import{$ as i,g as E,d as S,b as V,a as x,p as O,r as q,s as B,t as j,_ as G}from"./index-Bc8AmM03.js";import{b as A}from"./vue-router-DgSFFxGk.js";import"./unocss-BkcBwv3F.js";import"./ofetch-CwKPICM-.js";import"./destr-CVtkxrq9.js";import"./ufo-CsG24Xhf.js";import"./magic-string-CTxECtaK.js";import"./jridgewell-CS0TOL6_.js";import"./ajv-DVT_ztRr.js";import"./fast-deep-equal-DhA4GXGS.js";import"./json-schema-traverse-DW8_mBst.js";import"./fast-uri-DiSllsZr.js";import"./ajv-keywords-fgJOexQU.js";import"./uuid-random-C5LgB_p5.js";import"./iconify-DZNnka9g.js";import"./unhead-12oOAFTY.js";import"./hookable-B8xFkYCm.js";import"./vue3-sfc-loader-CoUr1SK8.js";import"./vue-Cow_pXkh.js";const H=F({__name:"MultiView",setup(I,{expose:g}){g();const a=m([]),o=A(),l=d(()=>Object.fromEntries(i.value.map(e=>[e.id,E(e)]))),v=({id:e})=>l.value[e],t=d(()=>new Map(i.value.map(({id:e})=>[e,!1]))),n=m(new Map(t.value)),_=()=>{var e,r;if(!O.value&&j.value&&i.value.length){const{scrollX:c,scrollY:R}=window,[u]=i.value,{root:w}=u,{$children:[{id:z}]=[{}]}=w,D=!Math.floor(c)&&!Math.floor(R)&&u.id===z?w.id:((e=[...t.value.entries()].find(([,p])=>p))==null?void 0:e[0])??((r=[...n.value.entries()].find(([,p])=>p))==null?void 0:r[0])??u.id;B.value=!1,o.push({name:D}).catch(()=>{})}};y(window,{behavior:V,onStop:_});const h=([{isIntersecting:e,target:{id:r}}])=>{n.value=new Map(t.value),t.value.set(r,e)},s=[];M(a,e=>{console.log("watch",a),s.forEach(r=>{r()}),s.length=0,e.forEach(r=>{const{stop:c}=C(r,h,{threshold:x});s.push(c)})},{deep:S}),k(()=>{s.forEach(e=>{e()}),s.length=0});const b={refs:a,router:o,templates:l,template:v,intersecting:t,$intersecting:n,onStop:_,callback:h,stops:s,get useIntersectionObserver(){return C},get useScroll(){return y},get behavior(){return V},get deep(){return S},get threshold(){return x},computed:d,onUnmounted:k,ref:m,watch:M,get useRouter(){return A},get $siblings(){return i},get getAsyncComponent(){return E},get paused(){return O},get resolve(){return q},get scroll(){return B},get that(){return j}};return Object.defineProperty(b,"__isScriptSetup",{enumerable:!1,value:!0}),b}}),J=["id","role"];function K(I,g,a,o,l,v){return f(!0),$(L,null,P(o.$siblings,t=>{var n;return f(),$("div",{class:U(t.class),id:t.id,key:t.id,role:t.id===((n=o.that)==null?void 0:n.id)?"main":void 0,ref_for:!0,ref:"refs","un-cloak":""},[(f(),X(Y(o.template(t)),{id:t.id,onVnodeMounted:()=>{o.resolve(t)}},null,8,["id","onVnodeMounted"]))],10,J)}),128)}const ve=G(H,[["render",K],["__file","MultiView.vue"]]);export{ve as default};
