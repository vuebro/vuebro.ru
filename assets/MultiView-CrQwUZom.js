import{defineComponent as y,computed as w,ref as M,watch as B,onUnmounted as C,createElementBlock as b,openBlock as v,Fragment as O,renderList as j,normalizeClass as z,createBlock as D,resolveDynamicComponent as F}from"vue";import{$ as i,v as k,p as _,m as L,u as P,a as R,t as E,r as T,b as U,c as X,s as Y,d as q,_ as A}from"./index-CsSG6qRG.js";import{useRouter as G}from"vue-router";import"./sucrase-DTaNgZ3p.js";import"./compiler-sfc-DUpFnHsr.js";const H=y({__name:"MultiView",setup(S,{expose:h}){h();const s=w(()=>new Map(i.value.map(({id:e=k()})=>[e,!1]))),o=M(new Map(s.value)),d=M([]),p=G(),t=[],l=w(()=>{const[[e,r]=[]]=_;return _.clear(),e&&r&&_.set(e,r),Object.fromEntries(i.value.map(n=>[n.id,L(n)]))}),u=()=>{t.forEach(e=>{e()}),t.length=0},V=({id:e})=>l.value[e];B(d,e=>{u(),setTimeout(()=>{e.forEach(r=>{const{stop:n}=P(r,([{isIntersecting:c,target:{id:a}={}}={}]=[])=>{o.value=new Map(s.value),a&&c!==void 0&&s.value.set(a,c)},{threshold:.1});t.push(n)})})},{deep:!0}),R(window,{behavior:"smooth",onStop:()=>{var e,r;if(!U.value&&E.value&&i.value.length){const{scrollX:n,scrollY:c}=window,[a]=i.value,[f]=X.value;if(f&&a){const{$children:[{id:$}={}]=[]}=f,x=!Math.floor(n)&&!Math.floor(c)&&a.id===$?f.id:((e=[...s.value.entries()].find(([,m])=>m))==null?void 0:e[0])??((r=[...o.value.entries()].find(([,m])=>m))==null?void 0:r[0])??a.id;Y.value=!1,p.push({name:x}).catch(q)}}}}),C(u);const g={intersecting:s,$intersecting:o,refs:d,router:p,stops:t,templates:l,clearStops:u,template:V,get v4(){return k},get $siblings(){return i},get resolve(){return T},get that(){return E}};return Object.defineProperty(g,"__isScriptSetup",{enumerable:!1,value:!0}),g}}),I=["id","role"];function J(S,h,s,o,d,p){return v(!0),b(O,null,j(o.$siblings,t=>{var l;return v(),b("div",{id:t.id??o.v4(),key:t.id??o.v4(),ref_for:!0,ref:"refs",class:z(t.class),role:t.id===((l=o.that)==null?void 0:l.id)?"main":"section","un-cloak":""},[(v(),D(F(o.template(t)),{id:t.id,"un-cloak":"",onVnodeMounted:u=>o.resolve(t)},null,8,["id","onVnodeMounted"]))],10,I)}),128)}const ee=A(H,[["render",J],["__file","MultiView.vue"]]);export{ee as default};
