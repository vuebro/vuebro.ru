import{getCurrentScope as Z,onScopeDispose as ee,onMounted as q,nextTick as te,isRef as ne,getCurrentInstance as z,watch as P,toValue as v,computed as M,ref as L,reactive as $,unref as oe,readonly as le}from"vue";function R(e){return Z()?(ee(e),!0):!1}const J=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const re=e=>e!=null,ue=Object.prototype.toString,ie=e=>ue.call(e)==="[object Object]",E=()=>{};function K(e,n){function t(...o){return new Promise((a,d)=>{Promise.resolve(e(()=>n.apply(this,o),{fn:n,thisArg:this,args:o})).then(a).catch(d)})}return t}function se(e,n={}){let t,o,a=E;const d=l=>{clearTimeout(l),a(),a=E};let f;return l=>{const r=v(e),s=v(n.maxWait);return t&&d(t),r<=0||s!==void 0&&s<=0?(o&&(d(o),o=null),Promise.resolve(l())):new Promise((c,m)=>{a=n.rejectOnCancel?m:c,f=l,s&&!o&&(o=setTimeout(()=>{t&&d(t),o=null,c(f())},s)),t=setTimeout(()=>{o&&d(o),o=null,c(l())},r)})}}function ce(...e){let n=0,t,o=!0,a=E,d,f,i,l,r;!ne(e[0])&&typeof e[0]=="object"?{delay:f,trailing:i=!0,leading:l=!0,rejectOnCancel:r=!1}=e[0]:[f,i=!0,l=!0,r=!1]=e;const s=()=>{t&&(clearTimeout(t),t=void 0,a(),a=E)};return m=>{const h=v(f),b=Date.now()-n,w=()=>d=m();return s(),h<=0?(n=Date.now(),w()):(b>h&&(l||!o)?(n=Date.now(),w()):i&&(d=new Promise((T,p)=>{a=r?p:T,t=setTimeout(()=>{n=Date.now(),o=!0,T(w()),s()},Math.max(0,h-b))})),!l&&!t&&(t=setTimeout(()=>o=!0,h)),o=!1,d)}}function ae(e){return z()}function W(e){return Array.isArray(e)?e:[e]}function fe(e,n=200,t={}){return K(se(n,t),e)}function de(e,n=200,t=!1,o=!0,a=!1){return K(ce(n,t,o,a),e)}function Q(e,n=!0,t){ae()?q(e,t):n?e():te(e)}function me(e,n,t){return P(e,n,{...t,immediate:!0})}const F=J?window:void 0,pe=J?window.document:void 0;function I(e){var n;const t=v(e);return(n=t==null?void 0:t.$el)!=null?n:t}function N(...e){const n=[],t=()=>{n.forEach(i=>i()),n.length=0},o=(i,l,r,s)=>(i.addEventListener(l,r,s),()=>i.removeEventListener(l,r,s)),a=M(()=>{const i=W(v(e[0])).filter(l=>l!=null);return i.every(l=>typeof l!="string")?i:void 0}),d=me(()=>{var i,l;return[(l=(i=a.value)==null?void 0:i.map(r=>I(r)))!=null?l:[F].filter(r=>r!=null),W(v(a.value?e[1]:e[0])),W(oe(a.value?e[2]:e[1])),v(a.value?e[3]:e[2])]},([i,l,r,s])=>{if(t(),!(i!=null&&i.length)||!(l!=null&&l.length)||!(r!=null&&r.length))return;const c=ie(s)?{...s}:s;n.push(...i.flatMap(m=>l.flatMap(h=>r.map(b=>o(m,h,b,c)))))},{flush:"post"}),f=()=>{d(),t()};return R(t),f}function ve(){const e=L(!1),n=z();return n&&q(()=>{e.value=!0},n),e}function he(e){const n=ve();return M(()=>(n.value,!!e()))}function ye(e,n,t={}){const{root:o,rootMargin:a="0px",threshold:d=0,window:f=F,immediate:i=!0}=t,l=he(()=>f&&"IntersectionObserver"in f),r=M(()=>{const b=v(e);return W(b).map(I).filter(re)});let s=E;const c=L(i),m=l.value?P(()=>[r.value,I(o),c.value],([b,w])=>{if(s(),!c.value||!b.length)return;const T=new IntersectionObserver(n,{root:I(w),rootMargin:a,threshold:d});b.forEach(p=>p&&T.observe(p)),s=()=>{T.disconnect(),s=E}},{immediate:i,flush:"post"}):E,h=()=>{s(),m(),c.value=!1};return R(h),{isSupported:l,isActive:c,pause(){s(),c.value=!1},resume(){c.value=!0},stop:h}}const Y=1;function Te(e,n={}){const{throttle:t=0,idle:o=200,onStop:a=E,onScroll:d=E,offset:f={left:0,right:0,top:0,bottom:0},eventListenerOptions:i={capture:!1,passive:!0},behavior:l="auto",window:r=F,onError:s=u=>{console.error(u)}}=n,c=L(0),m=L(0),h=M({get(){return c.value},set(u){w(u,void 0)}}),b=M({get(){return m.value},set(u){w(void 0,u)}});function w(u,x){var g,O,_,j;if(!r)return;const y=v(e);if(!y)return;(_=y instanceof Document?r.document.body:y)==null||_.scrollTo({top:(g=v(x))!=null?g:b.value,left:(O=v(u))!=null?O:h.value,behavior:v(l)});const D=((j=y==null?void 0:y.document)==null?void 0:j.documentElement)||(y==null?void 0:y.documentElement)||y;h!=null&&(c.value=D.scrollLeft),b!=null&&(m.value=D.scrollTop)}const T=L(!1),p=$({left:!0,right:!1,top:!0,bottom:!1}),S=$({left:!1,right:!1,top:!1,bottom:!1}),H=u=>{T.value&&(T.value=!1,S.left=!1,S.right=!1,S.top=!1,S.bottom=!1,a(u))},U=fe(H,t+o),A=u=>{var x;if(!r)return;const g=((x=u==null?void 0:u.document)==null?void 0:x.documentElement)||(u==null?void 0:u.documentElement)||I(u),{display:O,flexDirection:_,direction:j}=getComputedStyle(g),y=j==="rtl"?-1:1,D=g.scrollLeft;S.left=D<c.value,S.right=D>c.value;const B=D*y<=(f.left||0),V=D*y+g.clientWidth>=g.scrollWidth-(f.right||0)-Y;O==="flex"&&_==="row-reverse"?(p.left=V,p.right=B):(p.left=B,p.right=V),c.value=D;let C=g.scrollTop;u===r.document&&!C&&(C=r.document.body.scrollTop),S.top=C<m.value,S.bottom=C>m.value;const G=C<=(f.top||0),X=C+g.clientHeight>=g.scrollHeight-(f.bottom||0)-Y;O==="flex"&&_==="column-reverse"?(p.top=X,p.bottom=G):(p.top=G,p.bottom=X),m.value=C},k=u=>{var x;if(!r)return;const g=(x=u.target.documentElement)!=null?x:u.target;A(g),T.value=!0,U(u),d(u)};return N(e,"scroll",t?de(k,t,!0,!1):k,i),Q(()=>{try{const u=v(e);if(!u)return;A(u)}catch(u){s(u)}}),N(e,"scrollend",H,i),{x:h,y:b,isScrolling:T,arrivedState:p,directions:S,measure(){const u=v(e);r&&u&&A(u)}}}let be=0;function Se(e,n={}){const t=L(!1),{document:o=pe,immediate:a=!0,manual:d=!1,id:f=`vueuse_styletag_${++be}`}=n,i=L(e);let l=()=>{};const r=()=>{if(!o)return;const c=o.getElementById(f)||o.createElement("style");c.isConnected||(c.id=f,n.media&&(c.media=n.media),o.head.appendChild(c)),!t.value&&(l=P(i,m=>{c.textContent=m},{immediate:!0}),t.value=!0)},s=()=>{!o||!t.value||(l(),o.head.removeChild(o.getElementById(f)),t.value=!1)};return a&&!d&&Q(r),d||R(s),{id:f,css:i,unload:s,load:r,isLoaded:le(t)}}export{ye as a,Te as b,Se as u};
