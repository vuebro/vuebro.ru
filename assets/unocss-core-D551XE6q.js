var ge=Object.defineProperty;var ye=(r,e,t)=>e in r?ge(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var B=(r,e,t)=>ye(r,typeof e!="symbol"?e+"":e,t);const H="default",Z="preflights",Se="shortcuts",we="imports",$e={[we]:-200,[Z]:-100,[Se]:-10,[H]:0},Ae=/[\\:]?[\s'"`;{}]+/g;function xe(r){return r.split(Ae)}const Me={name:"@unocss/core/extractor-split",order:0,extract({code:r}){return xe(r)}};function O(r=[]){return Array.isArray(r)?r:[r]}function F(r){return Array.from(new Set(r))}function se(r,e){return r.reduce((t,n)=>(t.findIndex(l=>e(n,l))===-1&&t.push(n),t),[])}function _(r){return typeof r=="string"}class ue extends Set{constructor(t){super(t);B(this,"_map");this._map??(this._map=new Map)}add(t){return this._map??(this._map=new Map),this._map.set(t,(this._map.get(t)??0)+1),super.add(t)}delete(t){return this._map.delete(t),super.delete(t)}clear(){this._map.clear(),super.clear()}getCount(t){return this._map.get(t)??0}setCount(t,n){return this._map.set(t,n),super.add(t)}}function K(r){return r instanceof ue}function Qe(r){return r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function be(r){const e=r.length;let t=-1,n,i="";const l=r.charCodeAt(0);for(;++t<e;){if(n=r.charCodeAt(t),n===0){i+="ï¿½";continue}if(n===37){i+="\\%";continue}if(n===44){i+="\\,";continue}if(n>=1&&n<=31||n===127||t===0&&n>=48&&n<=57||t===1&&n>=48&&n<=57&&l===45){i+=`\\${n.toString(16)} `;continue}if(t===0&&e===1&&n===45){i+=`\\${r.charAt(t)}`;continue}if(n>=128||n===45||n===95||n>=48&&n<=57||n>=65&&n<=90||n>=97&&n<=122){i+=r.charAt(t);continue}i+=`\\${r.charAt(t)}`}return i}const J=be;function Ce(){return{events:{},emit(r,...e){(this.events[r]||[]).forEach(t=>t(...e))},on(r,e){return(this.events[r]=this.events[r]||[]).push(e),()=>this.events[r]=(this.events[r]||[]).filter(t=>t!==e)}}}const ve=/^\[(.+?)~?="(.*)"\]$/,_e=/[\w\u00A0-\uFFFF%-?]/;function Xe(r){return r.match(ve)}function Ze(r=""){return _e.test(r)}function Ee(r){return typeof r=="function"?{match:r}:r}function ie(r){return r.length===3}function Q(r){return r!=null}function Oe(){}class Re{constructor(){B(this,"_map",new Map)}get(e,t){const n=this._map.get(e);if(n)return n.get(t)}getFallback(e,t,n){let i=this._map.get(e);return i||(i=new Map,this._map.set(e,i)),i.has(t)||i.set(t,n),i.get(t)}set(e,t,n){let i=this._map.get(e);return i||(i=new Map,this._map.set(e,i)),i.set(t,n),this}has(e,t){var n;return(n=this._map.get(e))==null?void 0:n.has(t)}delete(e,t){var n;return((n=this._map.get(e))==null?void 0:n.delete(t))||!1}deleteTop(e){return this._map.delete(e)}map(e){return Array.from(this._map.entries()).flatMap(([t,n])=>Array.from(n.entries()).map(([i,l])=>e(l,t,i)))}}class je extends Map{getFallback(e,t){const n=this.get(e);return n===void 0?(this.set(e,t),t):n}map(e){const t=[];return this.forEach((n,i)=>{t.push(e(n,i))}),t}flatMap(e){const t=[];return this.forEach((n,i)=>{t.push(...e(n,i))}),t}}function D(r){return _(r)?r:(Array.isArray(r)?r:Object.entries(r)).filter(e=>e[1]!=null)}function Le(r){return Array.isArray(r)?r.find(e=>!Array.isArray(e)||Array.isArray(e[0]))?r.map(e=>D(e)):[r]:[D(r)]}function Pe(r){return r.filter(([e,t],n)=>{if(e.startsWith("$$"))return!1;for(let i=n-1;i>=0;i--)if(r[i][0]===e&&r[i][1]===t)return!1;return!0})}function X(r){return r==null?"":Pe(r).map(([e,t])=>t!=null&&typeof t!="function"?`${e}:${t};`:void 0).filter(Boolean).join("")}function G(r){return r&&typeof r=="object"&&!Array.isArray(r)}function he(r,e,t=!1){const n=r,i=e;if(Array.isArray(i))return t&&Array.isArray(i)?[...n,...i]:[...i];const l={...n};return G(n)&&G(i)&&Object.keys(i).forEach(u=>{G(n[u])&&G(i[u])||Array.isArray(n[u])&&Array.isArray(i[u])?l[u]=he(n[u],i[u],t):Object.assign(l,{[u]:i[u]})}),l}function W(r){let e,t,n;if(Array.isArray(r)){for(t=Array.from({length:e=r.length});e--;)t[e]=(n=r[e])&&typeof n=="object"?W(n):n;return t}if(Object.prototype.toString.call(r)==="[object Object]"){t={};for(e in r)e==="__proto__"?Object.defineProperty(t,e,{value:W(r[e]),configurable:!0,enumerable:!0,writable:!0}):t[e]=(n=r[e])&&typeof n=="object"?W(n):n;return t}return r}function Te(r){return _(r[0])}function Ve(r){return _(r[0])}const Y={};function Be(r=["-",":"]){const e=r.join("|");return Y[e]||(Y[e]=new RegExp(`((?:[!@<~\\w+:_-]|\\[&?>?:?\\S*\\])+?)(${e})\\(((?:[~!<>\\w\\s:/\\\\,%#.$?-]|\\[.*?\\])+?)\\)(?!\\s*?=>)`,"gm")),Y[e].lastIndex=0,Y[e]}function Fe(r,e=["-",":"],t=5){const n=Be(e);let i,l=r.toString();const u=new Set,p=new Map;do i=!1,l=l.replace(n,(f,s,a,m,g)=>{var $;if(!e.includes(a))return f;i=!0,u.add(s+a);const w=g+s.length+a.length+1,S={length:f.length,items:[]};p.set(g,S);for(const A of[...m.matchAll(/\S+/g)]){const C=w+A.index;let x=($=p.get(C))==null?void 0:$.items;x?p.delete(C):x=[{offset:C,length:A[0].length,className:A[0]}];for(const y of x)y.className=y.className==="~"?s:y.className.replace(/^(!?)(.*)/,`$1${s}${a}$2`),S.items.push(y)}return"$".repeat(f.length)}),t-=1;while(i&&t);let c;if(typeof r=="string"){c="";let f=0;for(const[s,a]of p)c+=r.slice(f,s),c+=a.items.map(m=>m.className).join(" "),f=s+a.length;c+=r.slice(f)}else{c=r;for(const[f,s]of p)c.overwrite(f,f+s.length,s.items.map(a=>a.className).join(" "))}return{prefixes:Array.from(u),hasChanged:i,groupsByOffset:p,get expanded(){return c.toString()}}}function ke(r,e=["-",":"],t=5){const n=Fe(r,e,t);return typeof r=="string"?n.expanded:r}const oe=new Set;function Ne(r){oe.has(r)||(console.warn("[unocss]",r),oe.add(r))}function pe(r){return O(r).flatMap(e=>Array.isArray(e)?[e]:Object.entries(e))}const ae="_uno_resolved";async function Ie(r){var n;let e=typeof r=="function"?await r():await r;if(ae in e)return e;e={...e},Object.defineProperty(e,ae,{value:!0,enumerable:!1});const t=e.shortcuts?pe(e.shortcuts):void 0;if(e.shortcuts=t,e.prefix||e.layer){const i=l=>{l[2]||(l[2]={});const u=l[2];u.prefix==null&&e.prefix&&(u.prefix=O(e.prefix)),u.layer==null&&e.layer&&(u.layer=e.layer)};t==null||t.forEach(i),(n=e.rules)==null||n.forEach(i)}return e}async function de(r){const e=await Ie(r);if(!e.presets)return[e];const t=(await Promise.all((e.presets||[]).flatMap(O).flatMap(de))).flat();return[e,...t]}function Ue(r){var c,f;if(r.length===0)return{};const e=[],t=[];let n=!1;const i=[],l=[],u=[];for(const s of r){if(s.pipeline===!1){n=!0;break}else(c=s.pipeline)!=null&&c.include&&e.push(s.pipeline.include),(f=s.pipeline)!=null&&f.exclude&&t.push(s.pipeline.exclude);s.filesystem&&i.push(s.filesystem),s.inline&&l.push(s.inline),s.plain&&u.push(s.plain)}const p={pipeline:n?!1:{include:F(le(...e)),exclude:F(le(...t))}};return i.length&&(p.filesystem=F(i.flat())),l.length&&(p.inline=F(l.flat())),u.length&&(p.plain=F(u.flat())),p}async function ce(r={},e={}){var b,d;const t=Object.assign({},e,r),n=se((await Promise.all((t.presets||[]).flatMap(O).flatMap(de))).flat(),(o,h)=>o.name===h.name),i=[...n.filter(o=>o.enforce==="pre"),...n.filter(o=>!o.enforce),...n.filter(o=>o.enforce==="post")],l=[...i,t],u=[...l].reverse(),p=Object.assign({},$e,...l.map(o=>o.layers));function c(o){return F(l.flatMap(h=>O(h[o]||[])))}const f=c("extractors");let s=(b=u.find(o=>o.extractorDefault!==void 0))==null?void 0:b.extractorDefault;s===void 0&&(s=Me),s&&!f.includes(s)&&f.unshift(s),f.sort((o,h)=>(o.order||0)-(h.order||0));const a=c("rules"),m={},g=a.length,w=a.filter(o=>{var M;return Te(o)?(O(((M=o[2])==null?void 0:M.prefix)||"").forEach(j=>{m[j+o[0]]=o}),!1):!0}).reverse();let S=De(l.map(o=>o.theme));const $=c("extendTheme");for(const o of $)S=o(S)||S;const A={templates:F(l.flatMap(o=>{var h;return O((h=o.autocomplete)==null?void 0:h.templates)})),extractors:l.flatMap(o=>{var h;return O((h=o.autocomplete)==null?void 0:h.extractors)}).sort((o,h)=>(o.order||0)-(h.order||0)),shorthands:ze(l.map(o=>{var h;return((h=o.autocomplete)==null?void 0:h.shorthands)||{}}))};let C=c("separators");C.length||(C=[":","-"]);const x=c("content"),y=Ue(x),E={mergeSelectors:!0,warn:!0,sortLayers:o=>o,...t,blocklist:c("blocklist"),presets:i,envMode:t.envMode||"build",shortcutsLayer:t.shortcutsLayer||"shortcuts",layers:p,theme:S,rules:a,rulesSize:g,rulesDynamic:w,rulesStaticMap:m,preprocess:c("preprocess"),postprocess:c("postprocess"),preflights:c("preflights"),autocomplete:A,variants:c("variants").map(Ee).sort((o,h)=>(o.order||0)-(h.order||0)),shortcuts:pe(c("shortcuts")).reverse(),extractors:f,safelist:c("safelist"),separators:C,details:t.details??t.envMode==="dev",content:y,transformers:se(c("transformers"),(o,h)=>o.name===h.name)};for(const o of l)(d=o==null?void 0:o.configResolved)==null||d.call(o,E);return E}function De(r){return r.map(e=>e?W(e):{}).reduce((e,t)=>he(e,t),{})}function ze(r){return r.reduce((e,t)=>{const n={};for(const i in t){const l=t[i];Array.isArray(l)?n[i]=`(${l.join("|")})`:n[i]=l}return{...e,...n}},{})}function le(...r){return r.flatMap(Ge)}function Ge(r){return Array.isArray(r)?r:r?[r]:[]}function et(r){return r}const Ye="66.0.0",k={shortcutsNoMerge:"$$symbol-shortcut-no-merge",variants:"$$symbol-variants",parent:"$$symbol-parent",selector:"$$symbol-selector",layer:"$$symbol-layer",sort:"$$symbol-sort"};class ee{constructor(e={},t={}){B(this,"version",Ye);B(this,"events",Ce());B(this,"config");B(this,"cache",new Map);B(this,"blocked",new Set);B(this,"parentOrders",new Map);B(this,"activatedRules",new Set);this.userConfig=e,this.defaults=t}static async create(e={},t={}){const n=new ee(e,t);return n.config=await ce(n.userConfig,n.defaults),n.events.emit("config",n.config),n}async setConfig(e,t){e&&(t&&(this.defaults=t),this.userConfig=e,this.blocked.clear(),this.parentOrders.clear(),this.activatedRules.clear(),this.cache.clear(),this.config=await ce(e,this.defaults),this.events.emit("config",this.config))}async applyExtractors(e,t,n=new Set){var l;const i={original:e,code:e,id:t,extracted:n,envMode:this.config.envMode};for(const u of this.config.extractors){const p=await((l=u.extract)==null?void 0:l.call(u,i));if(p)if(K(p)&&K(n))for(const c of p)n.setCount(c,n.getCount(c)+p.getCount(c));else for(const c of p)n.add(c)}return n}makeContext(e,t){const n={rawSelector:e,currentSelector:t[1],theme:this.config.theme,generator:this,symbols:k,variantHandlers:t[2],constructCSS:(...i)=>this.constructCustomCSS(n,...i),variantMatch:t};return n}async parseToken(e,t){if(this.blocked.has(e))return;const n=`${e}${t?` ${t}`:""}`;if(this.cache.has(n))return this.cache.get(n);let i=e;for(const c of this.config.preprocess)i=c(e);if(this.isBlocked(i)){this.blocked.add(e),this.cache.set(n,null);return}const l=await this.matchVariants(e,i);if(l.every(c=>!c||this.isBlocked(c[1]))){this.blocked.add(e),this.cache.set(n,null);return}const u=async c=>{var m;const f=this.makeContext(e,[t||c[0],c[1],c[2],c[3]]);this.config.details&&(f.variants=[...c[3]]);const s=await this.expandShortcut(f.currentSelector,f);return s?await this.stringifyShortcuts(f.variantMatch,f,s[0],s[1]):(m=await this.parseUtil(f.variantMatch,f))==null?void 0:m.map(g=>this.stringifyUtil(g,f)).filter(Q)},p=(await Promise.all(l.map(c=>u(c)))).flat().filter(c=>!!c);if(p!=null&&p.length)return this.cache.set(n,p),p;this.cache.set(n,null)}async generate(e,t={}){const{id:n,scope:i,preflights:l=!0,safelist:u=!0,minify:p=!1,extendedInfo:c=!1}=t,f=_(e)?await this.applyExtractors(e,n,c?new ue:new Set):Array.isArray(e)?new Set(e):e;if(u){const d={generator:this,theme:this.config.theme};this.config.safelist.flatMap(o=>typeof o=="function"?o(d):o).forEach(o=>{f.has(o)||f.add(o)})}const s=p?"":`
`,a=new Set([H]),m=c?new Map:new Set,g=new Map;let w={};const S=Array.from(f).map(async d=>{var h;if(m.has(d))return;const o=await this.parseToken(d);if(o!=null){m instanceof Map?m.set(d,{data:o,count:K(f)?f.getCount(d):-1}):m.add(d);for(const M of o){const j=M[3]||"",P=(h=M[4])==null?void 0:h.layer;g.has(j)||g.set(j,[]),g.get(j).push(M),P&&a.add(P)}}});await Promise.all(S),await(async()=>{if(!l)return;const d={generator:this,theme:this.config.theme},o=new Set([]);this.config.preflights.forEach(({layer:h=Z})=>{a.add(h),o.add(h)}),w=Object.fromEntries(await Promise.all(Array.from(o).map(async h=>{const j=(await Promise.all(this.config.preflights.filter(P=>(P.layer||Z)===h).map(async P=>await P.getCSS(d)))).filter(Boolean).join(s);return[h,j]})))})();const $=this.config.sortLayers(Array.from(a).sort((d,o)=>(this.config.layers[d]??0)-(this.config.layers[o]??0)||d.localeCompare(o))),A={},C=this.config.outputToCssLayers,x=d=>{var h;let o=d;return typeof C=="object"&&(o=(h=C.cssLayerName)==null?void 0:h.call(C,d)),o===null?null:o??d},y=(d=H)=>{if(A[d])return A[d];let o=Array.from(g).sort((j,P)=>{var z;return(this.parentOrders.get(j[0])??0)-(this.parentOrders.get(P[0])??0)||((z=j[0])==null?void 0:z.localeCompare(P[0]||""))||0}).map(([j,P])=>{const z=P.length,q=P.filter(v=>{var R;return(((R=v[4])==null?void 0:R.layer)||H)===d}).sort((v,R)=>{var T,N,I,V,L,U,ne;return v[0]-R[0]||(((T=v[4])==null?void 0:T.sort)||0)-(((N=R[4])==null?void 0:N.sort)||0)||((L=(I=v[5])==null?void 0:I.currentSelector)==null?void 0:L.localeCompare(((V=R[5])==null?void 0:V.currentSelector)??""))||((U=v[1])==null?void 0:U.localeCompare(R[1]||""))||((ne=v[2])==null?void 0:ne.localeCompare(R[2]||""))||0}).map(([,v,R,,T,,N])=>[[[(v&&We(v,i))??"",(T==null?void 0:T.sort)??0]],R,!!(N??(T==null?void 0:T.noMerge))]);if(!q.length)return;const te=q.reverse().map(([v,R,T],N)=>{if(!T&&this.config.mergeSelectors)for(let V=N+1;V<z;V++){const L=q[V];if(L&&!L[2]&&(v&&L[0]||v==null&&L[0]==null)&&L[1]===R)return v&&L[0]&&L[0].push(...v),null}const I=v?F(v.sort((V,L)=>{var U;return V[1]-L[1]||((U=V[0])==null?void 0:U.localeCompare(L[0]||""))||0}).map(V=>V[0]).filter(Boolean)):[];return I.length?`${I.join(`,${s}`)}{${R}}`:R}).filter(Boolean).reverse().join(s);if(!j)return te;const re=j.split(" $$ ");return`${re.join("{")}{${s}${te}${s}${"}".repeat(re.length)}`}).filter(Boolean).join(s);l&&(o=[w[d],o].filter(Boolean).join(s));let h;C&&o&&(h=x(d),h!==null&&(o=`@layer ${h}{${s}${o}${s}}`));const M=p?"":`/* layer: ${d}${h&&h!==d?`, alias: ${h}`:""} */${s}`;return A[d]=o?M+o:""},E=(d=$,o)=>{const h=d.filter(M=>!(o!=null&&o.includes(M)));return[C&&h.length>0?`@layer ${h.map(x).filter(Q).join(", ")};`:void 0,...h.map(M=>y(M)||"")].filter(Boolean).join(s)};return{get css(){return E()},layers:$,matched:m,getLayers:E,getLayer:y,setLayer:async(d,o)=>{const h=await o(y(d));return A[d]=h,h}}}async matchVariants(e,t){const n={rawSelector:e,theme:this.config.theme,generator:this},i=async l=>{let u=!0;const[,,p,c]=l;for(;u;){u=!1;const f=l[1];for(const s of this.config.variants){if(!s.multiPass&&c.has(s))continue;let a=await s.match(f,n);if(a){if(_(a)){if(a===f)continue;a={matcher:a}}if(Array.isArray(a)){if(!a.length)continue;if(a.length===1)a=a[0];else{if(s.multiPass)throw new Error("multiPass can not be used together with array return variants");const m=a.map(g=>{const w=g.matcher??f,S=[g,...p],$=new Set(c);return $.add(s),[l[0],w,S,$]});return(await Promise.all(m.map(g=>i(g)))).flat()}}l[1]=a.matcher??f,p.unshift(a),c.add(s),u=!0;break}}if(!u)break;if(p.length>500)throw new Error(`Too many variants applied to "${e}"`)}return[l]};return await i([e,t||e,[],new Set])}applyVariants(e,t=e[4],n=e[1]){const l=t.slice().sort((f,s)=>(f.order||0)-(s.order||0)).reduceRight((f,s)=>a=>{var w,S;const m=((w=s.body)==null?void 0:w.call(s,a.entries))||a.entries,g=Array.isArray(s.parent)?s.parent:[s.parent,void 0];return(s.handle??Ke)({...a,entries:m,selector:((S=s.selector)==null?void 0:S.call(s,a.selector,m))||a.selector,parent:g[0]||a.parent,parentOrder:g[1]||a.parentOrder,layer:s.layer||a.layer,sort:s.sort||a.sort},f)},f=>f)({prefix:"",selector:qe(n),pseudo:"",entries:e[2]}),{parent:u,parentOrder:p}=l;u!=null&&p!=null&&this.parentOrders.set(u,p);const c={selector:[l.prefix,l.selector,l.pseudo].join(""),entries:l.entries,parent:u,layer:l.layer,sort:l.sort,noMerge:l.noMerge};for(const f of this.config.postprocess)f(c);return c}constructCustomCSS(e,t,n){const i=D(t);if(_(i))return i;const{selector:l,entries:u,parent:p}=this.applyVariants([0,n||e.rawSelector,i,void 0,e.variantHandlers]),c=`${l}{${X(u)}}`;return p?`${p}{${c}}`:c}async parseUtil(e,t,n=!1,i){const l=_(e)?await this.matchVariants(e):[e],u=async([c,f,s])=>{var g;this.config.details&&(t.rules=t.rules??[]);const a=this.config.rulesStaticMap[f];if(a&&a[1]&&(n||!((g=a[2])!=null&&g.internal))){t.generator.activatedRules.add(a),this.config.details&&t.rules.push(a);const w=this.config.rules.indexOf(a),S=D(a[1]),$=a[2];return _(S)?[[w,S,$]]:[[w,c,S,$,s]]}t.variantHandlers=s;const{rulesDynamic:m}=this.config;for(const w of m){const[S,$,A]=w;if(A!=null&&A.internal&&!n)continue;let C=f;if(A!=null&&A.prefix){const b=O(A.prefix);if(i){const d=O(i);if(!b.some(o=>d.includes(o)))continue}else{const d=b.find(o=>f.startsWith(o));if(d==null)continue;C=f.slice(d.length)}}const x=C.match(S);if(!x)continue;let y=await $(x,t);if(!y)continue;if(t.generator.activatedRules.add(w),this.config.details&&t.rules.push(w),typeof y!="string")if(Symbol.asyncIterator in y){const b=[];for await(const d of y)d&&b.push(d);y=b}else Symbol.iterator in y&&!Array.isArray(y)&&(y=Array.from(y).filter(Q));const E=Le(y).filter(b=>b.length);if(E.length){const b=this.config.rules.indexOf(w);return E.map(d=>{if(_(d))return[b,d,A];let o=s,h=A;for(const M of d)M[0]===k.variants?o=[...O(M[1]),...o]:M[0]===k.parent?o=[{parent:M[1]},...o]:M[0]===k.selector?o=[{selector:M[1]},...o]:M[0]===k.layer?o=[{layer:M[1]},...o]:M[0]===k.sort&&(h={...h,sort:M[1]});return[b,c,d,h,o]})}}},p=(await Promise.all(l.map(c=>u(c)))).flat().filter(c=>!!c);if(p.length)return p}stringifyUtil(e,t){if(!e)return;if(ie(e))return[e[0],void 0,e[1],void 0,e[2],this.config.details?t:void 0,void 0];const{selector:n,entries:i,parent:l,layer:u,sort:p,noMerge:c}=this.applyVariants(e),f=X(i);if(!f)return;const{layer:s,sort:a,...m}=e[3]??{},g={...m,layer:u??s,sort:p??a};return[e[0],n,f,l,g,this.config.details?t:void 0,c]}async expandShortcut(e,t,n=5){var f;if(n===0)return;const i=this.config.details?s=>{t.shortcuts=t.shortcuts??[],t.shortcuts.push(s)}:Oe;let l,u,p,c;for(const s of this.config.shortcuts){let a=e;if((f=s[2])!=null&&f.prefix){const g=O(s[2].prefix).find(w=>e.startsWith(w));if(g==null)continue;a=e.slice(g.length)}if(Ve(s)){if(s[0]===a){l=l||s[2],u=s[1],i(s);break}}else{const m=a.match(s[0]);if(m&&(u=s[1](m,t)),u){l=l||s[2],i(s);break}}}if(u&&(p=F(O(u).filter(_).map(s=>ke(s.trim()).split(/\s+/g)).flat()),c=O(u).filter(s=>!_(s)).map(s=>({handles:[],value:s}))),!u){const s=_(e)?await this.matchVariants(e):[e];for(const a of s){const[m,g,w]=a;if(m!==g){const S=await this.expandShortcut(g,t,n-1);S&&(p=S[0].filter(_).map($=>m.replace(g,$)),c=S[0].filter($=>!_($)).map($=>({handles:[...$.handles,...w],value:$.value})))}}}if(!(!(p!=null&&p.length)&&!(c!=null&&c.length)))return[[await Promise.all(O(p).map(async s=>{var a;return((a=await this.expandShortcut(s,t,n-1))==null?void 0:a[0])||[s]})),c].flat(2).filter(s=>!!s),l]}async stringifyShortcuts(e,t,n,i={layer:this.config.shortcutsLayer}){var s;const l=new je,u=(await Promise.all(F(n).map(async a=>{const m=_(a)?await this.parseUtil(a,t,!0,i.prefix):[[Number.POSITIVE_INFINITY,"{inline}",D(a.value),void 0,a.handles]];return!m&&this.config.warn&&Ne(`unmatched utility "${a}" in shortcut "${e[1]}"`),m||[]}))).flat(1).filter(Boolean).sort((a,m)=>a[0]-m[0]),[p,,c]=e,f=[];for(const a of u){if(ie(a)){f.push([a[0],void 0,a[1],void 0,a[2],t,void 0]);continue}const{selector:m,entries:g,parent:w,sort:S,noMerge:$,layer:A}=this.applyVariants(a,[...a[4],...c],p);l.getFallback(A??i.layer,new Re).getFallback(m,w,[[],a[0]])[0].push([g,!!($??((s=a[3])==null?void 0:s.noMerge)),S??0])}return f.concat(l.flatMap((a,m)=>a.map(([g,w],S,$)=>{const A=(x,y,E)=>{const b=Math.max(...E.map(o=>o[1])),d=E.map(o=>o[0]);return(x?[d.flat(1)]:d).map(o=>{const h=X(o);if(h)return[w,S,h,$,{...i,noMerge:y,sort:b,layer:m},t,void 0]})};return[[g.filter(([,x])=>x).map(([x,,y])=>[x,y]),!0],[g.filter(([,x])=>!x).map(([x,,y])=>[x,y]),!1]].map(([x,y])=>[...A(!1,y,x.filter(([E])=>E.some(b=>b[0]===k.shortcutsNoMerge))),...A(!0,y,x.filter(([E])=>E.every(b=>b[0]!==k.shortcutsNoMerge)))])}).flat(2).filter(Boolean)))}isBlocked(e){return!e||this.config.blocklist.map(t=>Array.isArray(t)?t[0]:t).some(t=>typeof t=="function"?t(e):_(t)?t===e:t.test(e))}getBlocked(e){const t=this.config.blocklist.find(n=>{const i=Array.isArray(n)?n[0]:n;return typeof i=="function"?i(e):_(i)?i===e:i.test(e)});return t?Array.isArray(t)?t:[t,void 0]:void 0}}async function tt(r,e){return await ee.create(r,e)}const me=/\s\$\$\s+/g;function He(r){return me.test(r)}function We(r,e){return He(r)?r.replace(me,e?` ${e} `:" "):e?`${e} ${r}`:r}const fe=/^\[(.+?)(~?=)"(.*)"\]$/;function qe(r){return fe.test(r)?r.replace(fe,(e,t,n,i)=>`[${J(t)}${n}"${J(i)}"]`):`.${J(r)}`}function Ke(r,e){return e(r)}export{we as L,et as a,Xe as b,Qe as c,Ae as d,be as e,X as f,qe as g,_ as h,Ze as i,tt as j,he as m,O as t,Ne as w};
