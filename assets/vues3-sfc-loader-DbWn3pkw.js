import{l as h}from"./babel-core-Bs32w3bm.js";import{b as x}from"./babel-plugin-transform-modules-commonjs-CmKjGwu3.js";import{t as y}from"./babel-plugin-transform-typescript-CDECGS7a.js";import{t as E}from"./babel-traverse-CY8MFp_n.js";import{l as O}from"./babel-types-CE9sEDWp.js";import{i as j}from"./vue-babel-plugin-jsx-DryT-hp_.js";import{p as v,c as S,b as P,d as T,f as $}from"./vue-compiler-sfc-C0Gwr7XH.js";import{u as A}from"./vueuse-core-8J3CJ1BF.js";import{h as C}from"./hash-sum-4ajH7_6J.js";const o={},b=async(s,u,f,d)=>{const m=$(s,{plugins:f??[],sourceFilename:u,sourceType:"module"}),c=[];E(m,{CallExpression(e){e.node.callee.name==="require"&&e.node.arguments.length===1&&O.isStringLiteral(e.node.arguments[0])&&c.push(e.node.arguments[0].value)},ExportAllDeclaration(e){c.push(e.node.source.value)},ImportDeclaration(e){c.push(e.node.source.value)}}),Object.defineProperties(o,Object.fromEntries(await Promise.all(c.filter(e=>!Object.hasOwn(o,e)).map(async e=>[e,{value:await import(e)}]))));const{code:t}=await h.transformFromAstAsync(m,s,{plugins:[x,...d!==void 0?Object.values(d):[]],sourceType:"module"})??{};if(!t)throw new Error(`unable to transform script "${u}"`);return t},z=async s=>{var u,f,d,m,c;if(!Object.hasOwn(o,s)){o[s]={};const{descriptor:t}=v(await(await fetch(s)).text(),{filename:s,sourceMap:!1}),e=`data-v-${C(s)}`,w=t.styles.some(({scoped:i})=>i);w&&(o[s].__scopeId=e);const a=t.template?{compilerOptions:{mode:"module",scopeId:w?e:null},filename:t.filename,id:e,isProd:!0,scoped:w,slotted:t.slotted,source:t.template.src?await(await fetch(t.template.src)).text():t.template.content}:void 0;if(t.script||t.scriptSetup){(u=t.script)!=null&&u.src&&(t.script.content=await(await fetch(t.script.src)).text());const i=["jsx",...[(f=t.script)==null?void 0:f.lang,(d=t.scriptSetup)==null?void 0:d.lang].includes("ts")?["typescript"]:[]],{bindings:p,content:l}=S(t,{babelParserPlugins:i,id:e,inlineTemplate:!1,isProd:!0,...a&&{templateOptions:a}});a!=null&&a.compilerOptions&&p&&(a.compilerOptions.bindingMetadata=p);const n={};Function("exports","require",await b(l,s,i,{jsx:j,...[(m=t.script)==null?void 0:m.lang,(c=t.scriptSetup)==null?void 0:c.lang].includes("ts")?{typescript:y}:{}}))(n,r=>o[r]),Object.assign(o[s],n.default)}if(a){const{code:i,errors:p,tips:l}=P(a);p.forEach(r=>{console.error(r)}),l.forEach(r=>{console.warn(r)});const n={};Function("exports","require",await b(i,t.filename))(n,r=>o[r]),Object.assign(o[s],n)}t.styles.forEach(({content:i,scoped:p=!1,src:l})=>{(async()=>{const{code:n,errors:r}=await T({filename:t.filename,id:e,isProd:!0,scoped:p,source:l?await(await fetch(l)).text():i});r.forEach(g=>{console.error(g)}),A(n,{...e&&{id:e}})})()})}if(!o[s])throw new Error(`unable to load module "${s}"`);return o[s]};export{z as l};
