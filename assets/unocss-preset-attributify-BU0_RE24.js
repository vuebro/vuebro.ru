import{a as k,b as W,i as E}from"./unocss-core-BiXlDC0r.js";const F=/^(?!.*\[[^:]+:.+\]$)((?:.+:)?!?)(.*)$/;function w(t={}){const m=t.prefix??"un-",s=t.prefixedOnly??!1,b=t.trueToNonValued??!1;let i;return{name:"attributify",match(r,{generator:g}){var o,h;const l=W(r);if(!l)return;let e=l[1];if(e.startsWith(m))e=e.slice(m.length);else if(s)return;const u=l[2],[,f="",c=u]=u.match(F)||[];if(c==="~"||b&&c==="true"||!c)return`${f}${e}`;if(i==null){const a=(h=(o=g==null?void 0:g.config)==null?void 0:o.separators)==null?void 0:h.join("|");a?i=new RegExp(`^(.*\\](?:${a}))(\\[[^\\]]+?\\])$`):i=!1}if(i){const[,a,d]=u.match(i)||[];if(d)return`${a}${f}${e}-${d}`}if(f&&c.match(/^[\d.]+$/)){const a=f.split(/([^:]*:)/g).filter(Boolean),d=a.pop()+c,$=a.join("");return[{matcher:`${f}${e}-${c}`},{matcher:`${$}${e}-${d}`}]}return`${f}${e}-${c}`}}}const p=/(<\w[\w:.$-]*\s)((?:'[^>']*'|"[^>"]*"|`[^>`]*`|\{[^>}]*\}|[^>]*?)*)/g,S=/(\?|(?!\d|-{2}|-\d)[\w\u00A0-\uFFFF-:%]+)(?:=("[^"]*|'[^']*))?/g,P=/[\s'"`;>]+/;function T(t){return{name:"attributify",extract:({content:m,cursor:s})=>{const b=m.matchAll(p);let i,r=0;for(const n of b){const[,x,y]=n,A=n.index+x.length;if(s>A&&s<=A+y.length){r=A,i=y;break}}if(!i)return null;const g=i.matchAll(S);let l=0,e,u;for(const n of g){const[x,y,A]=n,v=r+n.index;if(s>v&&s<=v+x.length){l=v,e=y,u=A==null?void 0:A.slice(1);break}}if(!e||e==="class"||e==="className"||e===":class")return null;const f=!!(t!=null&&t.prefix)&&e.startsWith(t.prefix);if(t!=null&&t.prefixedOnly&&!f)return null;const c=f?e.slice(t.prefix.length):e;if(u===void 0)return{extracted:c,resolveReplacement(n){const x=f?t.prefix.length:0;return{start:l+x,end:l+e.length,replacement:n}}};const o=l+e.length+2;let h=P.exec(u),a=0,d;for(;h;){const[n]=h;if(s>o+a&&s<=o+a+h.index){d=u.slice(a,a+h.index);break}a+=h.index+n.length,h=P.exec(u.slice(a))}d===void 0&&(d=u.slice(a));const[,$="",O]=d.match(F)||[];return{extracted:`${$}${c}-${O}`,transformSuggestions(n){return n.filter(x=>x.startsWith(`${$}${c}-`)).map(x=>$+x.slice($.length+c.length+1))},resolveReplacement(n){return{start:a+o,end:a+o+d.length,replacement:$+n.slice($.length+c.length+1)}}}}}}const j=["v-bind:",":"],R=/[\s'"`;]+/g,V=/<[^>\s]*\s((?:'[^']*'|"[^"]*"|`[^`]*`|\{[^}]*\}|=>|[^>]*?)*)/g,B=/(\?|(?!\d|-{2}|-\d)[\w\u00A0-\uFFFF:!%.~<-]+)=?(?:"([^"]*)"|'([^']*)'|\{([^}]*)\})?/g,N=["placeholder","fill","opacity","stroke-opacity"];function I(t){const m=(t==null?void 0:t.ignoreAttributes)??N,s=(t==null?void 0:t.nonValuedAttribute)??!0,b=(t==null?void 0:t.trueToNonValued)??!1;return{name:"@unocss/preset-attributify/extractor",extract({code:i}){return Array.from(i.matchAll(V)).flatMap(r=>Array.from((r[1]||"").matchAll(B))).flatMap(([,r,...g])=>{const l=g.filter(Boolean).join("");if(m.includes(r))return[];for(const e of j)if(r.startsWith(e)){r=r.slice(e.length);break}if(!l){if(E(r)&&s!==!1){const e=[`[${r}=""]`];return b&&e.push(`[${r}="true"]`),e}return[]}return["class","className"].includes(r)?l.split(R).filter(E):V.test(l)?(V.lastIndex=0,this.extract({code:l})):t!=null&&t.prefixedOnly&&t.prefix&&!r.startsWith(t.prefix)?[]:l.split(R).filter(e=>!!e&&e!==":").map(e=>`[${r}~="${e}"]`)})}}}const _=k((t={})=>{t.strict=t.strict??!1,t.prefix=t.prefix??"un-",t.prefixedOnly=t.prefixedOnly??!1,t.nonValuedAttribute=t.nonValuedAttribute??!0,t.ignoreAttributes=t.ignoreAttributes??N;const m=[w(t)],s=[I(t)],b=[T(t)];return{name:"@unocss/preset-attributify",enforce:"post",variants:m,extractors:s,options:t,autocomplete:{extractors:b},extractorDefault:t.strict?!1:void 0}});export{_ as p};
