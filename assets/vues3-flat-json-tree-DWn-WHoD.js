import{computed as g,isReactive as d,reactive as O}from"vue";import{t as j}from"./vueuse-shared-C_TsAxLO.js";import{v as R}from"./uuid-C_lTrkZC.js";var z=(l,{branch:w="branch",children:h="children",id:n="id",index:o="index",next:b="next",parent:f="parent",prev:v="prev",siblings:e="siblings"}={})=>{const L={[w]:{get(){var s;const i=[this];for(;(s=i[0])!=null&&s[f];)i.unshift(i[0][f]);return i}},[o]:{get(){return this[e].findIndex(i=>this[n]===i[n])}},[b]:{get(){return this[e][this[o]+1]}},[v]:{get(){return this[e][this[o]-1]}}},m=(i,s={})=>i.value.flatMap(t=>(Object.defineProperties(t,{...L,[f]:s,[e]:i}),[t,...m({configurable:!0,value:t[h]??[]},{configurable:!0,value:t})])),p=g(()=>m({value:d(l)?l:O(l)})),a=j(g(()=>Object.fromEntries(p.value.map(i=>[i[n],i]))));return{add:i=>{const s=a[i];if(s){const t=s[h],c=s[o],r=s[e],u=R();switch(!0){case!!s[f]:r.splice(c+1,0,{[n]:u});break;case!!t:t.unshift({[n]:u});break;default:r.splice(c+1,0,{[n]:u});break}return u}},arrLeaves:j(p),down:i=>{const s=a[i];if(s){const t=s[o],c=t+1,r=s[e];t<r.length-1&&r[t]&&r[c]&&([r[t],r[c]]=[r[c],r[t]])}},leaves:p,left:i=>{const s=a[i];if(s){const t=s[f];if(t!=null&&t[f]){const c=t[h]??[];return t[e].splice(t[o]+1,0,...c.splice(s[o],1)),t[n]}}},objLeaves:a,remove:i=>{const s=a[i];if(s){const t=s[f];if(t){const[c]=p.value,r=s[b],u=s[v],_=(r==null?void 0:r[n])??(u==null?void 0:u[n])??t[n]??(c==null?void 0:c[n]);return s[e].splice(s[o],1),_}}},right:i=>{const s=a[i];if(s){const t=s[v];if(t){const c=t[h]??[],r=t[n],u=s[e];return t[h]=[...c,...u.splice(s[o],1)],r}}},up:i=>{const s=a[i];if(s){const t=s[o],c=t-1,r=s[e];t&&r[t]&&r[c]&&([r[c],r[t]]=[r[t],r[c]])}}}};export{z as f};
