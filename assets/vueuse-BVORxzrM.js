import{getCurrentScope as K,onScopeDispose as Q,unref as U,onMounted as $,nextTick as Z,isRef as ee,getCurrentInstance as N,computed as j,ref as A,watch as I,reactive as k,readonly as te}from"vue";function R(e){return K()?(Q(e),!0):!1}function y(e){return typeof e=="function"?e():U(e)}const Y=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const ne=e=>e!=null,oe=Object.prototype.toString,re=e=>oe.call(e)==="[object Object]",S=()=>{};function q(e,o){function t(...n){return new Promise((u,c)=>{Promise.resolve(e(()=>o.apply(this,n),{fn:o,thisArg:this,args:n})).then(u).catch(c)})}return t}function le(e,o={}){let t,n,u=S;const c=f=>{clearTimeout(f),u(),u=S};return f=>{const d=y(e),i=y(o.maxWait);return t&&c(t),d<=0||i!==void 0&&i<=0?(n&&(c(n),n=null),Promise.resolve(f())):new Promise((s,l)=>{u=o.rejectOnCancel?l:s,i&&!n&&(n=setTimeout(()=>{t&&c(t),n=null,s(f())},i)),t=setTimeout(()=>{n&&c(n),n=null,s(f())},d)})}}function se(...e){let o=0,t,n=!0,u=S,c,a,f,d,i;!ee(e[0])&&typeof e[0]=="object"?{delay:a,trailing:f=!0,leading:d=!0,rejectOnCancel:i=!1}=e[0]:[a,f=!0,d=!0,i=!1]=e;const s=()=>{t&&(clearTimeout(t),t=void 0,u(),u=S)};return m=>{const v=y(a),p=Date.now()-o,E=()=>c=m();return s(),v<=0?(o=Date.now(),E()):(p>v&&(d||!n)?(o=Date.now(),E()):f&&(c=new Promise((w,h)=>{u=i?h:w,t=setTimeout(()=>{o=Date.now(),n=!0,w(E()),s()},Math.max(0,v-p))})),!d&&!t&&(t=setTimeout(()=>n=!0,v)),n=!1,c)}}function ie(e){return N()}function ue(e,o=200,t={}){return q(le(o,t),e)}function ce(e,o=200,t=!1,n=!0,u=!1){return q(se(o,t,n,u),e)}function z(e,o=!0,t){ie()?$(e,t):o?e():Z(e)}function O(e){var o;const t=y(e);return(o=t?.$el)!=null?o:t}const P=Y?window:void 0,ae=Y?window.document:void 0;function G(...e){let o,t,n,u;if(typeof e[0]=="string"||Array.isArray(e[0])?([t,n,u]=e,o=P):[o,t,n,u]=e,!o)return S;Array.isArray(t)||(t=[t]),Array.isArray(n)||(n=[n]);const c=[],a=()=>{c.forEach(s=>s()),c.length=0},f=(s,l,m,v)=>(s.addEventListener(l,m,v),()=>s.removeEventListener(l,m,v)),d=I(()=>[O(o),y(u)],([s,l])=>{if(a(),!s)return;const m=re(l)?{...l}:l;c.push(...t.flatMap(v=>n.map(p=>f(s,v,p,m))))},{immediate:!0,flush:"post"}),i=()=>{d(),a()};return R(i),i}function fe(){const e=A(!1),o=N();return o&&$(()=>{e.value=!0},o),e}function de(e){const o=fe();return j(()=>(o.value,!!e()))}function pe(e,o,t={}){const{root:n,rootMargin:u="0px",threshold:c=0,window:a=P,immediate:f=!0}=t,d=de(()=>a&&"IntersectionObserver"in a),i=j(()=>{const p=y(e);return(Array.isArray(p)?p:[p]).map(O).filter(ne)});let s=S;const l=A(f),m=d.value?I(()=>[i.value,O(n),l.value],([p,E])=>{if(s(),!l.value||!p.length)return;const w=new IntersectionObserver(o,{root:O(E),rootMargin:u,threshold:c});p.forEach(h=>h&&w.observe(h)),s=()=>{w.disconnect(),s=S}},{immediate:f,flush:"post"}):S,v=()=>{s(),m(),l.value=!1};return R(v),{isSupported:d,isActive:l,pause(){s(),l.value=!1},resume(){l.value=!0},stop:v}}const X=1;function he(e,o={}){const{throttle:t=0,idle:n=200,onStop:u=S,onScroll:c=S,offset:a={left:0,right:0,top:0,bottom:0},eventListenerOptions:f={capture:!1,passive:!0},behavior:d="auto",window:i=P,onError:s=r=>{console.error(r)}}=o,l=A(0),m=A(0),v=j({get(){return l.value},set(r){E(r,void 0)}}),p=j({get(){return m.value},set(r){E(void 0,r)}});function E(r,D){var b,C,L,_;if(!i)return;const g=y(e);if(!g)return;(L=g instanceof Document?i.document.body:g)==null||L.scrollTo({top:(b=y(D))!=null?b:p.value,left:(C=y(r))!=null?C:v.value,behavior:y(d)});const M=((_=g?.document)==null?void 0:_.documentElement)||g?.documentElement||g;v!=null&&(l.value=M.scrollLeft),p!=null&&(m.value=M.scrollTop)}const w=A(!1),h=k({left:!0,right:!1,top:!0,bottom:!1}),T=k({left:!1,right:!1,top:!1,bottom:!1}),F=r=>{w.value&&(w.value=!1,T.left=!1,T.right=!1,T.top=!1,T.bottom=!1,u(r))},J=ue(F,t+n),W=r=>{var D;if(!i)return;const b=((D=r?.document)==null?void 0:D.documentElement)||r?.documentElement||O(r),{display:C,flexDirection:L}=getComputedStyle(b),_=b.scrollLeft;T.left=_<l.value,T.right=_>l.value;const g=Math.abs(_)<=(a.left||0),M=Math.abs(_)+b.clientWidth>=b.scrollWidth-(a.right||0)-X;C==="flex"&&L==="row-reverse"?(h.left=M,h.right=g):(h.left=g,h.right=M),l.value=_;let x=b.scrollTop;r===i.document&&!x&&(x=i.document.body.scrollTop),T.top=x<m.value,T.bottom=x>m.value;const B=Math.abs(x)<=(a.top||0),V=Math.abs(x)+b.clientHeight>=b.scrollHeight-(a.bottom||0)-X;C==="flex"&&L==="column-reverse"?(h.top=V,h.bottom=B):(h.top=B,h.bottom=V),m.value=x},H=r=>{var D;if(!i)return;const b=(D=r.target.documentElement)!=null?D:r.target;W(b),w.value=!0,J(r),c(r)};return G(e,"scroll",t?ce(H,t,!0,!1):H,f),z(()=>{try{const r=y(e);if(!r)return;W(r)}catch(r){s(r)}}),G(e,"scrollend",F,f),{x:v,y:p,isScrolling:w,arrivedState:h,directions:T,measure(){const r=y(e);i&&r&&W(r)}}}let me=0;function be(e,o={}){const t=A(!1),{document:n=ae,immediate:u=!0,manual:c=!1,id:a=`vueuse_styletag_${++me}`}=o,f=A(e);let d=()=>{};const i=()=>{if(!n)return;const l=n.getElementById(a)||n.createElement("style");l.isConnected||(l.id=a,o.media&&(l.media=o.media),n.head.appendChild(l)),!t.value&&(d=I(f,m=>{l.textContent=m},{immediate:!0}),t.value=!0)},s=()=>{!n||!t.value||(d(),n.head.removeChild(n.getElementById(a)),t.value=!1)};return u&&!c&&z(i),c||R(s),{id:a,css:f,unload:s,load:i,isLoaded:te(t)}}export{he as a,pe as b,be as u};
