import{g as G}from"./ajv-keywords-DR2KGciz.js";import{r as Q}from"./babel-helper-plugin-utils-DJaLuuN1.js";import{r as R}from"./babel-helper-module-transforms-wLhiK235.js";import{r as B}from"./babel-core-Bs32w3bm.js";var k={},w={},N;function X(){if(N)return w;N=1,Object.defineProperty(w,"__esModule",{value:!0}),w.transformDynamicImport=s;var u=B(),d=R();const l=r=>u.template.expression.ast`require(${r})`,n=(r,o)=>u.types.callExpression(o.addHelper("interopRequireWildcard"),[l(r)]);function s(r,o,t){const x=o?l:n;r.replaceWith((0,d.buildDynamicImport)(r.node,!0,!1,E=>x(E,t)))}return w}var v={},z;function Y(){if(z)return v;z=1,Object.defineProperty(v,"__esModule",{value:!0}),v.lazyImportsHook=void 0;var u=B(),d=R();const l=n=>({name:"@babel/plugin-transform-modules-commonjs/lazy",version:"7.27.1",getWrapperPayload(s,r){if((0,d.isSideEffectImport)(r)||r.reexportAll)return null;if(n===!0)return s.includes(".")?null:"lazy/function";if(Array.isArray(n))return n.includes(s)?"lazy/function":null;if(typeof n=="function")return n(s)?"lazy/function":null},buildRequireWrapper(s,r,o,t){if(o==="lazy/function")return t?u.template.statement.ast`
        function ${s}() {
          const data = ${r};
          ${s} = function(){ return data; };
          return data;
        }
      `:!1},wrapReference(s,r){if(r==="lazy/function")return u.types.callExpression(s,[])}});return v.lazyImportsHook=l,v}var I={},A;function Z(){if(A)return I;A=1,Object.defineProperty(I,"__esModule",{value:!0}),I.defineCommonJSHook=d,I.makeInvokers=n;const u="@babel/plugin-transform-modules-commonjs/customWrapperPlugin";function d(s,r){let o=s.get(u);o||s.set(u,o=[]),o.push(r)}function l(s,r){if(s)for(const o of s){const t=r(o);if(t!=null)return t}}function n(s){const r=s.get(u);return{getWrapperPayload(...o){return l(r,t=>t.getWrapperPayload==null?void 0:t.getWrapperPayload(...o))},wrapReference(...o){return l(r,t=>t.wrapReference==null?void 0:t.wrapReference(...o))},buildRequireWrapper(...o){return l(r,t=>t.buildRequireWrapper==null?void 0:t.buildRequireWrapper(...o))}}}return I}var D;function ee(){return D||(D=1,function(u){Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0,Object.defineProperty(u,"defineCommonJSHook",{enumerable:!0,get:function(){return o.defineCommonJSHook}});var d=Q(),l=R(),n=B(),s=X(),r=Y(),o=Z();u.default=(0,d.declare)((t,x)=>{var E,W,h;t.assertVersion(7);const{strictNamespace:_=!1,mjsStrictNamespace:j=_,allowTopLevelThis:L,strict:O,strictMode:T,noInterop:M,importInterop:J,lazy:g=!1,allowCommonJSExports:V=!0,loose:S=!1}=x,H=(E=t.assumption("constantReexports"))!=null?E:S,U=(W=t.assumption("enumerableModuleMeta"))!=null?W:S,F=(h=t.assumption("noIncompleteNsImportDetection"))!=null?h:!1;if(typeof g!="boolean"&&typeof g!="function"&&(!Array.isArray(g)||!g.every(e=>typeof e=="string")))throw new Error(".lazy must be a boolean, array of strings, or a function");if(typeof _!="boolean")throw new Error(".strictNamespace must be a boolean, or undefined");if(typeof j!="boolean")throw new Error(".mjsStrictNamespace must be a boolean, or undefined");const q=e=>n.template.expression.ast`
    (function(){
      throw new Error(
        "The CommonJS '" + "${e}" + "' variable is not available in ES6 modules." +
        "Consider setting setting sourceType:script or sourceType:unambiguous in your " +
        "Babel config for this file.");
    })()
  `,K={ReferencedIdentifier(e){const i=e.node.name;if(i!=="module"&&i!=="exports")return;const a=e.scope.getBinding(i);this.scope.getBinding(i)!==a||e.parentPath.isObjectProperty({value:e.node})&&e.parentPath.parentPath.isObjectPattern()||e.parentPath.isAssignmentExpression({left:e.node})||e.isAssignmentExpression({left:e.node})||e.replaceWith(q(i))},UpdateExpression(e){const i=e.get("argument");if(!i.isIdentifier())return;const a=i.node.name;if(a!=="module"&&a!=="exports")return;const c=e.scope.getBinding(a);this.scope.getBinding(a)===c&&e.replaceWith(n.types.assignmentExpression(e.node.operator[0]+"=",i.node,q(a)))},AssignmentExpression(e){const i=e.get("left");if(i.isIdentifier()){const a=i.node.name;if(a!=="module"&&a!=="exports")return;const c=e.scope.getBinding(a);if(this.scope.getBinding(a)!==c)return;const f=e.get("right");f.replaceWith(n.types.sequenceExpression([f.node,q(a)]))}else if(i.isPattern()){const a=i.getOuterBindingIdentifiers(),c=Object.keys(a).find(p=>p!=="module"&&p!=="exports"?!1:this.scope.getBinding(p)===e.scope.getBinding(p));if(c){const p=e.get("right");p.replaceWith(n.types.sequenceExpression([p.node,q(c)]))}}}};return{name:"transform-modules-commonjs",pre(){this.file.set("@babel/plugin-transform-modules-*","commonjs"),g&&(0,o.defineCommonJSHook)(this.file,(0,r.lazyImportsHook)(g))},visitor:{["CallExpression"+(t.types.importExpression?"|ImportExpression":"")](e){if(!this.file.has("@babel/plugin-proposal-dynamic-import")||e.isCallExpression()&&!n.types.isImport(e.node.callee))return;let{scope:i}=e;do i.rename("require");while(i=i.parent);(0,s.transformDynamicImport)(e,M,this.file)},Program:{exit(e,i){if(!(0,l.isModule)(e))return;e.scope.rename("exports"),e.scope.rename("module"),e.scope.rename("require"),e.scope.rename("__filename"),e.scope.rename("__dirname"),V||e.traverse(K,{scope:e.scope});let a=(0,l.getModuleName)(this.file.opts,x);a&&(a=n.types.stringLiteral(a));const c=(0,o.makeInvokers)(this.file),{meta:p,headers:f}=(0,l.rewriteModuleStatementsAndPrepareHeader)(e,{exportName:"exports",constantReexports:H,enumerableModuleMeta:U,strict:O,strictMode:T,allowTopLevelThis:L,noInterop:M,importInterop:J,wrapReference:c.wrapReference,getWrapperPayload:c.getWrapperPayload,esNamespaceOnly:typeof i.filename=="string"&&/\.mjs$/.test(i.filename)?j:_,noIncompleteNsImportDetection:F,filename:this.file.opts.filename});for(const[b,m]of p.source){const P=n.types.callExpression(n.types.identifier("require"),[n.types.stringLiteral(b)]);let y;if((0,l.isSideEffectImport)(m)){if(g&&m.wrap==="function")throw new Error("Assertion failure");y=n.types.expressionStatement(P)}else{const $=(0,l.wrapInterop)(e,P,m.interop)||P;if(m.wrap){const C=c.buildRequireWrapper(m.name,$,m.wrap,m.referenced);if(C===!1)continue;y=C}y??(y=n.template.statement.ast`
                var ${m.name} = ${$};
              `)}y.loc=m.loc,f.push(y),f.push(...(0,l.buildNamespaceInitStatements)(p,m,H,c.wrapReference))}(0,l.ensureStatementsHoisted)(f),e.unshiftContainer("body",f),e.get("body").forEach(b=>{f.includes(b.node)&&b.isVariableDeclaration()&&b.scope.registerDeclaration(b)})}}}}})}(k)),k}var re=ee();const se=G(re);export{se as b};
