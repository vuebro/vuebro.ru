import{defineComponent as y,computed as w,ref as b,watch as B,onUnmounted as C,createElementBlock as M,openBlock as v,Fragment as O,renderList as j,normalizeClass as z,createBlock as D,resolveDynamicComponent as F}from"vue";import{p as L,b as P}from"./vues3-shared-BFDC0r8B.js";import{a as R,b as T}from"./vueuse-core-8J3CJ1BF.js";import{useRouter as U}from"vue-router";import{$ as n,p as _,m as X,t as k,r as Y,a as q,s as A,_ as G}from"./index-PyVM65xY.js";import{v as E}from"./uuid-C_lTrkZC.js";import"./vues3-flat-json-tree-JZymyF9I.js";import"./vueuse-shared-B-8pbEvH.js";import"./ajv-keywords-DR2KGciz.js";import"./fast-deep-equal-C148XJoK.js";import"./fast-uri-J6I7s6O_.js";import"./vite-plugin-node-polyfills-BxKsylE-.js";import"./unocss-preset-web-fonts-BwX32IZs.js";import"./unocss-core-BiXlDC0r.js";import"./unhead-vue-mOLT5W2h.js";import"./unhead-C9uMQcWG.js";import"./hookable-B8xFkYCm.js";/* empty css                     */import"./unocss-runtime-DjWo5fuJ.js";import"./unocss-preset-attributify-BU0_RE24.js";import"./unocss-preset-icons-BSDWaWVK.js";import"./ofetch-Xuol5JLi.js";import"./destr-BPvN1X9m.js";import"./ufo-yHXLf0QE.js";import"./iconify-utils-fcSnWnXl.js";import"./debug-BJdhDyZ3.js";import"./ms-CzQ2E3wO.js";import"./unocss-preset-tagify-CW1W8HaZ.js";import"./unocss-preset-typography-Cx0m7Qik.js";import"./unocss-rule-utils-CY5oUCfA.js";import"./magic-string-UES8VajL.js";import"./jridgewell-sourcemap-codec-Bvwux82D.js";import"./unocss-preset-wind3-BUpsSedd.js";import"./unocss-preset-mini-D86yhn4E.js";import"./unocss-extractor-arbitrary-variants-vfz8FJzM.js";import"./iconify-vue-doUnxV_b.js";import"./vues3-sfc-loader-DbWn3pkw.js";import"./babel-core-Bs32w3bm.js";import"./babel-helpers-C5F9EM_H.js";import"./babel-types-CE9sEDWp.js";import"./babel-helper-validator-identifier-D_Npcg8R.js";import"./babel-helper-string-parser-BDIUnZ73.js";import"./babel-template-g67SkwDR.js";import"./babel-parser-BdUoaBUX.js";import"./babel-code-frame-CF4WPE1y.js";import"./picocolors-BvAdOidQ.js";import"./js-tokens-djJ7z6rz.js";import"./babel-traverse-CY8MFp_n.js";import"./babel-generator-Di8sYE5j.js";import"./jridgewell-gen-mapping-B9Y6OL9u.js";import"./jridgewell-set-array-BE6Vm1BJ.js";import"./jridgewell-trace-mapping-DD9rfrUS.js";import"./jridgewell-resolve-uri-vvuf2ddC.js";import"./jsesc-Dg_4ldmV.js";import"./babel-helper-module-transforms-wLhiK235.js";import"./assert-DVti1A0a.js";import"./util-BgxUKn95.js";import"./is-arguments-DZ2sMS6D.js";import"./has-tostringtag-DZp5EflQ.js";import"./has-symbols-CySAGvJ4.js";import"./call-bound-DY3DN3rs.js";import"./get-intrinsic-BVpaDpCE.js";import"./es-object-atoms-BR76m4z7.js";import"./es-errors-DjMuYndc.js";import"./math-intrinsics-DP1tGiab.js";import"./gopd-C1lCZ5Qs.js";import"./es-define-property-D_7cP-M3.js";import"./get-proto-Dny4HlqK.js";import"./dunder-proto-BjkS1L8M.js";import"./call-bind-apply-helpers-BHExw0pn.js";import"./function-bind-CHqF18-c.js";import"./hasown-DwiY0sux.js";import"./is-generator-function-Bo7vhC3n.js";import"./safe-regex-test-DMQuywIX.js";import"./is-regex-_UHMKOEW.js";import"./which-typed-array-C3Htv8k4.js";import"./for-each-c7q_9EOt.js";import"./is-callable-BYFz_UGF.js";import"./available-typed-arrays-BMUb0uWs.js";import"./possible-typed-array-names-Crc7_Gg1.js";import"./call-bind-Bkxa2D5b.js";import"./set-function-length-DdYwtXAH.js";import"./define-data-property-C1GzKfj1.js";import"./has-property-descriptors-BlxtmrFX.js";import"./is-typed-array-CJFrABLs.js";import"./inherits-BICa84dG.js";import"./object.assign-DeJ8qXsf.js";import"./object-keys-BRu_Tray.js";import"./object-is-B1GFV4dl.js";import"./define-properties-CPiiRcr5.js";import"./is-nan-Cjg0z7_4.js";import"./babel-helper-module-imports-DoEuVeLX.js";import"./path-browserify-DQtFYpBN.js";import"./gensync-BX_raIj5.js";import"./babel-helper-compilation-targets-oSsZVWws.js";import"./browserslist-73xwVgbS.js";import"./node-releases-TctFVCuV.js";import"./caniuse-lite-C0R3ot8e.js";import"./electron-to-chromium-BpEtZ-v-.js";import"./babel-helper-validator-option-CQHpvh0V.js";import"./babel-compat-data-BL8P4ggz.js";import"./lru-cache-Db56TUS3.js";import"./yallist-CCGksDJH.js";import"./node-stdlib-browser-DJRw39Hy.js";import"./convert-source-map-D2o-g6QH.js";import"./ampproject-remapping-Cqmr4mnU.js";import"./babel-plugin-transform-modules-commonjs-CmKjGwu3.js";import"./babel-helper-plugin-utils-DJaLuuN1.js";import"./babel-plugin-transform-typescript-CDECGS7a.js";import"./babel-plugin-syntax-typescript-CwbC-KDa.js";import"./babel-helper-create-class-features-plugin-DgPxqHHm.js";import"./babel-helper-replace-supers-CLwgBnV3.js";import"./babel-helper-member-expression-to-functions-BwEbAO2d.js";import"./babel-helper-optimise-call-expression-CHv22ECX.js";import"./babel-helper-annotate-as-pure-CU01bfHa.js";import"./babel-helper-skip-transparent-expression-wrappers-BsHlfvbB.js";import"./vue-babel-plugin-jsx-DryT-hp_.js";import"./babel-plugin-syntax-jsx-Ca8TYkR4.js";import"./vue-babel-plugin-resolve-type-6OAn4dWq.js";import"./vue-compiler-sfc-C0Gwr7XH.js";import"./vue-shared-B1s9C4gZ.js";import"./hash-sum-4ajH7_6J.js";const H=y({__name:"MultiView",setup(S,{expose:h}){h();const m=w(()=>new Map(n.value.map(({id:o=E()})=>[o,!1]))),r=b(new Map(m.value)),u=b([]),c=U(),t=[],s=w(()=>{const[[o,i]=[]]=_;return _.clear(),o&&i&&_.set(o,i),Object.fromEntries(n.value.map(p=>[p.id,X(p)]))}),a=()=>{t.forEach(o=>{o()}),t.length=0},V=({id:o})=>s.value[o];B(u,o=>{a(),setTimeout(()=>{o.forEach(i=>{const{stop:p}=R(i,([{isIntersecting:l,target:{id:e}={}}={}]=[])=>{r.value=new Map(m.value),e&&l!==void 0&&m.value.set(e,l)},{threshold:.1});t.push(p)})})},{deep:!0}),T(window,{behavior:"smooth",onStop:()=>{var o,i;if(!q.value&&k.value&&n.value.length){const{scrollX:p,scrollY:l}=window,[e]=n.value,[d]=L.value;if(d&&e){const{$children:[{id:$}={}]=[]}=d,x=!Math.floor(p)&&!Math.floor(l)&&e.id===$?d.id:((o=[...m.value.entries()].find(([,f])=>f))==null?void 0:o[0])??((i=[...r.value.entries()].find(([,f])=>f))==null?void 0:i[0])??e.id;A.value=!1,c.push({name:x}).catch(P)}}}}),C(a);const g={intersecting:m,$intersecting:r,refs:u,router:c,stops:t,templates:s,clearStops:a,template:V,get v4(){return E},get $siblings(){return n},get resolve(){return Y},get that(){return k}};return Object.defineProperty(g,"__isScriptSetup",{enumerable:!1,value:!0}),g}}),I=["id","role"];function J(S,h,m,r,u,c){return v(!0),M(O,null,j(r.$siblings,t=>{var s;return v(),M("div",{id:t.id??r.v4(),key:t.id??r.v4(),ref_for:!0,ref:"refs",class:z(t.class),role:t.id===((s=r.that)==null?void 0:s.id)?"main":"section","un-cloak":""},[(v(),D(F(r.template(t)),{id:t.id,"un-cloak":"",onVnodeMounted:a=>r.resolve(t)},null,8,["id","onVnodeMounted"]))],10,I)}),128)}const lr=G(H,[["render",J],["__file","MultiView.vue"]]);export{lr as default};
