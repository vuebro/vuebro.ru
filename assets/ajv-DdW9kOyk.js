import{f as Jr}from"./fast-deep-equal-DhA4GXGS.js";import{j as gn}from"./json-schema-traverse-DW8_mBst.js";import{f as wn}from"./fast-uri-DiSllsZr.js";var Yo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function bn(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Zo(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function s(){return this instanceof s?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(s){var i=Object.getOwnPropertyDescriptor(e,s);Object.defineProperty(r,s,i.get?i:{enumerable:!0,get:function(){return e[s]}})}),r}var Nt={exports:{}},Hr={},ge={},Ne={},xe={},K={},Ze={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.regexpCode=e.getEsmExportName=e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;class t{}e._CodeOrName=t,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class r extends t{constructor(E){if(super(),!e.IDENTIFIER.test(E))throw new Error("CodeGen: name must be a valid identifier");this.str=E}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}e.Name=r;class s extends t{constructor(E){super(),this._items=typeof E=="string"?[E]:E}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const E=this._items[0];return E===""||E==='""'}get str(){var E;return(E=this._str)!==null&&E!==void 0?E:this._str=this._items.reduce((j,R)=>`${j}${R}`,"")}get names(){var E;return(E=this._names)!==null&&E!==void 0?E:this._names=this._items.reduce((j,R)=>(R instanceof r&&(j[R.str]=(j[R.str]||0)+1),j),{})}}e._Code=s,e.nil=new s("");function i(f,...E){const j=[f[0]];let R=0;for(;R<E.length;)a(j,E[R]),j.push(f[++R]);return new s(j)}e._=i;const o=new s("+");function l(f,...E){const j=[b(f[0])];let R=0;for(;R<E.length;)j.push(o),a(j,E[R]),j.push(o,b(f[++R]));return c(j),new s(j)}e.str=l;function a(f,E){E instanceof s?f.push(...E._items):E instanceof r?f.push(E):f.push(v(E))}e.addCodeArg=a;function c(f){let E=1;for(;E<f.length-1;){if(f[E]===o){const j=d(f[E-1],f[E+1]);if(j!==void 0){f.splice(E-1,3,j);continue}f[E++]="+"}E++}}function d(f,E){if(E==='""')return f;if(f==='""')return E;if(typeof f=="string")return E instanceof r||f[f.length-1]!=='"'?void 0:typeof E!="string"?`${f.slice(0,-1)}${E}"`:E[0]==='"'?f.slice(0,-1)+E.slice(1):void 0;if(typeof E=="string"&&E[0]==='"'&&!(f instanceof r))return`"${f}${E.slice(1)}`}function m(f,E){return E.emptyStr()?f:f.emptyStr()?E:l`${f}${E}`}e.strConcat=m;function v(f){return typeof f=="number"||typeof f=="boolean"||f===null?f:b(Array.isArray(f)?f.join(","):f)}function P(f){return new s(b(f))}e.stringify=P;function b(f){return JSON.stringify(f).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}e.safeStringify=b;function $(f){return typeof f=="string"&&e.IDENTIFIER.test(f)?new s(`.${f}`):i`[${f}]`}e.getProperty=$;function w(f){if(typeof f=="string"&&e.IDENTIFIER.test(f))return new s(`${f}`);throw new Error(`CodeGen: invalid export name: ${f}, use explicit $id name mapping`)}e.getEsmExportName=w;function p(f){return new s(f.toString())}e.regexpCode=p})(Ze);var kt={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=e.UsedValueState=void 0;const t=Ze;class r extends Error{constructor(d){super(`CodeGen: "code" for ${d} not defined`),this.value=d.value}}var s;(function(c){c[c.Started=0]="Started",c[c.Completed=1]="Completed"})(s||(e.UsedValueState=s={})),e.varKinds={const:new t.Name("const"),let:new t.Name("let"),var:new t.Name("var")};class i{constructor({prefixes:d,parent:m}={}){this._names={},this._prefixes=d,this._parent=m}toName(d){return d instanceof t.Name?d:this.name(d)}name(d){return new t.Name(this._newName(d))}_newName(d){const m=this._names[d]||this._nameGroup(d);return`${d}${m.index++}`}_nameGroup(d){var m,v;if(!((v=(m=this._parent)===null||m===void 0?void 0:m._prefixes)===null||v===void 0)&&v.has(d)||this._prefixes&&!this._prefixes.has(d))throw new Error(`CodeGen: prefix "${d}" is not allowed in this scope`);return this._names[d]={prefix:d,index:0}}}e.Scope=i;class o extends t.Name{constructor(d,m){super(m),this.prefix=d}setValue(d,{property:m,itemIndex:v}){this.value=d,this.scopePath=(0,t._)`.${new t.Name(m)}[${v}]`}}e.ValueScopeName=o;const l=(0,t._)`\n`;class a extends i{constructor(d){super(d),this._values={},this._scope=d.scope,this.opts={...d,_n:d.lines?l:t.nil}}get(){return this._scope}name(d){return new o(d,this._newName(d))}value(d,m){var v;if(m.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const P=this.toName(d),{prefix:b}=P,$=(v=m.key)!==null&&v!==void 0?v:m.ref;let w=this._values[b];if(w){const E=w.get($);if(E)return E}else w=this._values[b]=new Map;w.set($,P);const p=this._scope[b]||(this._scope[b]=[]),f=p.length;return p[f]=m.ref,P.setValue(m,{property:b,itemIndex:f}),P}getValue(d,m){const v=this._values[d];if(v)return v.get(m)}scopeRefs(d,m=this._values){return this._reduceValues(m,v=>{if(v.scopePath===void 0)throw new Error(`CodeGen: name "${v}" has no value`);return(0,t._)`${d}${v.scopePath}`})}scopeCode(d=this._values,m,v){return this._reduceValues(d,P=>{if(P.value===void 0)throw new Error(`CodeGen: name "${P}" has no value`);return P.value.code},m,v)}_reduceValues(d,m,v={},P){let b=t.nil;for(const $ in d){const w=d[$];if(!w)continue;const p=v[$]=v[$]||new Map;w.forEach(f=>{if(p.has(f))return;p.set(f,s.Started);let E=m(f);if(E){const j=this.opts.es5?e.varKinds.var:e.varKinds.const;b=(0,t._)`${b}${j} ${f} = ${E};${this.opts._n}`}else if(E=P==null?void 0:P(f))b=(0,t._)`${b}${E}${this.opts._n}`;else throw new r(f);p.set(f,s.Completed)})}return b}}e.ValueScope=a})(kt);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.regexpCode=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;const t=Ze,r=kt;var s=Ze;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return s._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return s.str}}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:function(){return s.strConcat}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return s.nil}}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:function(){return s.getProperty}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return s.stringify}}),Object.defineProperty(e,"regexpCode",{enumerable:!0,get:function(){return s.regexpCode}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return s.Name}});var i=kt;Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return i.Scope}}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:function(){return i.ValueScope}}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:function(){return i.ValueScopeName}}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:function(){return i.varKinds}}),e.operators={GT:new t._Code(">"),GTE:new t._Code(">="),LT:new t._Code("<"),LTE:new t._Code("<="),EQ:new t._Code("==="),NEQ:new t._Code("!=="),NOT:new t._Code("!"),OR:new t._Code("||"),AND:new t._Code("&&"),ADD:new t._Code("+")};class o{optimizeNodes(){return this}optimizeNames(n,u){return this}}class l extends o{constructor(n,u,S){super(),this.varKind=n,this.name=u,this.rhs=S}render({es5:n,_n:u}){const S=n?r.varKinds.var:this.varKind,M=this.rhs===void 0?"":` = ${this.rhs}`;return`${S} ${this.name}${M};`+u}optimizeNames(n,u){if(n[this.name.str])return this.rhs&&(this.rhs=Q(this.rhs,n,u)),this}get names(){return this.rhs instanceof t._CodeOrName?this.rhs.names:{}}}class a extends o{constructor(n,u,S){super(),this.lhs=n,this.rhs=u,this.sideEffects=S}render({_n:n}){return`${this.lhs} = ${this.rhs};`+n}optimizeNames(n,u){if(!(this.lhs instanceof t.Name&&!n[this.lhs.str]&&!this.sideEffects))return this.rhs=Q(this.rhs,n,u),this}get names(){const n=this.lhs instanceof t.Name?{}:{...this.lhs.names};return B(n,this.rhs)}}class c extends a{constructor(n,u,S,M){super(n,S,M),this.op=u}render({_n:n}){return`${this.lhs} ${this.op}= ${this.rhs};`+n}}class d extends o{constructor(n){super(),this.label=n,this.names={}}render({_n:n}){return`${this.label}:`+n}}class m extends o{constructor(n){super(),this.label=n,this.names={}}render({_n:n}){return`break${this.label?` ${this.label}`:""};`+n}}class v extends o{constructor(n){super(),this.error=n}render({_n:n}){return`throw ${this.error};`+n}get names(){return this.error.names}}class P extends o{constructor(n){super(),this.code=n}render({_n:n}){return`${this.code};`+n}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(n,u){return this.code=Q(this.code,n,u),this}get names(){return this.code instanceof t._CodeOrName?this.code.names:{}}}class b extends o{constructor(n=[]){super(),this.nodes=n}render(n){return this.nodes.reduce((u,S)=>u+S.render(n),"")}optimizeNodes(){const{nodes:n}=this;let u=n.length;for(;u--;){const S=n[u].optimizeNodes();Array.isArray(S)?n.splice(u,1,...S):S?n[u]=S:n.splice(u,1)}return n.length>0?this:void 0}optimizeNames(n,u){const{nodes:S}=this;let M=S.length;for(;M--;){const D=S[M];D.optimizeNames(n,u)||(ve(n,D.names),S.splice(M,1))}return S.length>0?this:void 0}get names(){return this.nodes.reduce((n,u)=>ne(n,u.names),{})}}class $ extends b{render(n){return"{"+n._n+super.render(n)+"}"+n._n}}class w extends b{}class p extends ${}p.kind="else";class f extends ${constructor(n,u){super(u),this.condition=n}render(n){let u=`if(${this.condition})`+super.render(n);return this.else&&(u+="else "+this.else.render(n)),u}optimizeNodes(){super.optimizeNodes();const n=this.condition;if(n===!0)return this.nodes;let u=this.else;if(u){const S=u.optimizeNodes();u=this.else=Array.isArray(S)?new p(S):S}if(u)return n===!1?u instanceof f?u:u.nodes:this.nodes.length?this:new f(Se(n),u instanceof f?[u]:u.nodes);if(!(n===!1||!this.nodes.length))return this}optimizeNames(n,u){var S;if(this.else=(S=this.else)===null||S===void 0?void 0:S.optimizeNames(n,u),!!(super.optimizeNames(n,u)||this.else))return this.condition=Q(this.condition,n,u),this}get names(){const n=super.names;return B(n,this.condition),this.else&&ne(n,this.else.names),n}}f.kind="if";class E extends ${}E.kind="for";class j extends E{constructor(n){super(),this.iteration=n}render(n){return`for(${this.iteration})`+super.render(n)}optimizeNames(n,u){if(super.optimizeNames(n,u))return this.iteration=Q(this.iteration,n,u),this}get names(){return ne(super.names,this.iteration.names)}}class R extends E{constructor(n,u,S,M){super(),this.varKind=n,this.name=u,this.from=S,this.to=M}render(n){const u=n.es5?r.varKinds.var:this.varKind,{name:S,from:M,to:D}=this;return`for(${u} ${S}=${M}; ${S}<${D}; ${S}++)`+super.render(n)}get names(){const n=B(super.names,this.from);return B(n,this.to)}}class I extends E{constructor(n,u,S,M){super(),this.loop=n,this.varKind=u,this.name=S,this.iterable=M}render(n){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(n)}optimizeNames(n,u){if(super.optimizeNames(n,u))return this.iterable=Q(this.iterable,n,u),this}get names(){return ne(super.names,this.iterable.names)}}class z extends ${constructor(n,u,S){super(),this.name=n,this.args=u,this.async=S}render(n){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(n)}}z.kind="func";class G extends b{render(n){return"return "+super.render(n)}}G.kind="return";class re extends ${render(n){let u="try"+super.render(n);return this.catch&&(u+=this.catch.render(n)),this.finally&&(u+=this.finally.render(n)),u}optimizeNodes(){var n,u;return super.optimizeNodes(),(n=this.catch)===null||n===void 0||n.optimizeNodes(),(u=this.finally)===null||u===void 0||u.optimizeNodes(),this}optimizeNames(n,u){var S,M;return super.optimizeNames(n,u),(S=this.catch)===null||S===void 0||S.optimizeNames(n,u),(M=this.finally)===null||M===void 0||M.optimizeNames(n,u),this}get names(){const n=super.names;return this.catch&&ne(n,this.catch.names),this.finally&&ne(n,this.finally.names),n}}class ce extends ${constructor(n){super(),this.error=n}render(n){return`catch(${this.error})`+super.render(n)}}ce.kind="catch";class de extends ${render(n){return"finally"+super.render(n)}}de.kind="finally";class fe{constructor(n,u={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...u,_n:u.lines?`
`:""},this._extScope=n,this._scope=new r.Scope({parent:n}),this._nodes=[new w]}toString(){return this._root.render(this.opts)}name(n){return this._scope.name(n)}scopeName(n){return this._extScope.name(n)}scopeValue(n,u){const S=this._extScope.value(n,u);return(this._values[S.prefix]||(this._values[S.prefix]=new Set)).add(S),S}getScopeValue(n,u){return this._extScope.getValue(n,u)}scopeRefs(n){return this._extScope.scopeRefs(n,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(n,u,S,M){const D=this._scope.toName(u);return S!==void 0&&M&&(this._constants[D.str]=S),this._leafNode(new l(n,D,S)),D}const(n,u,S){return this._def(r.varKinds.const,n,u,S)}let(n,u,S){return this._def(r.varKinds.let,n,u,S)}var(n,u,S){return this._def(r.varKinds.var,n,u,S)}assign(n,u,S){return this._leafNode(new a(n,u,S))}add(n,u){return this._leafNode(new c(n,e.operators.ADD,u))}code(n){return typeof n=="function"?n():n!==t.nil&&this._leafNode(new P(n)),this}object(...n){const u=["{"];for(const[S,M]of n)u.length>1&&u.push(","),u.push(S),(S!==M||this.opts.es5)&&(u.push(":"),(0,t.addCodeArg)(u,M));return u.push("}"),new t._Code(u)}if(n,u,S){if(this._blockNode(new f(n)),u&&S)this.code(u).else().code(S).endIf();else if(u)this.code(u).endIf();else if(S)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(n){return this._elseNode(new f(n))}else(){return this._elseNode(new p)}endIf(){return this._endBlockNode(f,p)}_for(n,u){return this._blockNode(n),u&&this.code(u).endFor(),this}for(n,u){return this._for(new j(n),u)}forRange(n,u,S,M,D=this.opts.es5?r.varKinds.var:r.varKinds.let){const L=this._scope.toName(n);return this._for(new R(D,L,u,S),()=>M(L))}forOf(n,u,S,M=r.varKinds.const){const D=this._scope.toName(n);if(this.opts.es5){const L=u instanceof t.Name?u:this.var("_arr",u);return this.forRange("_i",0,(0,t._)`${L}.length`,U=>{this.var(D,(0,t._)`${L}[${U}]`),S(D)})}return this._for(new I("of",M,D,u),()=>S(D))}forIn(n,u,S,M=this.opts.es5?r.varKinds.var:r.varKinds.const){if(this.opts.ownProperties)return this.forOf(n,(0,t._)`Object.keys(${u})`,S);const D=this._scope.toName(n);return this._for(new I("in",M,D,u),()=>S(D))}endFor(){return this._endBlockNode(E)}label(n){return this._leafNode(new d(n))}break(n){return this._leafNode(new m(n))}return(n){const u=new G;if(this._blockNode(u),this.code(n),u.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(G)}try(n,u,S){if(!u&&!S)throw new Error('CodeGen: "try" without "catch" and "finally"');const M=new re;if(this._blockNode(M),this.code(n),u){const D=this.name("e");this._currNode=M.catch=new ce(D),u(D)}return S&&(this._currNode=M.finally=new de,this.code(S)),this._endBlockNode(ce,de)}throw(n){return this._leafNode(new v(n))}block(n,u){return this._blockStarts.push(this._nodes.length),n&&this.code(n).endBlock(u),this}endBlock(n){const u=this._blockStarts.pop();if(u===void 0)throw new Error("CodeGen: not in self-balancing block");const S=this._nodes.length-u;if(S<0||n!==void 0&&S!==n)throw new Error(`CodeGen: wrong number of nodes: ${S} vs ${n} expected`);return this._nodes.length=u,this}func(n,u=t.nil,S,M){return this._blockNode(new z(n,u,S)),M&&this.code(M).endFunc(),this}endFunc(){return this._endBlockNode(z)}optimize(n=1){for(;n-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(n){return this._currNode.nodes.push(n),this}_blockNode(n){this._currNode.nodes.push(n),this._nodes.push(n)}_endBlockNode(n,u){const S=this._currNode;if(S instanceof n||u&&S instanceof u)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${u?`${n.kind}/${u.kind}`:n.kind}"`)}_elseNode(n){const u=this._currNode;if(!(u instanceof f))throw new Error('CodeGen: "else" without "if"');return this._currNode=u.else=n,this}get _root(){return this._nodes[0]}get _currNode(){const n=this._nodes;return n[n.length-1]}set _currNode(n){const u=this._nodes;u[u.length-1]=n}}e.CodeGen=fe;function ne(g,n){for(const u in n)g[u]=(g[u]||0)+(n[u]||0);return g}function B(g,n){return n instanceof t._CodeOrName?ne(g,n.names):g}function Q(g,n,u){if(g instanceof t.Name)return S(g);if(!M(g))return g;return new t._Code(g._items.reduce((D,L)=>(L instanceof t.Name&&(L=S(L)),L instanceof t._Code?D.push(...L._items):D.push(L),D),[]));function S(D){const L=u[D.str];return L===void 0||n[D.str]!==1?D:(delete n[D.str],L)}function M(D){return D instanceof t._Code&&D._items.some(L=>L instanceof t.Name&&n[L.str]===1&&u[L.str]!==void 0)}}function ve(g,n){for(const u in n)g[u]=(g[u]||0)-(n[u]||0)}function Se(g){return typeof g=="boolean"||typeof g=="number"||g===null?!g:(0,t._)`!${k(g)}`}e.not=Se;const Ce=y(e.operators.AND);function Le(...g){return g.reduce(Ce)}e.and=Le;const Ie=y(e.operators.OR);function T(...g){return g.reduce(Ie)}e.or=T;function y(g){return(n,u)=>n===t.nil?u:u===t.nil?n:(0,t._)`${k(n)} ${g} ${k(u)}`}function k(g){return g instanceof t.Name?g:(0,t._)`(${g})`}})(K);var C={};Object.defineProperty(C,"__esModule",{value:!0});C.checkStrictMode=C.getErrorPath=C.Type=C.useFunc=C.setEvaluated=C.evaluatedPropsToName=C.mergeEvaluated=C.eachItem=C.unescapeJsonPointer=C.escapeJsonPointer=C.escapeFragment=C.unescapeFragment=C.schemaRefOrVal=C.schemaHasRulesButRef=C.schemaHasRules=C.checkUnknownRules=C.alwaysValidSchema=C.toHash=void 0;const J=K,En=Ze;function Pn(e){const t={};for(const r of e)t[r]=!0;return t}C.toHash=Pn;function Sn(e,t){return typeof t=="boolean"?t:Object.keys(t).length===0?!0:(Br(e,t),!Wr(t,e.self.RULES.all))}C.alwaysValidSchema=Sn;function Br(e,t=e.schema){const{opts:r,self:s}=e;if(!r.strictSchema||typeof t=="boolean")return;const i=s.RULES.keywords;for(const o in t)i[o]||Yr(e,`unknown keyword: "${o}"`)}C.checkUnknownRules=Br;function Wr(e,t){if(typeof e=="boolean")return!e;for(const r in e)if(t[r])return!0;return!1}C.schemaHasRules=Wr;function Nn(e,t){if(typeof e=="boolean")return!e;for(const r in e)if(r!=="$ref"&&t.all[r])return!0;return!1}C.schemaHasRulesButRef=Nn;function kn({topSchemaRef:e,schemaPath:t},r,s,i){if(!i){if(typeof r=="number"||typeof r=="boolean")return r;if(typeof r=="string")return(0,J._)`${r}`}return(0,J._)`${e}${t}${(0,J.getProperty)(s)}`}C.schemaRefOrVal=kn;function jn(e){return Qr(decodeURIComponent(e))}C.unescapeFragment=jn;function On(e){return encodeURIComponent(Mt(e))}C.escapeFragment=On;function Mt(e){return typeof e=="number"?`${e}`:e.replace(/~/g,"~0").replace(/\//g,"~1")}C.escapeJsonPointer=Mt;function Qr(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}C.unescapeJsonPointer=Qr;function Tn(e,t){if(Array.isArray(e))for(const r of e)t(r);else t(e)}C.eachItem=Tn;function Er({mergeNames:e,mergeToName:t,mergeValues:r,resultToName:s}){return(i,o,l,a)=>{const c=l===void 0?o:l instanceof J.Name?(o instanceof J.Name?e(i,o,l):t(i,o,l),l):o instanceof J.Name?(t(i,l,o),o):r(o,l);return a===J.Name&&!(c instanceof J.Name)?s(i,c):c}}C.mergeEvaluated={props:Er({mergeNames:(e,t,r)=>e.if((0,J._)`${r} !== true && ${t} !== undefined`,()=>{e.if((0,J._)`${t} === true`,()=>e.assign(r,!0),()=>e.assign(r,(0,J._)`${r} || {}`).code((0,J._)`Object.assign(${r}, ${t})`))}),mergeToName:(e,t,r)=>e.if((0,J._)`${r} !== true`,()=>{t===!0?e.assign(r,!0):(e.assign(r,(0,J._)`${r} || {}`),At(e,r,t))}),mergeValues:(e,t)=>e===!0?!0:{...e,...t},resultToName:Xr}),items:Er({mergeNames:(e,t,r)=>e.if((0,J._)`${r} !== true && ${t} !== undefined`,()=>e.assign(r,(0,J._)`${t} === true ? true : ${r} > ${t} ? ${r} : ${t}`)),mergeToName:(e,t,r)=>e.if((0,J._)`${r} !== true`,()=>e.assign(r,t===!0?!0:(0,J._)`${r} > ${t} ? ${r} : ${t}`)),mergeValues:(e,t)=>e===!0?!0:Math.max(e,t),resultToName:(e,t)=>e.var("items",t)})};function Xr(e,t){if(t===!0)return e.var("props",!0);const r=e.var("props",(0,J._)`{}`);return t!==void 0&&At(e,r,t),r}C.evaluatedPropsToName=Xr;function At(e,t,r){Object.keys(r).forEach(s=>e.assign((0,J._)`${t}${(0,J.getProperty)(s)}`,!0))}C.setEvaluated=At;const Pr={};function Rn(e,t){return e.scopeValue("func",{ref:t,code:Pr[t.code]||(Pr[t.code]=new En._Code(t.code))})}C.useFunc=Rn;var jt;(function(e){e[e.Num=0]="Num",e[e.Str=1]="Str"})(jt||(C.Type=jt={}));function Cn(e,t,r){if(e instanceof J.Name){const s=t===jt.Num;return r?s?(0,J._)`"[" + ${e} + "]"`:(0,J._)`"['" + ${e} + "']"`:s?(0,J._)`"/" + ${e}`:(0,J._)`"/" + ${e}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return r?(0,J.getProperty)(e).toString():"/"+Mt(e)}C.getErrorPath=Cn;function Yr(e,t,r=e.opts.strictSchema){if(r){if(t=`strict mode: ${t}`,r===!0)throw new Error(t);e.self.logger.warn(t)}}C.checkStrictMode=Yr;var _e={};Object.defineProperty(_e,"__esModule",{value:!0});const te=K,In={data:new te.Name("data"),valCxt:new te.Name("valCxt"),instancePath:new te.Name("instancePath"),parentData:new te.Name("parentData"),parentDataProperty:new te.Name("parentDataProperty"),rootData:new te.Name("rootData"),dynamicAnchors:new te.Name("dynamicAnchors"),vErrors:new te.Name("vErrors"),errors:new te.Name("errors"),this:new te.Name("this"),self:new te.Name("self"),scope:new te.Name("scope"),json:new te.Name("json"),jsonPos:new te.Name("jsonPos"),jsonLen:new te.Name("jsonLen"),jsonPart:new te.Name("jsonPart")};_e.default=In;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;const t=K,r=C,s=_e;e.keywordError={message:({keyword:p})=>(0,t.str)`must pass "${p}" keyword validation`},e.keyword$DataError={message:({keyword:p,schemaType:f})=>f?(0,t.str)`"${p}" keyword must be ${f} ($data)`:(0,t.str)`"${p}" keyword is invalid ($data)`};function i(p,f=e.keywordError,E,j){const{it:R}=p,{gen:I,compositeRule:z,allErrors:G}=R,re=v(p,f,E);j??(z||G)?c(I,re):d(R,(0,t._)`[${re}]`)}e.reportError=i;function o(p,f=e.keywordError,E){const{it:j}=p,{gen:R,compositeRule:I,allErrors:z}=j,G=v(p,f,E);c(R,G),I||z||d(j,s.default.vErrors)}e.reportExtraError=o;function l(p,f){p.assign(s.default.errors,f),p.if((0,t._)`${s.default.vErrors} !== null`,()=>p.if(f,()=>p.assign((0,t._)`${s.default.vErrors}.length`,f),()=>p.assign(s.default.vErrors,null)))}e.resetErrorsCount=l;function a({gen:p,keyword:f,schemaValue:E,data:j,errsCount:R,it:I}){if(R===void 0)throw new Error("ajv implementation error");const z=p.name("err");p.forRange("i",R,s.default.errors,G=>{p.const(z,(0,t._)`${s.default.vErrors}[${G}]`),p.if((0,t._)`${z}.instancePath === undefined`,()=>p.assign((0,t._)`${z}.instancePath`,(0,t.strConcat)(s.default.instancePath,I.errorPath))),p.assign((0,t._)`${z}.schemaPath`,(0,t.str)`${I.errSchemaPath}/${f}`),I.opts.verbose&&(p.assign((0,t._)`${z}.schema`,E),p.assign((0,t._)`${z}.data`,j))})}e.extendErrors=a;function c(p,f){const E=p.const("err",f);p.if((0,t._)`${s.default.vErrors} === null`,()=>p.assign(s.default.vErrors,(0,t._)`[${E}]`),(0,t._)`${s.default.vErrors}.push(${E})`),p.code((0,t._)`${s.default.errors}++`)}function d(p,f){const{gen:E,validateName:j,schemaEnv:R}=p;R.$async?E.throw((0,t._)`new ${p.ValidationError}(${f})`):(E.assign((0,t._)`${j}.errors`,f),E.return(!1))}const m={keyword:new t.Name("keyword"),schemaPath:new t.Name("schemaPath"),params:new t.Name("params"),propertyName:new t.Name("propertyName"),message:new t.Name("message"),schema:new t.Name("schema"),parentSchema:new t.Name("parentSchema")};function v(p,f,E){const{createErrors:j}=p.it;return j===!1?(0,t._)`{}`:P(p,f,E)}function P(p,f,E={}){const{gen:j,it:R}=p,I=[b(R,E),$(p,E)];return w(p,f,I),j.object(...I)}function b({errorPath:p},{instancePath:f}){const E=f?(0,t.str)`${p}${(0,r.getErrorPath)(f,r.Type.Str)}`:p;return[s.default.instancePath,(0,t.strConcat)(s.default.instancePath,E)]}function $({keyword:p,it:{errSchemaPath:f}},{schemaPath:E,parentSchema:j}){let R=j?f:(0,t.str)`${f}/${p}`;return E&&(R=(0,t.str)`${R}${(0,r.getErrorPath)(E,r.Type.Str)}`),[m.schemaPath,R]}function w(p,{params:f,message:E},j){const{keyword:R,data:I,schemaValue:z,it:G}=p,{opts:re,propertyName:ce,topSchemaRef:de,schemaPath:fe}=G;j.push([m.keyword,R],[m.params,typeof f=="function"?f(p):f||(0,t._)`{}`]),re.messages&&j.push([m.message,typeof E=="function"?E(p):E]),re.verbose&&j.push([m.schema,z],[m.parentSchema,(0,t._)`${de}${fe}`],[s.default.data,I]),ce&&j.push([m.propertyName,ce])}})(xe);var Sr;function Mn(){if(Sr)return Ne;Sr=1,Object.defineProperty(Ne,"__esModule",{value:!0}),Ne.boolOrEmptySchema=Ne.topBoolOrEmptySchema=void 0;const e=xe,t=K,r=_e,s={message:"boolean schema is false"};function i(a){const{gen:c,schema:d,validateName:m}=a;d===!1?l(a,!1):typeof d=="object"&&d.$async===!0?c.return(r.default.data):(c.assign((0,t._)`${m}.errors`,null),c.return(!0))}Ne.topBoolOrEmptySchema=i;function o(a,c){const{gen:d,schema:m}=a;m===!1?(d.var(c,!1),l(a)):d.var(c,!0)}Ne.boolOrEmptySchema=o;function l(a,c){const{gen:d,data:m}=a,v={gen:d,keyword:"false schema",data:m,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:a};(0,e.reportError)(v,s,void 0,c)}return Ne}var X={},Te={};Object.defineProperty(Te,"__esModule",{value:!0});Te.getRules=Te.isJSONType=void 0;const An=["string","number","integer","boolean","null","object","array"],Dn=new Set(An);function Vn(e){return typeof e=="string"&&Dn.has(e)}Te.isJSONType=Vn;function qn(){const e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...e,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}}Te.getRules=qn;var be={};Object.defineProperty(be,"__esModule",{value:!0});be.shouldUseRule=be.shouldUseGroup=be.schemaHasRulesForType=void 0;function Fn({schema:e,self:t},r){const s=t.RULES.types[r];return s&&s!==!0&&Zr(e,s)}be.schemaHasRulesForType=Fn;function Zr(e,t){return t.rules.some(r=>xr(e,r))}be.shouldUseGroup=Zr;function xr(e,t){var r;return e[t.keyword]!==void 0||((r=t.definition.implements)===null||r===void 0?void 0:r.some(s=>e[s]!==void 0))}be.shouldUseRule=xr;Object.defineProperty(X,"__esModule",{value:!0});X.reportTypeError=X.checkDataTypes=X.checkDataType=X.coerceAndCheckDataType=X.getJSONTypes=X.getSchemaTypes=X.DataType=void 0;const Kn=Te,Un=be,zn=xe,V=K,en=C;var Ve;(function(e){e[e.Correct=0]="Correct",e[e.Wrong=1]="Wrong"})(Ve||(X.DataType=Ve={}));function Ln(e){const t=tn(e.type);if(t.includes("null")){if(e.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!t.length&&e.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');e.nullable===!0&&t.push("null")}return t}X.getSchemaTypes=Ln;function tn(e){const t=Array.isArray(e)?e:e?[e]:[];if(t.every(Kn.isJSONType))return t;throw new Error("type must be JSONType or JSONType[]: "+t.join(","))}X.getJSONTypes=tn;function Gn(e,t){const{gen:r,data:s,opts:i}=e,o=Jn(t,i.coerceTypes),l=t.length>0&&!(o.length===0&&t.length===1&&(0,Un.schemaHasRulesForType)(e,t[0]));if(l){const a=Dt(t,s,i.strictNumbers,Ve.Wrong);r.if(a,()=>{o.length?Hn(e,t,o):Vt(e)})}return l}X.coerceAndCheckDataType=Gn;const rn=new Set(["string","number","integer","boolean","null"]);function Jn(e,t){return t?e.filter(r=>rn.has(r)||t==="array"&&r==="array"):[]}function Hn(e,t,r){const{gen:s,data:i,opts:o}=e,l=s.let("dataType",(0,V._)`typeof ${i}`),a=s.let("coerced",(0,V._)`undefined`);o.coerceTypes==="array"&&s.if((0,V._)`${l} == 'object' && Array.isArray(${i}) && ${i}.length == 1`,()=>s.assign(i,(0,V._)`${i}[0]`).assign(l,(0,V._)`typeof ${i}`).if(Dt(t,i,o.strictNumbers),()=>s.assign(a,i))),s.if((0,V._)`${a} !== undefined`);for(const d of r)(rn.has(d)||d==="array"&&o.coerceTypes==="array")&&c(d);s.else(),Vt(e),s.endIf(),s.if((0,V._)`${a} !== undefined`,()=>{s.assign(i,a),Bn(e,a)});function c(d){switch(d){case"string":s.elseIf((0,V._)`${l} == "number" || ${l} == "boolean"`).assign(a,(0,V._)`"" + ${i}`).elseIf((0,V._)`${i} === null`).assign(a,(0,V._)`""`);return;case"number":s.elseIf((0,V._)`${l} == "boolean" || ${i} === null
              || (${l} == "string" && ${i} && ${i} == +${i})`).assign(a,(0,V._)`+${i}`);return;case"integer":s.elseIf((0,V._)`${l} === "boolean" || ${i} === null
              || (${l} === "string" && ${i} && ${i} == +${i} && !(${i} % 1))`).assign(a,(0,V._)`+${i}`);return;case"boolean":s.elseIf((0,V._)`${i} === "false" || ${i} === 0 || ${i} === null`).assign(a,!1).elseIf((0,V._)`${i} === "true" || ${i} === 1`).assign(a,!0);return;case"null":s.elseIf((0,V._)`${i} === "" || ${i} === 0 || ${i} === false`),s.assign(a,null);return;case"array":s.elseIf((0,V._)`${l} === "string" || ${l} === "number"
              || ${l} === "boolean" || ${i} === null`).assign(a,(0,V._)`[${i}]`)}}}function Bn({gen:e,parentData:t,parentDataProperty:r},s){e.if((0,V._)`${t} !== undefined`,()=>e.assign((0,V._)`${t}[${r}]`,s))}function Ot(e,t,r,s=Ve.Correct){const i=s===Ve.Correct?V.operators.EQ:V.operators.NEQ;let o;switch(e){case"null":return(0,V._)`${t} ${i} null`;case"array":o=(0,V._)`Array.isArray(${t})`;break;case"object":o=(0,V._)`${t} && typeof ${t} == "object" && !Array.isArray(${t})`;break;case"integer":o=l((0,V._)`!(${t} % 1) && !isNaN(${t})`);break;case"number":o=l();break;default:return(0,V._)`typeof ${t} ${i} ${e}`}return s===Ve.Correct?o:(0,V.not)(o);function l(a=V.nil){return(0,V.and)((0,V._)`typeof ${t} == "number"`,a,r?(0,V._)`isFinite(${t})`:V.nil)}}X.checkDataType=Ot;function Dt(e,t,r,s){if(e.length===1)return Ot(e[0],t,r,s);let i;const o=(0,en.toHash)(e);if(o.array&&o.object){const l=(0,V._)`typeof ${t} != "object"`;i=o.null?l:(0,V._)`!${t} || ${l}`,delete o.null,delete o.array,delete o.object}else i=V.nil;o.number&&delete o.integer;for(const l in o)i=(0,V.and)(i,Ot(l,t,r,s));return i}X.checkDataTypes=Dt;const Wn={message:({schema:e})=>`must be ${e}`,params:({schema:e,schemaValue:t})=>typeof e=="string"?(0,V._)`{type: ${e}}`:(0,V._)`{type: ${t}}`};function Vt(e){const t=Qn(e);(0,zn.reportError)(t,Wn)}X.reportTypeError=Vt;function Qn(e){const{gen:t,data:r,schema:s}=e,i=(0,en.schemaRefOrVal)(e,s,"type");return{gen:t,keyword:"type",data:r,schema:s.type,schemaCode:i,schemaValue:i,parentSchema:s,params:{},it:e}}var Je={},Nr;function Xn(){if(Nr)return Je;Nr=1,Object.defineProperty(Je,"__esModule",{value:!0}),Je.assignDefaults=void 0;const e=K,t=C;function r(i,o){const{properties:l,items:a}=i.schema;if(o==="object"&&l)for(const c in l)s(i,c,l[c].default);else o==="array"&&Array.isArray(a)&&a.forEach((c,d)=>s(i,d,c.default))}Je.assignDefaults=r;function s(i,o,l){const{gen:a,compositeRule:c,data:d,opts:m}=i;if(l===void 0)return;const v=(0,e._)`${d}${(0,e.getProperty)(o)}`;if(c){(0,t.checkStrictMode)(i,`default is ignored for: ${v}`);return}let P=(0,e._)`${v} === undefined`;m.useDefaults==="empty"&&(P=(0,e._)`${P} || ${v} === null || ${v} === ""`),a.if(P,(0,e._)`${v} = ${(0,e.stringify)(l)}`)}return Je}var me={},F={};Object.defineProperty(F,"__esModule",{value:!0});F.validateUnion=F.validateArray=F.usePattern=F.callValidateCode=F.schemaProperties=F.allSchemaProperties=F.noPropertyInData=F.propertyInData=F.isOwnProperty=F.hasPropFunc=F.reportMissingProp=F.checkMissingProp=F.checkReportMissingProp=void 0;const H=K,qt=C,Ee=_e,Yn=C;function Zn(e,t){const{gen:r,data:s,it:i}=e;r.if(Kt(r,s,t,i.opts.ownProperties),()=>{e.setParams({missingProperty:(0,H._)`${t}`},!0),e.error()})}F.checkReportMissingProp=Zn;function xn({gen:e,data:t,it:{opts:r}},s,i){return(0,H.or)(...s.map(o=>(0,H.and)(Kt(e,t,o,r.ownProperties),(0,H._)`${i} = ${o}`)))}F.checkMissingProp=xn;function es(e,t){e.setParams({missingProperty:t},!0),e.error()}F.reportMissingProp=es;function nn(e){return e.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,H._)`Object.prototype.hasOwnProperty`})}F.hasPropFunc=nn;function Ft(e,t,r){return(0,H._)`${nn(e)}.call(${t}, ${r})`}F.isOwnProperty=Ft;function ts(e,t,r,s){const i=(0,H._)`${t}${(0,H.getProperty)(r)} !== undefined`;return s?(0,H._)`${i} && ${Ft(e,t,r)}`:i}F.propertyInData=ts;function Kt(e,t,r,s){const i=(0,H._)`${t}${(0,H.getProperty)(r)} === undefined`;return s?(0,H.or)(i,(0,H.not)(Ft(e,t,r))):i}F.noPropertyInData=Kt;function sn(e){return e?Object.keys(e).filter(t=>t!=="__proto__"):[]}F.allSchemaProperties=sn;function rs(e,t){return sn(t).filter(r=>!(0,qt.alwaysValidSchema)(e,t[r]))}F.schemaProperties=rs;function ns({schemaCode:e,data:t,it:{gen:r,topSchemaRef:s,schemaPath:i,errorPath:o},it:l},a,c,d){const m=d?(0,H._)`${e}, ${t}, ${s}${i}`:t,v=[[Ee.default.instancePath,(0,H.strConcat)(Ee.default.instancePath,o)],[Ee.default.parentData,l.parentData],[Ee.default.parentDataProperty,l.parentDataProperty],[Ee.default.rootData,Ee.default.rootData]];l.opts.dynamicRef&&v.push([Ee.default.dynamicAnchors,Ee.default.dynamicAnchors]);const P=(0,H._)`${m}, ${r.object(...v)}`;return c!==H.nil?(0,H._)`${a}.call(${c}, ${P})`:(0,H._)`${a}(${P})`}F.callValidateCode=ns;const ss=(0,H._)`new RegExp`;function as({gen:e,it:{opts:t}},r){const s=t.unicodeRegExp?"u":"",{regExp:i}=t.code,o=i(r,s);return e.scopeValue("pattern",{key:o.toString(),ref:o,code:(0,H._)`${i.code==="new RegExp"?ss:(0,Yn.useFunc)(e,i)}(${r}, ${s})`})}F.usePattern=as;function os(e){const{gen:t,data:r,keyword:s,it:i}=e,o=t.name("valid");if(i.allErrors){const a=t.let("valid",!0);return l(()=>t.assign(a,!1)),a}return t.var(o,!0),l(()=>t.break()),o;function l(a){const c=t.const("len",(0,H._)`${r}.length`);t.forRange("i",0,c,d=>{e.subschema({keyword:s,dataProp:d,dataPropType:qt.Type.Num},o),t.if((0,H.not)(o),a)})}}F.validateArray=os;function is(e){const{gen:t,schema:r,keyword:s,it:i}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");if(r.some(c=>(0,qt.alwaysValidSchema)(i,c))&&!i.opts.unevaluated)return;const l=t.let("valid",!1),a=t.name("_valid");t.block(()=>r.forEach((c,d)=>{const m=e.subschema({keyword:s,schemaProp:d,compositeRule:!0},a);t.assign(l,(0,H._)`${l} || ${a}`),e.mergeValidEvaluated(m,a)||t.if((0,H.not)(l))})),e.result(l,()=>e.reset(),()=>e.error(!0))}F.validateUnion=is;var kr;function cs(){if(kr)return me;kr=1,Object.defineProperty(me,"__esModule",{value:!0}),me.validateKeywordUsage=me.validSchemaType=me.funcKeywordCode=me.macroKeywordCode=void 0;const e=K,t=_e,r=F,s=xe;function i(P,b){const{gen:$,keyword:w,schema:p,parentSchema:f,it:E}=P,j=b.macro.call(E.self,p,f,E),R=d($,w,j);E.opts.validateSchema!==!1&&E.self.validateSchema(j,!0);const I=$.name("valid");P.subschema({schema:j,schemaPath:e.nil,errSchemaPath:`${E.errSchemaPath}/${w}`,topSchemaRef:R,compositeRule:!0},I),P.pass(I,()=>P.error(!0))}me.macroKeywordCode=i;function o(P,b){var $;const{gen:w,keyword:p,schema:f,parentSchema:E,$data:j,it:R}=P;c(R,b);const I=!j&&b.compile?b.compile.call(R.self,f,E,R):b.validate,z=d(w,p,I),G=w.let("valid");P.block$data(G,re),P.ok(($=b.valid)!==null&&$!==void 0?$:G);function re(){if(b.errors===!1)fe(),b.modifying&&l(P),ne(()=>P.error());else{const B=b.async?ce():de();b.modifying&&l(P),ne(()=>a(P,B))}}function ce(){const B=w.let("ruleErrs",null);return w.try(()=>fe((0,e._)`await `),Q=>w.assign(G,!1).if((0,e._)`${Q} instanceof ${R.ValidationError}`,()=>w.assign(B,(0,e._)`${Q}.errors`),()=>w.throw(Q))),B}function de(){const B=(0,e._)`${z}.errors`;return w.assign(B,null),fe(e.nil),B}function fe(B=b.async?(0,e._)`await `:e.nil){const Q=R.opts.passContext?t.default.this:t.default.self,ve=!("compile"in b&&!j||b.schema===!1);w.assign(G,(0,e._)`${B}${(0,r.callValidateCode)(P,z,Q,ve)}`,b.modifying)}function ne(B){var Q;w.if((0,e.not)((Q=b.valid)!==null&&Q!==void 0?Q:G),B)}}me.funcKeywordCode=o;function l(P){const{gen:b,data:$,it:w}=P;b.if(w.parentData,()=>b.assign($,(0,e._)`${w.parentData}[${w.parentDataProperty}]`))}function a(P,b){const{gen:$}=P;$.if((0,e._)`Array.isArray(${b})`,()=>{$.assign(t.default.vErrors,(0,e._)`${t.default.vErrors} === null ? ${b} : ${t.default.vErrors}.concat(${b})`).assign(t.default.errors,(0,e._)`${t.default.vErrors}.length`),(0,s.extendErrors)(P)},()=>P.error())}function c({schemaEnv:P},b){if(b.async&&!P.$async)throw new Error("async keyword in sync schema")}function d(P,b,$){if($===void 0)throw new Error(`keyword "${b}" failed to compile`);return P.scopeValue("keyword",typeof $=="function"?{ref:$}:{ref:$,code:(0,e.stringify)($)})}function m(P,b,$=!1){return!b.length||b.some(w=>w==="array"?Array.isArray(P):w==="object"?P&&typeof P=="object"&&!Array.isArray(P):typeof P==w||$&&typeof P>"u")}me.validSchemaType=m;function v({schema:P,opts:b,self:$,errSchemaPath:w},p,f){if(Array.isArray(p.keyword)?!p.keyword.includes(f):p.keyword!==f)throw new Error("ajv implementation error");const E=p.dependencies;if(E!=null&&E.some(j=>!Object.prototype.hasOwnProperty.call(P,j)))throw new Error(`parent schema must have dependencies of ${f}: ${E.join(",")}`);if(p.validateSchema&&!p.validateSchema(P[f])){const R=`keyword "${f}" value is invalid at path "${w}": `+$.errorsText(p.validateSchema.errors);if(b.validateSchema==="log")$.logger.error(R);else throw new Error(R)}}return me.validateKeywordUsage=v,me}var we={},jr;function ls(){if(jr)return we;jr=1,Object.defineProperty(we,"__esModule",{value:!0}),we.extendSubschemaMode=we.extendSubschemaData=we.getSubschema=void 0;const e=K,t=C;function r(o,{keyword:l,schemaProp:a,schema:c,schemaPath:d,errSchemaPath:m,topSchemaRef:v}){if(l!==void 0&&c!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(l!==void 0){const P=o.schema[l];return a===void 0?{schema:P,schemaPath:(0,e._)`${o.schemaPath}${(0,e.getProperty)(l)}`,errSchemaPath:`${o.errSchemaPath}/${l}`}:{schema:P[a],schemaPath:(0,e._)`${o.schemaPath}${(0,e.getProperty)(l)}${(0,e.getProperty)(a)}`,errSchemaPath:`${o.errSchemaPath}/${l}/${(0,t.escapeFragment)(a)}`}}if(c!==void 0){if(d===void 0||m===void 0||v===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:c,schemaPath:d,topSchemaRef:v,errSchemaPath:m}}throw new Error('either "keyword" or "schema" must be passed')}we.getSubschema=r;function s(o,l,{dataProp:a,dataPropType:c,data:d,dataTypes:m,propertyName:v}){if(d!==void 0&&a!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:P}=l;if(a!==void 0){const{errorPath:$,dataPathArr:w,opts:p}=l,f=P.let("data",(0,e._)`${l.data}${(0,e.getProperty)(a)}`,!0);b(f),o.errorPath=(0,e.str)`${$}${(0,t.getErrorPath)(a,c,p.jsPropertySyntax)}`,o.parentDataProperty=(0,e._)`${a}`,o.dataPathArr=[...w,o.parentDataProperty]}if(d!==void 0){const $=d instanceof e.Name?d:P.let("data",d,!0);b($),v!==void 0&&(o.propertyName=v)}m&&(o.dataTypes=m);function b($){o.data=$,o.dataLevel=l.dataLevel+1,o.dataTypes=[],l.definedProperties=new Set,o.parentData=l.data,o.dataNames=[...l.dataNames,$]}}we.extendSubschemaData=s;function i(o,{jtdDiscriminator:l,jtdMetadata:a,compositeRule:c,createErrors:d,allErrors:m}){c!==void 0&&(o.compositeRule=c),d!==void 0&&(o.createErrors=d),m!==void 0&&(o.allErrors=m),o.jtdDiscriminator=l,o.jtdMetadata=a}return we.extendSubschemaMode=i,we}var ee={};Object.defineProperty(ee,"__esModule",{value:!0});ee.getSchemaRefs=ee.resolveUrl=ee.normalizeId=ee._getFullPath=ee.getFullPath=ee.inlineRef=void 0;const us=C,ds=Jr,fs=gn,hs=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function ms(e,t=!0){return typeof e=="boolean"?!0:t===!0?!Tt(e):t?an(e)<=t:!1}ee.inlineRef=ms;const ps=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function Tt(e){for(const t in e){if(ps.has(t))return!0;const r=e[t];if(Array.isArray(r)&&r.some(Tt)||typeof r=="object"&&Tt(r))return!0}return!1}function an(e){let t=0;for(const r in e){if(r==="$ref")return 1/0;if(t++,!hs.has(r)&&(typeof e[r]=="object"&&(0,us.eachItem)(e[r],s=>t+=an(s)),t===1/0))return 1/0}return t}function on(e,t="",r){r!==!1&&(t=qe(t));const s=e.parse(t);return cn(e,s)}ee.getFullPath=on;function cn(e,t){return e.serialize(t).split("#")[0]+"#"}ee._getFullPath=cn;const ys=/#\/?$/;function qe(e){return e?e.replace(ys,""):""}ee.normalizeId=qe;function $s(e,t,r){return r=qe(r),e.resolve(t,r)}ee.resolveUrl=$s;const _s=/^[a-z_][-a-z0-9._]*$/i;function vs(e,t){if(typeof e=="boolean")return{};const{schemaId:r,uriResolver:s}=this.opts,i=qe(e[r]||t),o={"":i},l=on(s,i,!1),a={},c=new Set;return fs(e,{allKeys:!0},(v,P,b,$)=>{if($===void 0)return;const w=l+P;let p=o[$];typeof v[r]=="string"&&(p=f.call(this,v[r])),E.call(this,v.$anchor),E.call(this,v.$dynamicAnchor),o[P]=p;function f(j){const R=this.opts.uriResolver.resolve;if(j=qe(p?R(p,j):j),c.has(j))throw m(j);c.add(j);let I=this.refs[j];return typeof I=="string"&&(I=this.refs[I]),typeof I=="object"?d(v,I.schema,j):j!==qe(w)&&(j[0]==="#"?(d(v,a[j],j),a[j]=v):this.refs[j]=w),j}function E(j){if(typeof j=="string"){if(!_s.test(j))throw new Error(`invalid anchor "${j}"`);f.call(this,`#${j}`)}}}),a;function d(v,P,b){if(P!==void 0&&!ds(v,P))throw m(b)}function m(v){return new Error(`reference "${v}" resolves to more than one schema`)}}ee.getSchemaRefs=vs;var Or;function mt(){if(Or)return ge;Or=1,Object.defineProperty(ge,"__esModule",{value:!0}),ge.getData=ge.KeywordCxt=ge.validateFunctionCode=void 0;const e=Mn(),t=X,r=be,s=X,i=Xn(),o=cs(),l=ls(),a=K,c=_e,d=ee,m=C,v=xe;function P(h){if(I(h)&&(G(h),R(h))){p(h);return}b(h,()=>(0,e.topBoolOrEmptySchema)(h))}ge.validateFunctionCode=P;function b({gen:h,validateName:_,schema:N,schemaEnv:O,opts:A},q){A.code.es5?h.func(_,(0,a._)`${c.default.data}, ${c.default.valCxt}`,O.$async,()=>{h.code((0,a._)`"use strict"; ${E(N,A)}`),w(h,A),h.code(q)}):h.func(_,(0,a._)`${c.default.data}, ${$(A)}`,O.$async,()=>h.code(E(N,A)).code(q))}function $(h){return(0,a._)`{${c.default.instancePath}="", ${c.default.parentData}, ${c.default.parentDataProperty}, ${c.default.rootData}=${c.default.data}${h.dynamicRef?(0,a._)`, ${c.default.dynamicAnchors}={}`:a.nil}}={}`}function w(h,_){h.if(c.default.valCxt,()=>{h.var(c.default.instancePath,(0,a._)`${c.default.valCxt}.${c.default.instancePath}`),h.var(c.default.parentData,(0,a._)`${c.default.valCxt}.${c.default.parentData}`),h.var(c.default.parentDataProperty,(0,a._)`${c.default.valCxt}.${c.default.parentDataProperty}`),h.var(c.default.rootData,(0,a._)`${c.default.valCxt}.${c.default.rootData}`),_.dynamicRef&&h.var(c.default.dynamicAnchors,(0,a._)`${c.default.valCxt}.${c.default.dynamicAnchors}`)},()=>{h.var(c.default.instancePath,(0,a._)`""`),h.var(c.default.parentData,(0,a._)`undefined`),h.var(c.default.parentDataProperty,(0,a._)`undefined`),h.var(c.default.rootData,c.default.data),_.dynamicRef&&h.var(c.default.dynamicAnchors,(0,a._)`{}`)})}function p(h){const{schema:_,opts:N,gen:O}=h;b(h,()=>{N.$comment&&_.$comment&&B(h),de(h),O.let(c.default.vErrors,null),O.let(c.default.errors,0),N.unevaluated&&f(h),re(h),Q(h)})}function f(h){const{gen:_,validateName:N}=h;h.evaluated=_.const("evaluated",(0,a._)`${N}.evaluated`),_.if((0,a._)`${h.evaluated}.dynamicProps`,()=>_.assign((0,a._)`${h.evaluated}.props`,(0,a._)`undefined`)),_.if((0,a._)`${h.evaluated}.dynamicItems`,()=>_.assign((0,a._)`${h.evaluated}.items`,(0,a._)`undefined`))}function E(h,_){const N=typeof h=="object"&&h[_.schemaId];return N&&(_.code.source||_.code.process)?(0,a._)`/*# sourceURL=${N} */`:a.nil}function j(h,_){if(I(h)&&(G(h),R(h))){z(h,_);return}(0,e.boolOrEmptySchema)(h,_)}function R({schema:h,self:_}){if(typeof h=="boolean")return!h;for(const N in h)if(_.RULES.all[N])return!0;return!1}function I(h){return typeof h.schema!="boolean"}function z(h,_){const{schema:N,gen:O,opts:A}=h;A.$comment&&N.$comment&&B(h),fe(h),ne(h);const q=O.const("_errs",c.default.errors);re(h,q),O.var(_,(0,a._)`${q} === ${c.default.errors}`)}function G(h){(0,m.checkUnknownRules)(h),ce(h)}function re(h,_){if(h.opts.jtd)return Se(h,[],!1,_);const N=(0,t.getSchemaTypes)(h.schema),O=(0,t.coerceAndCheckDataType)(h,N);Se(h,N,!O,_)}function ce(h){const{schema:_,errSchemaPath:N,opts:O,self:A}=h;_.$ref&&O.ignoreKeywordsWithRef&&(0,m.schemaHasRulesButRef)(_,A.RULES)&&A.logger.warn(`$ref: keywords ignored in schema at path "${N}"`)}function de(h){const{schema:_,opts:N}=h;_.default!==void 0&&N.useDefaults&&N.strictSchema&&(0,m.checkStrictMode)(h,"default is ignored in the schema root")}function fe(h){const _=h.schema[h.opts.schemaId];_&&(h.baseId=(0,d.resolveUrl)(h.opts.uriResolver,h.baseId,_))}function ne(h){if(h.schema.$async&&!h.schemaEnv.$async)throw new Error("async schema in sync schema")}function B({gen:h,schemaEnv:_,schema:N,errSchemaPath:O,opts:A}){const q=N.$comment;if(A.$comment===!0)h.code((0,a._)`${c.default.self}.logger.log(${q})`);else if(typeof A.$comment=="function"){const Y=(0,a.str)`${O}/$comment`,he=h.scopeValue("root",{ref:_.root});h.code((0,a._)`${c.default.self}.opts.$comment(${q}, ${Y}, ${he}.schema)`)}}function Q(h){const{gen:_,schemaEnv:N,validateName:O,ValidationError:A,opts:q}=h;N.$async?_.if((0,a._)`${c.default.errors} === 0`,()=>_.return(c.default.data),()=>_.throw((0,a._)`new ${A}(${c.default.vErrors})`)):(_.assign((0,a._)`${O}.errors`,c.default.vErrors),q.unevaluated&&ve(h),_.return((0,a._)`${c.default.errors} === 0`))}function ve({gen:h,evaluated:_,props:N,items:O}){N instanceof a.Name&&h.assign((0,a._)`${_}.props`,N),O instanceof a.Name&&h.assign((0,a._)`${_}.items`,O)}function Se(h,_,N,O){const{gen:A,schema:q,data:Y,allErrors:he,opts:se,self:ae}=h,{RULES:Z}=ae;if(q.$ref&&(se.ignoreKeywordsWithRef||!(0,m.schemaHasRulesButRef)(q,Z))){A.block(()=>M(h,"$ref",Z.all.$ref.definition));return}se.jtd||Le(h,_),A.block(()=>{for(const le of Z.rules)Me(le);Me(Z.post)});function Me(le){(0,r.shouldUseGroup)(q,le)&&(le.type?(A.if((0,s.checkDataType)(le.type,Y,se.strictNumbers)),Ce(h,le),_.length===1&&_[0]===le.type&&N&&(A.else(),(0,s.reportTypeError)(h)),A.endIf()):Ce(h,le),he||A.if((0,a._)`${c.default.errors} === ${O||0}`))}}function Ce(h,_){const{gen:N,schema:O,opts:{useDefaults:A}}=h;A&&(0,i.assignDefaults)(h,_.type),N.block(()=>{for(const q of _.rules)(0,r.shouldUseRule)(O,q)&&M(h,q.keyword,q.definition,_.type)})}function Le(h,_){h.schemaEnv.meta||!h.opts.strictTypes||(Ie(h,_),h.opts.allowUnionTypes||T(h,_),y(h,h.dataTypes))}function Ie(h,_){if(_.length){if(!h.dataTypes.length){h.dataTypes=_;return}_.forEach(N=>{g(h.dataTypes,N)||u(h,`type "${N}" not allowed by context "${h.dataTypes.join(",")}"`)}),n(h,_)}}function T(h,_){_.length>1&&!(_.length===2&&_.includes("null"))&&u(h,"use allowUnionTypes to allow union type keyword")}function y(h,_){const N=h.self.RULES.all;for(const O in N){const A=N[O];if(typeof A=="object"&&(0,r.shouldUseRule)(h.schema,A)){const{type:q}=A.definition;q.length&&!q.some(Y=>k(_,Y))&&u(h,`missing type "${q.join(",")}" for keyword "${O}"`)}}}function k(h,_){return h.includes(_)||_==="number"&&h.includes("integer")}function g(h,_){return h.includes(_)||_==="integer"&&h.includes("number")}function n(h,_){const N=[];for(const O of h.dataTypes)g(_,O)?N.push(O):_.includes("integer")&&O==="number"&&N.push("integer");h.dataTypes=N}function u(h,_){const N=h.schemaEnv.baseId+h.errSchemaPath;_+=` at "${N}" (strictTypes)`,(0,m.checkStrictMode)(h,_,h.opts.strictTypes)}class S{constructor(_,N,O){if((0,o.validateKeywordUsage)(_,N,O),this.gen=_.gen,this.allErrors=_.allErrors,this.keyword=O,this.data=_.data,this.schema=_.schema[O],this.$data=N.$data&&_.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,m.schemaRefOrVal)(_,this.schema,O,this.$data),this.schemaType=N.schemaType,this.parentSchema=_.schema,this.params={},this.it=_,this.def=N,this.$data)this.schemaCode=_.gen.const("vSchema",U(this.$data,_));else if(this.schemaCode=this.schemaValue,!(0,o.validSchemaType)(this.schema,N.schemaType,N.allowUndefined))throw new Error(`${O} value must be ${JSON.stringify(N.schemaType)}`);("code"in N?N.trackErrors:N.errors!==!1)&&(this.errsCount=_.gen.const("_errs",c.default.errors))}result(_,N,O){this.failResult((0,a.not)(_),N,O)}failResult(_,N,O){this.gen.if(_),O?O():this.error(),N?(this.gen.else(),N(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(_,N){this.failResult((0,a.not)(_),void 0,N)}fail(_){if(_===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(_),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(_){if(!this.$data)return this.fail(_);const{schemaCode:N}=this;this.fail((0,a._)`${N} !== undefined && (${(0,a.or)(this.invalid$data(),_)})`)}error(_,N,O){if(N){this.setParams(N),this._error(_,O),this.setParams({});return}this._error(_,O)}_error(_,N){(_?v.reportExtraError:v.reportError)(this,this.def.error,N)}$dataError(){(0,v.reportError)(this,this.def.$dataError||v.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,v.resetErrorsCount)(this.gen,this.errsCount)}ok(_){this.allErrors||this.gen.if(_)}setParams(_,N){N?Object.assign(this.params,_):this.params=_}block$data(_,N,O=a.nil){this.gen.block(()=>{this.check$data(_,O),N()})}check$data(_=a.nil,N=a.nil){if(!this.$data)return;const{gen:O,schemaCode:A,schemaType:q,def:Y}=this;O.if((0,a.or)((0,a._)`${A} === undefined`,N)),_!==a.nil&&O.assign(_,!0),(q.length||Y.validateSchema)&&(O.elseIf(this.invalid$data()),this.$dataError(),_!==a.nil&&O.assign(_,!1)),O.else()}invalid$data(){const{gen:_,schemaCode:N,schemaType:O,def:A,it:q}=this;return(0,a.or)(Y(),he());function Y(){if(O.length){if(!(N instanceof a.Name))throw new Error("ajv implementation error");const se=Array.isArray(O)?O:[O];return(0,a._)`${(0,s.checkDataTypes)(se,N,q.opts.strictNumbers,s.DataType.Wrong)}`}return a.nil}function he(){if(A.validateSchema){const se=_.scopeValue("validate$data",{ref:A.validateSchema});return(0,a._)`!${se}(${N})`}return a.nil}}subschema(_,N){const O=(0,l.getSubschema)(this.it,_);(0,l.extendSubschemaData)(O,this.it,_),(0,l.extendSubschemaMode)(O,_);const A={...this.it,...O,items:void 0,props:void 0};return j(A,N),A}mergeEvaluated(_,N){const{it:O,gen:A}=this;O.opts.unevaluated&&(O.props!==!0&&_.props!==void 0&&(O.props=m.mergeEvaluated.props(A,_.props,O.props,N)),O.items!==!0&&_.items!==void 0&&(O.items=m.mergeEvaluated.items(A,_.items,O.items,N)))}mergeValidEvaluated(_,N){const{it:O,gen:A}=this;if(O.opts.unevaluated&&(O.props!==!0||O.items!==!0))return A.if(N,()=>this.mergeEvaluated(_,a.Name)),!0}}ge.KeywordCxt=S;function M(h,_,N,O){const A=new S(h,N,_);"code"in N?N.code(A,O):A.$data&&N.validate?(0,o.funcKeywordCode)(A,N):"macro"in N?(0,o.macroKeywordCode)(A,N):(N.compile||N.validate)&&(0,o.funcKeywordCode)(A,N)}const D=/^\/(?:[^~]|~0|~1)*$/,L=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function U(h,{dataLevel:_,dataNames:N,dataPathArr:O}){let A,q;if(h==="")return c.default.rootData;if(h[0]==="/"){if(!D.test(h))throw new Error(`Invalid JSON-pointer: ${h}`);A=h,q=c.default.rootData}else{const ae=L.exec(h);if(!ae)throw new Error(`Invalid JSON-pointer: ${h}`);const Z=+ae[1];if(A=ae[2],A==="#"){if(Z>=_)throw new Error(se("property/index",Z));return O[_-Z]}if(Z>_)throw new Error(se("data",Z));if(q=N[_-Z],!A)return q}let Y=q;const he=A.split("/");for(const ae of he)ae&&(q=(0,a._)`${q}${(0,a.getProperty)((0,m.unescapeJsonPointer)(ae))}`,Y=(0,a._)`${Y} && ${q}`);return Y;function se(ae,Z){return`Cannot access ${ae} ${Z} levels up, current level is ${_}`}}return ge.getData=U,ge}var tt={},Tr;function Ut(){if(Tr)return tt;Tr=1,Object.defineProperty(tt,"__esModule",{value:!0});class e extends Error{constructor(r){super("validation failed"),this.errors=r,this.ajv=this.validation=!0}}return tt.default=e,tt}var Ke={};Object.defineProperty(Ke,"__esModule",{value:!0});const bt=ee;class gs extends Error{constructor(t,r,s,i){super(i||`can't resolve reference ${s} from id ${r}`),this.missingRef=(0,bt.resolveUrl)(t,r,s),this.missingSchema=(0,bt.normalizeId)((0,bt.getFullPath)(t,this.missingRef))}}Ke.default=gs;var ie={};Object.defineProperty(ie,"__esModule",{value:!0});ie.resolveSchema=ie.getCompilingSchema=ie.resolveRef=ie.compileSchema=ie.SchemaEnv=void 0;const pe=K,ws=Ut(),ke=_e,$e=ee,Rr=C,bs=mt();class pt{constructor(t){var r;this.refs={},this.dynamicAnchors={};let s;typeof t.schema=="object"&&(s=t.schema),this.schema=t.schema,this.schemaId=t.schemaId,this.root=t.root||this,this.baseId=(r=t.baseId)!==null&&r!==void 0?r:(0,$e.normalizeId)(s==null?void 0:s[t.schemaId||"$id"]),this.schemaPath=t.schemaPath,this.localRefs=t.localRefs,this.meta=t.meta,this.$async=s==null?void 0:s.$async,this.refs={}}}ie.SchemaEnv=pt;function zt(e){const t=ln.call(this,e);if(t)return t;const r=(0,$e.getFullPath)(this.opts.uriResolver,e.root.baseId),{es5:s,lines:i}=this.opts.code,{ownProperties:o}=this.opts,l=new pe.CodeGen(this.scope,{es5:s,lines:i,ownProperties:o});let a;e.$async&&(a=l.scopeValue("Error",{ref:ws.default,code:(0,pe._)`require("ajv/dist/runtime/validation_error").default`}));const c=l.scopeName("validate");e.validateName=c;const d={gen:l,allErrors:this.opts.allErrors,data:ke.default.data,parentData:ke.default.parentData,parentDataProperty:ke.default.parentDataProperty,dataNames:[ke.default.data],dataPathArr:[pe.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:l.scopeValue("schema",this.opts.code.source===!0?{ref:e.schema,code:(0,pe.stringify)(e.schema)}:{ref:e.schema}),validateName:c,ValidationError:a,schema:e.schema,schemaEnv:e,rootId:r,baseId:e.baseId||r,schemaPath:pe.nil,errSchemaPath:e.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,pe._)`""`,opts:this.opts,self:this};let m;try{this._compilations.add(e),(0,bs.validateFunctionCode)(d),l.optimize(this.opts.code.optimize);const v=l.toString();m=`${l.scopeRefs(ke.default.scope)}return ${v}`,this.opts.code.process&&(m=this.opts.code.process(m,e));const b=new Function(`${ke.default.self}`,`${ke.default.scope}`,m)(this,this.scope.get());if(this.scope.value(c,{ref:b}),b.errors=null,b.schema=e.schema,b.schemaEnv=e,e.$async&&(b.$async=!0),this.opts.code.source===!0&&(b.source={validateName:c,validateCode:v,scopeValues:l._values}),this.opts.unevaluated){const{props:$,items:w}=d;b.evaluated={props:$ instanceof pe.Name?void 0:$,items:w instanceof pe.Name?void 0:w,dynamicProps:$ instanceof pe.Name,dynamicItems:w instanceof pe.Name},b.source&&(b.source.evaluated=(0,pe.stringify)(b.evaluated))}return e.validate=b,e}catch(v){throw delete e.validate,delete e.validateName,m&&this.logger.error("Error compiling schema, function code:",m),v}finally{this._compilations.delete(e)}}ie.compileSchema=zt;function Es(e,t,r){var s;r=(0,$e.resolveUrl)(this.opts.uriResolver,t,r);const i=e.refs[r];if(i)return i;let o=Ns.call(this,e,r);if(o===void 0){const l=(s=e.localRefs)===null||s===void 0?void 0:s[r],{schemaId:a}=this.opts;l&&(o=new pt({schema:l,schemaId:a,root:e,baseId:t}))}if(o!==void 0)return e.refs[r]=Ps.call(this,o)}ie.resolveRef=Es;function Ps(e){return(0,$e.inlineRef)(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:zt.call(this,e)}function ln(e){for(const t of this._compilations)if(Ss(t,e))return t}ie.getCompilingSchema=ln;function Ss(e,t){return e.schema===t.schema&&e.root===t.root&&e.baseId===t.baseId}function Ns(e,t){let r;for(;typeof(r=this.refs[t])=="string";)t=r;return r||this.schemas[t]||yt.call(this,e,t)}function yt(e,t){const r=this.opts.uriResolver.parse(t),s=(0,$e._getFullPath)(this.opts.uriResolver,r);let i=(0,$e.getFullPath)(this.opts.uriResolver,e.baseId,void 0);if(Object.keys(e.schema).length>0&&s===i)return Et.call(this,r,e);const o=(0,$e.normalizeId)(s),l=this.refs[o]||this.schemas[o];if(typeof l=="string"){const a=yt.call(this,e,l);return typeof(a==null?void 0:a.schema)!="object"?void 0:Et.call(this,r,a)}if(typeof(l==null?void 0:l.schema)=="object"){if(l.validate||zt.call(this,l),o===(0,$e.normalizeId)(t)){const{schema:a}=l,{schemaId:c}=this.opts,d=a[c];return d&&(i=(0,$e.resolveUrl)(this.opts.uriResolver,i,d)),new pt({schema:a,schemaId:c,root:e,baseId:i})}return Et.call(this,r,l)}}ie.resolveSchema=yt;const ks=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function Et(e,{baseId:t,schema:r,root:s}){var i;if(((i=e.fragment)===null||i===void 0?void 0:i[0])!=="/")return;for(const a of e.fragment.slice(1).split("/")){if(typeof r=="boolean")return;const c=r[(0,Rr.unescapeFragment)(a)];if(c===void 0)return;r=c;const d=typeof r=="object"&&r[this.opts.schemaId];!ks.has(a)&&d&&(t=(0,$e.resolveUrl)(this.opts.uriResolver,t,d))}let o;if(typeof r!="boolean"&&r.$ref&&!(0,Rr.schemaHasRulesButRef)(r,this.RULES)){const a=(0,$e.resolveUrl)(this.opts.uriResolver,t,r.$ref);o=yt.call(this,s,a)}const{schemaId:l}=this.opts;if(o=o||new pt({schema:r,schemaId:l,root:s,baseId:t}),o.schema!==o.root.schema)return o}const js="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",Os="Meta-schema for $data reference (JSON AnySchema extension proposal)",Ts="object",Rs=["$data"],Cs={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},Is=!1,Ms={$id:js,description:Os,type:Ts,required:Rs,properties:Cs,additionalProperties:Is};var Lt={};Object.defineProperty(Lt,"__esModule",{value:!0});const un=wn;un.code='require("ajv/dist/runtime/uri").default';Lt.default=un;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;var t=mt();Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return t.KeywordCxt}});var r=K;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return r.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return r.CodeGen}});const s=Ut(),i=Ke,o=Te,l=ie,a=K,c=ee,d=X,m=C,v=Ms,P=Lt,b=(T,y)=>new RegExp(T,y);b.code="new RegExp";const $=["removeAdditional","useDefaults","coerceTypes"],w=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),p={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},f={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},E=200;function j(T){var y,k,g,n,u,S,M,D,L,U,h,_,N,O,A,q,Y,he,se,ae,Z,Me,le,vt,gt;const Ge=T.strict,wt=(y=T.code)===null||y===void 0?void 0:y.optimize,wr=wt===!0||wt===void 0?1:wt||0,br=(g=(k=T.code)===null||k===void 0?void 0:k.regExp)!==null&&g!==void 0?g:b,vn=(n=T.uriResolver)!==null&&n!==void 0?n:P.default;return{strictSchema:(S=(u=T.strictSchema)!==null&&u!==void 0?u:Ge)!==null&&S!==void 0?S:!0,strictNumbers:(D=(M=T.strictNumbers)!==null&&M!==void 0?M:Ge)!==null&&D!==void 0?D:!0,strictTypes:(U=(L=T.strictTypes)!==null&&L!==void 0?L:Ge)!==null&&U!==void 0?U:"log",strictTuples:(_=(h=T.strictTuples)!==null&&h!==void 0?h:Ge)!==null&&_!==void 0?_:"log",strictRequired:(O=(N=T.strictRequired)!==null&&N!==void 0?N:Ge)!==null&&O!==void 0?O:!1,code:T.code?{...T.code,optimize:wr,regExp:br}:{optimize:wr,regExp:br},loopRequired:(A=T.loopRequired)!==null&&A!==void 0?A:E,loopEnum:(q=T.loopEnum)!==null&&q!==void 0?q:E,meta:(Y=T.meta)!==null&&Y!==void 0?Y:!0,messages:(he=T.messages)!==null&&he!==void 0?he:!0,inlineRefs:(se=T.inlineRefs)!==null&&se!==void 0?se:!0,schemaId:(ae=T.schemaId)!==null&&ae!==void 0?ae:"$id",addUsedSchema:(Z=T.addUsedSchema)!==null&&Z!==void 0?Z:!0,validateSchema:(Me=T.validateSchema)!==null&&Me!==void 0?Me:!0,validateFormats:(le=T.validateFormats)!==null&&le!==void 0?le:!0,unicodeRegExp:(vt=T.unicodeRegExp)!==null&&vt!==void 0?vt:!0,int32range:(gt=T.int32range)!==null&&gt!==void 0?gt:!0,uriResolver:vn}}class R{constructor(y={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,y=this.opts={...y,...j(y)};const{es5:k,lines:g}=this.opts.code;this.scope=new a.ValueScope({scope:{},prefixes:w,es5:k,lines:g}),this.logger=ne(y.logger);const n=y.validateFormats;y.validateFormats=!1,this.RULES=(0,o.getRules)(),I.call(this,p,y,"NOT SUPPORTED"),I.call(this,f,y,"DEPRECATED","warn"),this._metaOpts=de.call(this),y.formats&&re.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),y.keywords&&ce.call(this,y.keywords),typeof y.meta=="object"&&this.addMetaSchema(y.meta),G.call(this),y.validateFormats=n}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:y,meta:k,schemaId:g}=this.opts;let n=v;g==="id"&&(n={...v},n.id=n.$id,delete n.$id),k&&y&&this.addMetaSchema(n,n[g],!1)}defaultMeta(){const{meta:y,schemaId:k}=this.opts;return this.opts.defaultMeta=typeof y=="object"?y[k]||y:void 0}validate(y,k){let g;if(typeof y=="string"){if(g=this.getSchema(y),!g)throw new Error(`no schema with key or ref "${y}"`)}else g=this.compile(y);const n=g(k);return"$async"in g||(this.errors=g.errors),n}compile(y,k){const g=this._addSchema(y,k);return g.validate||this._compileSchemaEnv(g)}compileAsync(y,k){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:g}=this.opts;return n.call(this,y,k);async function n(U,h){await u.call(this,U.$schema);const _=this._addSchema(U,h);return _.validate||S.call(this,_)}async function u(U){U&&!this.getSchema(U)&&await n.call(this,{$ref:U},!0)}async function S(U){try{return this._compileSchemaEnv(U)}catch(h){if(!(h instanceof i.default))throw h;return M.call(this,h),await D.call(this,h.missingSchema),S.call(this,U)}}function M({missingSchema:U,missingRef:h}){if(this.refs[U])throw new Error(`AnySchema ${U} is loaded but ${h} cannot be resolved`)}async function D(U){const h=await L.call(this,U);this.refs[U]||await u.call(this,h.$schema),this.refs[U]||this.addSchema(h,U,k)}async function L(U){const h=this._loading[U];if(h)return h;try{return await(this._loading[U]=g(U))}finally{delete this._loading[U]}}}addSchema(y,k,g,n=this.opts.validateSchema){if(Array.isArray(y)){for(const S of y)this.addSchema(S,void 0,g,n);return this}let u;if(typeof y=="object"){const{schemaId:S}=this.opts;if(u=y[S],u!==void 0&&typeof u!="string")throw new Error(`schema ${S} must be string`)}return k=(0,c.normalizeId)(k||u),this._checkUnique(k),this.schemas[k]=this._addSchema(y,g,k,n,!0),this}addMetaSchema(y,k,g=this.opts.validateSchema){return this.addSchema(y,k,!0,g),this}validateSchema(y,k){if(typeof y=="boolean")return!0;let g;if(g=y.$schema,g!==void 0&&typeof g!="string")throw new Error("$schema must be a string");if(g=g||this.opts.defaultMeta||this.defaultMeta(),!g)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const n=this.validate(g,y);if(!n&&k){const u="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(u);else throw new Error(u)}return n}getSchema(y){let k;for(;typeof(k=z.call(this,y))=="string";)y=k;if(k===void 0){const{schemaId:g}=this.opts,n=new l.SchemaEnv({schema:{},schemaId:g});if(k=l.resolveSchema.call(this,n,y),!k)return;this.refs[y]=k}return k.validate||this._compileSchemaEnv(k)}removeSchema(y){if(y instanceof RegExp)return this._removeAllSchemas(this.schemas,y),this._removeAllSchemas(this.refs,y),this;switch(typeof y){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const k=z.call(this,y);return typeof k=="object"&&this._cache.delete(k.schema),delete this.schemas[y],delete this.refs[y],this}case"object":{const k=y;this._cache.delete(k);let g=y[this.opts.schemaId];return g&&(g=(0,c.normalizeId)(g),delete this.schemas[g],delete this.refs[g]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(y){for(const k of y)this.addKeyword(k);return this}addKeyword(y,k){let g;if(typeof y=="string")g=y,typeof k=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),k.keyword=g);else if(typeof y=="object"&&k===void 0){if(k=y,g=k.keyword,Array.isArray(g)&&!g.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(Q.call(this,g,k),!k)return(0,m.eachItem)(g,u=>ve.call(this,u)),this;Ce.call(this,k);const n={...k,type:(0,d.getJSONTypes)(k.type),schemaType:(0,d.getJSONTypes)(k.schemaType)};return(0,m.eachItem)(g,n.type.length===0?u=>ve.call(this,u,n):u=>n.type.forEach(S=>ve.call(this,u,n,S))),this}getKeyword(y){const k=this.RULES.all[y];return typeof k=="object"?k.definition:!!k}removeKeyword(y){const{RULES:k}=this;delete k.keywords[y],delete k.all[y];for(const g of k.rules){const n=g.rules.findIndex(u=>u.keyword===y);n>=0&&g.rules.splice(n,1)}return this}addFormat(y,k){return typeof k=="string"&&(k=new RegExp(k)),this.formats[y]=k,this}errorsText(y=this.errors,{separator:k=", ",dataVar:g="data"}={}){return!y||y.length===0?"No errors":y.map(n=>`${g}${n.instancePath} ${n.message}`).reduce((n,u)=>n+k+u)}$dataMetaSchema(y,k){const g=this.RULES.all;y=JSON.parse(JSON.stringify(y));for(const n of k){const u=n.split("/").slice(1);let S=y;for(const M of u)S=S[M];for(const M in g){const D=g[M];if(typeof D!="object")continue;const{$data:L}=D.definition,U=S[M];L&&U&&(S[M]=Ie(U))}}return y}_removeAllSchemas(y,k){for(const g in y){const n=y[g];(!k||k.test(g))&&(typeof n=="string"?delete y[g]:n&&!n.meta&&(this._cache.delete(n.schema),delete y[g]))}}_addSchema(y,k,g,n=this.opts.validateSchema,u=this.opts.addUsedSchema){let S;const{schemaId:M}=this.opts;if(typeof y=="object")S=y[M];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof y!="boolean")throw new Error("schema must be object or boolean")}let D=this._cache.get(y);if(D!==void 0)return D;g=(0,c.normalizeId)(S||g);const L=c.getSchemaRefs.call(this,y,g);return D=new l.SchemaEnv({schema:y,schemaId:M,meta:k,baseId:g,localRefs:L}),this._cache.set(D.schema,D),u&&!g.startsWith("#")&&(g&&this._checkUnique(g),this.refs[g]=D),n&&this.validateSchema(y,!0),D}_checkUnique(y){if(this.schemas[y]||this.refs[y])throw new Error(`schema with key or id "${y}" already exists`)}_compileSchemaEnv(y){if(y.meta?this._compileMetaSchema(y):l.compileSchema.call(this,y),!y.validate)throw new Error("ajv implementation error");return y.validate}_compileMetaSchema(y){const k=this.opts;this.opts=this._metaOpts;try{l.compileSchema.call(this,y)}finally{this.opts=k}}}R.ValidationError=s.default,R.MissingRefError=i.default,e.default=R;function I(T,y,k,g="error"){for(const n in T){const u=n;u in y&&this.logger[g](`${k}: option ${n}. ${T[u]}`)}}function z(T){return T=(0,c.normalizeId)(T),this.schemas[T]||this.refs[T]}function G(){const T=this.opts.schemas;if(T)if(Array.isArray(T))this.addSchema(T);else for(const y in T)this.addSchema(T[y],y)}function re(){for(const T in this.opts.formats){const y=this.opts.formats[T];y&&this.addFormat(T,y)}}function ce(T){if(Array.isArray(T)){this.addVocabulary(T);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const y in T){const k=T[y];k.keyword||(k.keyword=y),this.addKeyword(k)}}function de(){const T={...this.opts};for(const y of $)delete T[y];return T}const fe={log(){},warn(){},error(){}};function ne(T){if(T===!1)return fe;if(T===void 0)return console;if(T.log&&T.warn&&T.error)return T;throw new Error("logger must implement log, warn and error methods")}const B=/^[a-z_$][a-z0-9_$:-]*$/i;function Q(T,y){const{RULES:k}=this;if((0,m.eachItem)(T,g=>{if(k.keywords[g])throw new Error(`Keyword ${g} is already defined`);if(!B.test(g))throw new Error(`Keyword ${g} has invalid name`)}),!!y&&y.$data&&!("code"in y||"validate"in y))throw new Error('$data keyword must have "code" or "validate" function')}function ve(T,y,k){var g;const n=y==null?void 0:y.post;if(k&&n)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:u}=this;let S=n?u.post:u.rules.find(({type:D})=>D===k);if(S||(S={type:k,rules:[]},u.rules.push(S)),u.keywords[T]=!0,!y)return;const M={keyword:T,definition:{...y,type:(0,d.getJSONTypes)(y.type),schemaType:(0,d.getJSONTypes)(y.schemaType)}};y.before?Se.call(this,S,M,y.before):S.rules.push(M),u.all[T]=M,(g=y.implements)===null||g===void 0||g.forEach(D=>this.addKeyword(D))}function Se(T,y,k){const g=T.rules.findIndex(n=>n.keyword===k);g>=0?T.rules.splice(g,0,y):(T.rules.push(y),this.logger.warn(`rule ${k} is not defined`))}function Ce(T){let{metaSchema:y}=T;y!==void 0&&(T.$data&&this.opts.$data&&(y=Ie(y)),T.validateSchema=this.compile(y,!0))}const Le={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function Ie(T){return{anyOf:[T,Le]}}})(Hr);var Gt={},Jt={},Ht={};Object.defineProperty(Ht,"__esModule",{value:!0});const As={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};Ht.default=As;var Re={};Object.defineProperty(Re,"__esModule",{value:!0});Re.callRef=Re.getValidate=void 0;const Ds=Ke,Cr=F,oe=K,Ae=_e,Ir=ie,rt=C,Vs={keyword:"$ref",schemaType:"string",code(e){const{gen:t,schema:r,it:s}=e,{baseId:i,schemaEnv:o,validateName:l,opts:a,self:c}=s,{root:d}=o;if((r==="#"||r==="#/")&&i===d.baseId)return v();const m=Ir.resolveRef.call(c,d,i,r);if(m===void 0)throw new Ds.default(s.opts.uriResolver,i,r);if(m instanceof Ir.SchemaEnv)return P(m);return b(m);function v(){if(o===d)return it(e,l,o,o.$async);const $=t.scopeValue("root",{ref:d});return it(e,(0,oe._)`${$}.validate`,d,d.$async)}function P($){const w=dn(e,$);it(e,w,$,$.$async)}function b($){const w=t.scopeValue("schema",a.code.source===!0?{ref:$,code:(0,oe.stringify)($)}:{ref:$}),p=t.name("valid"),f=e.subschema({schema:$,dataTypes:[],schemaPath:oe.nil,topSchemaRef:w,errSchemaPath:r},p);e.mergeEvaluated(f),e.ok(p)}}};function dn(e,t){const{gen:r}=e;return t.validate?r.scopeValue("validate",{ref:t.validate}):(0,oe._)`${r.scopeValue("wrapper",{ref:t})}.validate`}Re.getValidate=dn;function it(e,t,r,s){const{gen:i,it:o}=e,{allErrors:l,schemaEnv:a,opts:c}=o,d=c.passContext?Ae.default.this:oe.nil;s?m():v();function m(){if(!a.$async)throw new Error("async schema referenced by sync schema");const $=i.let("valid");i.try(()=>{i.code((0,oe._)`await ${(0,Cr.callValidateCode)(e,t,d)}`),b(t),l||i.assign($,!0)},w=>{i.if((0,oe._)`!(${w} instanceof ${o.ValidationError})`,()=>i.throw(w)),P(w),l||i.assign($,!1)}),e.ok($)}function v(){e.result((0,Cr.callValidateCode)(e,t,d),()=>b(t),()=>P(t))}function P($){const w=(0,oe._)`${$}.errors`;i.assign(Ae.default.vErrors,(0,oe._)`${Ae.default.vErrors} === null ? ${w} : ${Ae.default.vErrors}.concat(${w})`),i.assign(Ae.default.errors,(0,oe._)`${Ae.default.vErrors}.length`)}function b($){var w;if(!o.opts.unevaluated)return;const p=(w=r==null?void 0:r.validate)===null||w===void 0?void 0:w.evaluated;if(o.props!==!0)if(p&&!p.dynamicProps)p.props!==void 0&&(o.props=rt.mergeEvaluated.props(i,p.props,o.props));else{const f=i.var("props",(0,oe._)`${$}.evaluated.props`);o.props=rt.mergeEvaluated.props(i,f,o.props,oe.Name)}if(o.items!==!0)if(p&&!p.dynamicItems)p.items!==void 0&&(o.items=rt.mergeEvaluated.items(i,p.items,o.items));else{const f=i.var("items",(0,oe._)`${$}.evaluated.items`);o.items=rt.mergeEvaluated.items(i,f,o.items,oe.Name)}}}Re.callRef=it;Re.default=Vs;Object.defineProperty(Jt,"__esModule",{value:!0});const qs=Ht,Fs=Re,Ks=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",qs.default,Fs.default];Jt.default=Ks;var Bt={},Wt={};Object.defineProperty(Wt,"__esModule",{value:!0});const ut=K,Pe=ut.operators,dt={maximum:{okStr:"<=",ok:Pe.LTE,fail:Pe.GT},minimum:{okStr:">=",ok:Pe.GTE,fail:Pe.LT},exclusiveMaximum:{okStr:"<",ok:Pe.LT,fail:Pe.GTE},exclusiveMinimum:{okStr:">",ok:Pe.GT,fail:Pe.LTE}},Us={message:({keyword:e,schemaCode:t})=>(0,ut.str)`must be ${dt[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>(0,ut._)`{comparison: ${dt[e].okStr}, limit: ${t}}`},zs={keyword:Object.keys(dt),type:"number",schemaType:"number",$data:!0,error:Us,code(e){const{keyword:t,data:r,schemaCode:s}=e;e.fail$data((0,ut._)`${r} ${dt[t].fail} ${s} || isNaN(${r})`)}};Wt.default=zs;var Qt={};Object.defineProperty(Qt,"__esModule",{value:!0});const We=K,Ls={message:({schemaCode:e})=>(0,We.str)`must be multiple of ${e}`,params:({schemaCode:e})=>(0,We._)`{multipleOf: ${e}}`},Gs={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:Ls,code(e){const{gen:t,data:r,schemaCode:s,it:i}=e,o=i.opts.multipleOfPrecision,l=t.let("res"),a=o?(0,We._)`Math.abs(Math.round(${l}) - ${l}) > 1e-${o}`:(0,We._)`${l} !== parseInt(${l})`;e.fail$data((0,We._)`(${s} === 0 || (${l} = ${r}/${s}, ${a}))`)}};Qt.default=Gs;var Xt={},Yt={};Object.defineProperty(Yt,"__esModule",{value:!0});function fn(e){const t=e.length;let r=0,s=0,i;for(;s<t;)r++,i=e.charCodeAt(s++),i>=55296&&i<=56319&&s<t&&(i=e.charCodeAt(s),(i&64512)===56320&&s++);return r}Yt.default=fn;fn.code='require("ajv/dist/runtime/ucs2length").default';Object.defineProperty(Xt,"__esModule",{value:!0});const je=K,Js=C,Hs=Yt,Bs={message({keyword:e,schemaCode:t}){const r=e==="maxLength"?"more":"fewer";return(0,je.str)`must NOT have ${r} than ${t} characters`},params:({schemaCode:e})=>(0,je._)`{limit: ${e}}`},Ws={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:Bs,code(e){const{keyword:t,data:r,schemaCode:s,it:i}=e,o=t==="maxLength"?je.operators.GT:je.operators.LT,l=i.opts.unicode===!1?(0,je._)`${r}.length`:(0,je._)`${(0,Js.useFunc)(e.gen,Hs.default)}(${r})`;e.fail$data((0,je._)`${l} ${o} ${s}`)}};Xt.default=Ws;var Zt={};Object.defineProperty(Zt,"__esModule",{value:!0});const Qs=F,ft=K,Xs={message:({schemaCode:e})=>(0,ft.str)`must match pattern "${e}"`,params:({schemaCode:e})=>(0,ft._)`{pattern: ${e}}`},Ys={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:Xs,code(e){const{data:t,$data:r,schema:s,schemaCode:i,it:o}=e,l=o.opts.unicodeRegExp?"u":"",a=r?(0,ft._)`(new RegExp(${i}, ${l}))`:(0,Qs.usePattern)(e,s);e.fail$data((0,ft._)`!${a}.test(${t})`)}};Zt.default=Ys;var xt={};Object.defineProperty(xt,"__esModule",{value:!0});const Qe=K,Zs={message({keyword:e,schemaCode:t}){const r=e==="maxProperties"?"more":"fewer";return(0,Qe.str)`must NOT have ${r} than ${t} properties`},params:({schemaCode:e})=>(0,Qe._)`{limit: ${e}}`},xs={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:Zs,code(e){const{keyword:t,data:r,schemaCode:s}=e,i=t==="maxProperties"?Qe.operators.GT:Qe.operators.LT;e.fail$data((0,Qe._)`Object.keys(${r}).length ${i} ${s}`)}};xt.default=xs;var er={};Object.defineProperty(er,"__esModule",{value:!0});const He=F,Xe=K,ea=C,ta={message:({params:{missingProperty:e}})=>(0,Xe.str)`must have required property '${e}'`,params:({params:{missingProperty:e}})=>(0,Xe._)`{missingProperty: ${e}}`},ra={keyword:"required",type:"object",schemaType:"array",$data:!0,error:ta,code(e){const{gen:t,schema:r,schemaCode:s,data:i,$data:o,it:l}=e,{opts:a}=l;if(!o&&r.length===0)return;const c=r.length>=a.loopRequired;if(l.allErrors?d():m(),a.strictRequired){const b=e.parentSchema.properties,{definedProperties:$}=e.it;for(const w of r)if((b==null?void 0:b[w])===void 0&&!$.has(w)){const p=l.schemaEnv.baseId+l.errSchemaPath,f=`required property "${w}" is not defined at "${p}" (strictRequired)`;(0,ea.checkStrictMode)(l,f,l.opts.strictRequired)}}function d(){if(c||o)e.block$data(Xe.nil,v);else for(const b of r)(0,He.checkReportMissingProp)(e,b)}function m(){const b=t.let("missing");if(c||o){const $=t.let("valid",!0);e.block$data($,()=>P(b,$)),e.ok($)}else t.if((0,He.checkMissingProp)(e,r,b)),(0,He.reportMissingProp)(e,b),t.else()}function v(){t.forOf("prop",s,b=>{e.setParams({missingProperty:b}),t.if((0,He.noPropertyInData)(t,i,b,a.ownProperties),()=>e.error())})}function P(b,$){e.setParams({missingProperty:b}),t.forOf(b,s,()=>{t.assign($,(0,He.propertyInData)(t,i,b,a.ownProperties)),t.if((0,Xe.not)($),()=>{e.error(),t.break()})},Xe.nil)}}};er.default=ra;var tr={};Object.defineProperty(tr,"__esModule",{value:!0});const Ye=K,na={message({keyword:e,schemaCode:t}){const r=e==="maxItems"?"more":"fewer";return(0,Ye.str)`must NOT have ${r} than ${t} items`},params:({schemaCode:e})=>(0,Ye._)`{limit: ${e}}`},sa={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:na,code(e){const{keyword:t,data:r,schemaCode:s}=e,i=t==="maxItems"?Ye.operators.GT:Ye.operators.LT;e.fail$data((0,Ye._)`${r}.length ${i} ${s}`)}};tr.default=sa;var rr={},et={};Object.defineProperty(et,"__esModule",{value:!0});const hn=Jr;hn.code='require("ajv/dist/runtime/equal").default';et.default=hn;Object.defineProperty(rr,"__esModule",{value:!0});const Pt=X,x=K,aa=C,oa=et,ia={message:({params:{i:e,j:t}})=>(0,x.str)`must NOT have duplicate items (items ## ${t} and ${e} are identical)`,params:({params:{i:e,j:t}})=>(0,x._)`{i: ${e}, j: ${t}}`},ca={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:ia,code(e){const{gen:t,data:r,$data:s,schema:i,parentSchema:o,schemaCode:l,it:a}=e;if(!s&&!i)return;const c=t.let("valid"),d=o.items?(0,Pt.getSchemaTypes)(o.items):[];e.block$data(c,m,(0,x._)`${l} === false`),e.ok(c);function m(){const $=t.let("i",(0,x._)`${r}.length`),w=t.let("j");e.setParams({i:$,j:w}),t.assign(c,!0),t.if((0,x._)`${$} > 1`,()=>(v()?P:b)($,w))}function v(){return d.length>0&&!d.some($=>$==="object"||$==="array")}function P($,w){const p=t.name("item"),f=(0,Pt.checkDataTypes)(d,p,a.opts.strictNumbers,Pt.DataType.Wrong),E=t.const("indices",(0,x._)`{}`);t.for((0,x._)`;${$}--;`,()=>{t.let(p,(0,x._)`${r}[${$}]`),t.if(f,(0,x._)`continue`),d.length>1&&t.if((0,x._)`typeof ${p} == "string"`,(0,x._)`${p} += "_"`),t.if((0,x._)`typeof ${E}[${p}] == "number"`,()=>{t.assign(w,(0,x._)`${E}[${p}]`),e.error(),t.assign(c,!1).break()}).code((0,x._)`${E}[${p}] = ${$}`)})}function b($,w){const p=(0,aa.useFunc)(t,oa.default),f=t.name("outer");t.label(f).for((0,x._)`;${$}--;`,()=>t.for((0,x._)`${w} = ${$}; ${w}--;`,()=>t.if((0,x._)`${p}(${r}[${$}], ${r}[${w}])`,()=>{e.error(),t.assign(c,!1).break(f)})))}}};rr.default=ca;var nr={};Object.defineProperty(nr,"__esModule",{value:!0});const Rt=K,la=C,ua=et,da={message:"must be equal to constant",params:({schemaCode:e})=>(0,Rt._)`{allowedValue: ${e}}`},fa={keyword:"const",$data:!0,error:da,code(e){const{gen:t,data:r,$data:s,schemaCode:i,schema:o}=e;s||o&&typeof o=="object"?e.fail$data((0,Rt._)`!${(0,la.useFunc)(t,ua.default)}(${r}, ${i})`):e.fail((0,Rt._)`${o} !== ${r}`)}};nr.default=fa;var sr={};Object.defineProperty(sr,"__esModule",{value:!0});const Be=K,ha=C,ma=et,pa={message:"must be equal to one of the allowed values",params:({schemaCode:e})=>(0,Be._)`{allowedValues: ${e}}`},ya={keyword:"enum",schemaType:"array",$data:!0,error:pa,code(e){const{gen:t,data:r,$data:s,schema:i,schemaCode:o,it:l}=e;if(!s&&i.length===0)throw new Error("enum must have non-empty array");const a=i.length>=l.opts.loopEnum;let c;const d=()=>c??(c=(0,ha.useFunc)(t,ma.default));let m;if(a||s)m=t.let("valid"),e.block$data(m,v);else{if(!Array.isArray(i))throw new Error("ajv implementation error");const b=t.const("vSchema",o);m=(0,Be.or)(...i.map(($,w)=>P(b,w)))}e.pass(m);function v(){t.assign(m,!1),t.forOf("v",o,b=>t.if((0,Be._)`${d()}(${r}, ${b})`,()=>t.assign(m,!0).break()))}function P(b,$){const w=i[$];return typeof w=="object"&&w!==null?(0,Be._)`${d()}(${r}, ${b}[${$}])`:(0,Be._)`${r} === ${w}`}}};sr.default=ya;Object.defineProperty(Bt,"__esModule",{value:!0});const $a=Wt,_a=Qt,va=Xt,ga=Zt,wa=xt,ba=er,Ea=tr,Pa=rr,Sa=nr,Na=sr,ka=[$a.default,_a.default,va.default,ga.default,wa.default,ba.default,Ea.default,Pa.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},Sa.default,Na.default];Bt.default=ka;var ar={},Ue={};Object.defineProperty(Ue,"__esModule",{value:!0});Ue.validateAdditionalItems=void 0;const Oe=K,Ct=C,ja={message:({params:{len:e}})=>(0,Oe.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,Oe._)`{limit: ${e}}`},Oa={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:ja,code(e){const{parentSchema:t,it:r}=e,{items:s}=t;if(!Array.isArray(s)){(0,Ct.checkStrictMode)(r,'"additionalItems" is ignored when "items" is not an array of schemas');return}mn(e,s)}};function mn(e,t){const{gen:r,schema:s,data:i,keyword:o,it:l}=e;l.items=!0;const a=r.const("len",(0,Oe._)`${i}.length`);if(s===!1)e.setParams({len:t.length}),e.pass((0,Oe._)`${a} <= ${t.length}`);else if(typeof s=="object"&&!(0,Ct.alwaysValidSchema)(l,s)){const d=r.var("valid",(0,Oe._)`${a} <= ${t.length}`);r.if((0,Oe.not)(d),()=>c(d)),e.ok(d)}function c(d){r.forRange("i",t.length,a,m=>{e.subschema({keyword:o,dataProp:m,dataPropType:Ct.Type.Num},d),l.allErrors||r.if((0,Oe.not)(d),()=>r.break())})}}Ue.validateAdditionalItems=mn;Ue.default=Oa;var or={},ze={};Object.defineProperty(ze,"__esModule",{value:!0});ze.validateTuple=void 0;const Mr=K,ct=C,Ta=F,Ra={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(e){const{schema:t,it:r}=e;if(Array.isArray(t))return pn(e,"additionalItems",t);r.items=!0,!(0,ct.alwaysValidSchema)(r,t)&&e.ok((0,Ta.validateArray)(e))}};function pn(e,t,r=e.schema){const{gen:s,parentSchema:i,data:o,keyword:l,it:a}=e;m(i),a.opts.unevaluated&&r.length&&a.items!==!0&&(a.items=ct.mergeEvaluated.items(s,r.length,a.items));const c=s.name("valid"),d=s.const("len",(0,Mr._)`${o}.length`);r.forEach((v,P)=>{(0,ct.alwaysValidSchema)(a,v)||(s.if((0,Mr._)`${d} > ${P}`,()=>e.subschema({keyword:l,schemaProp:P,dataProp:P},c)),e.ok(c))});function m(v){const{opts:P,errSchemaPath:b}=a,$=r.length,w=$===v.minItems&&($===v.maxItems||v[t]===!1);if(P.strictTuples&&!w){const p=`"${l}" is ${$}-tuple, but minItems or maxItems/${t} are not specified or different at path "${b}"`;(0,ct.checkStrictMode)(a,p,P.strictTuples)}}}ze.validateTuple=pn;ze.default=Ra;Object.defineProperty(or,"__esModule",{value:!0});const Ca=ze,Ia={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:e=>(0,Ca.validateTuple)(e,"items")};or.default=Ia;var ir={};Object.defineProperty(ir,"__esModule",{value:!0});const Ar=K,Ma=C,Aa=F,Da=Ue,Va={message:({params:{len:e}})=>(0,Ar.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,Ar._)`{limit: ${e}}`},qa={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:Va,code(e){const{schema:t,parentSchema:r,it:s}=e,{prefixItems:i}=r;s.items=!0,!(0,Ma.alwaysValidSchema)(s,t)&&(i?(0,Da.validateAdditionalItems)(e,i):e.ok((0,Aa.validateArray)(e)))}};ir.default=qa;var cr={};Object.defineProperty(cr,"__esModule",{value:!0});const ue=K,nt=C,Fa={message:({params:{min:e,max:t}})=>t===void 0?(0,ue.str)`must contain at least ${e} valid item(s)`:(0,ue.str)`must contain at least ${e} and no more than ${t} valid item(s)`,params:({params:{min:e,max:t}})=>t===void 0?(0,ue._)`{minContains: ${e}}`:(0,ue._)`{minContains: ${e}, maxContains: ${t}}`},Ka={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:Fa,code(e){const{gen:t,schema:r,parentSchema:s,data:i,it:o}=e;let l,a;const{minContains:c,maxContains:d}=s;o.opts.next?(l=c===void 0?1:c,a=d):l=1;const m=t.const("len",(0,ue._)`${i}.length`);if(e.setParams({min:l,max:a}),a===void 0&&l===0){(0,nt.checkStrictMode)(o,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(a!==void 0&&l>a){(0,nt.checkStrictMode)(o,'"minContains" > "maxContains" is always invalid'),e.fail();return}if((0,nt.alwaysValidSchema)(o,r)){let w=(0,ue._)`${m} >= ${l}`;a!==void 0&&(w=(0,ue._)`${w} && ${m} <= ${a}`),e.pass(w);return}o.items=!0;const v=t.name("valid");a===void 0&&l===1?b(v,()=>t.if(v,()=>t.break())):l===0?(t.let(v,!0),a!==void 0&&t.if((0,ue._)`${i}.length > 0`,P)):(t.let(v,!1),P()),e.result(v,()=>e.reset());function P(){const w=t.name("_valid"),p=t.let("count",0);b(w,()=>t.if(w,()=>$(p)))}function b(w,p){t.forRange("i",0,m,f=>{e.subschema({keyword:"contains",dataProp:f,dataPropType:nt.Type.Num,compositeRule:!0},w),p()})}function $(w){t.code((0,ue._)`${w}++`),a===void 0?t.if((0,ue._)`${w} >= ${l}`,()=>t.assign(v,!0).break()):(t.if((0,ue._)`${w} > ${a}`,()=>t.assign(v,!1).break()),l===1?t.assign(v,!0):t.if((0,ue._)`${w} >= ${l}`,()=>t.assign(v,!0)))}}};cr.default=Ka;var yn={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateSchemaDeps=e.validatePropertyDeps=e.error=void 0;const t=K,r=C,s=F;e.error={message:({params:{property:c,depsCount:d,deps:m}})=>{const v=d===1?"property":"properties";return(0,t.str)`must have ${v} ${m} when property ${c} is present`},params:({params:{property:c,depsCount:d,deps:m,missingProperty:v}})=>(0,t._)`{property: ${c},
    missingProperty: ${v},
    depsCount: ${d},
    deps: ${m}}`};const i={keyword:"dependencies",type:"object",schemaType:"object",error:e.error,code(c){const[d,m]=o(c);l(c,d),a(c,m)}};function o({schema:c}){const d={},m={};for(const v in c){if(v==="__proto__")continue;const P=Array.isArray(c[v])?d:m;P[v]=c[v]}return[d,m]}function l(c,d=c.schema){const{gen:m,data:v,it:P}=c;if(Object.keys(d).length===0)return;const b=m.let("missing");for(const $ in d){const w=d[$];if(w.length===0)continue;const p=(0,s.propertyInData)(m,v,$,P.opts.ownProperties);c.setParams({property:$,depsCount:w.length,deps:w.join(", ")}),P.allErrors?m.if(p,()=>{for(const f of w)(0,s.checkReportMissingProp)(c,f)}):(m.if((0,t._)`${p} && (${(0,s.checkMissingProp)(c,w,b)})`),(0,s.reportMissingProp)(c,b),m.else())}}e.validatePropertyDeps=l;function a(c,d=c.schema){const{gen:m,data:v,keyword:P,it:b}=c,$=m.name("valid");for(const w in d)(0,r.alwaysValidSchema)(b,d[w])||(m.if((0,s.propertyInData)(m,v,w,b.opts.ownProperties),()=>{const p=c.subschema({keyword:P,schemaProp:w},$);c.mergeValidEvaluated(p,$)},()=>m.var($,!0)),c.ok($))}e.validateSchemaDeps=a,e.default=i})(yn);var lr={};Object.defineProperty(lr,"__esModule",{value:!0});const $n=K,Ua=C,za={message:"property name must be valid",params:({params:e})=>(0,$n._)`{propertyName: ${e.propertyName}}`},La={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:za,code(e){const{gen:t,schema:r,data:s,it:i}=e;if((0,Ua.alwaysValidSchema)(i,r))return;const o=t.name("valid");t.forIn("key",s,l=>{e.setParams({propertyName:l}),e.subschema({keyword:"propertyNames",data:l,dataTypes:["string"],propertyName:l,compositeRule:!0},o),t.if((0,$n.not)(o),()=>{e.error(!0),i.allErrors||t.break()})}),e.ok(o)}};lr.default=La;var $t={};Object.defineProperty($t,"__esModule",{value:!0});const st=F,ye=K,Ga=_e,at=C,Ja={message:"must NOT have additional properties",params:({params:e})=>(0,ye._)`{additionalProperty: ${e.additionalProperty}}`},Ha={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:Ja,code(e){const{gen:t,schema:r,parentSchema:s,data:i,errsCount:o,it:l}=e;if(!o)throw new Error("ajv implementation error");const{allErrors:a,opts:c}=l;if(l.props=!0,c.removeAdditional!=="all"&&(0,at.alwaysValidSchema)(l,r))return;const d=(0,st.allSchemaProperties)(s.properties),m=(0,st.allSchemaProperties)(s.patternProperties);v(),e.ok((0,ye._)`${o} === ${Ga.default.errors}`);function v(){t.forIn("key",i,p=>{!d.length&&!m.length?$(p):t.if(P(p),()=>$(p))})}function P(p){let f;if(d.length>8){const E=(0,at.schemaRefOrVal)(l,s.properties,"properties");f=(0,st.isOwnProperty)(t,E,p)}else d.length?f=(0,ye.or)(...d.map(E=>(0,ye._)`${p} === ${E}`)):f=ye.nil;return m.length&&(f=(0,ye.or)(f,...m.map(E=>(0,ye._)`${(0,st.usePattern)(e,E)}.test(${p})`))),(0,ye.not)(f)}function b(p){t.code((0,ye._)`delete ${i}[${p}]`)}function $(p){if(c.removeAdditional==="all"||c.removeAdditional&&r===!1){b(p);return}if(r===!1){e.setParams({additionalProperty:p}),e.error(),a||t.break();return}if(typeof r=="object"&&!(0,at.alwaysValidSchema)(l,r)){const f=t.name("valid");c.removeAdditional==="failing"?(w(p,f,!1),t.if((0,ye.not)(f),()=>{e.reset(),b(p)})):(w(p,f),a||t.if((0,ye.not)(f),()=>t.break()))}}function w(p,f,E){const j={keyword:"additionalProperties",dataProp:p,dataPropType:at.Type.Str};E===!1&&Object.assign(j,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema(j,f)}}};$t.default=Ha;var ur={};Object.defineProperty(ur,"__esModule",{value:!0});const Ba=mt(),Dr=F,St=C,Vr=$t,Wa={keyword:"properties",type:"object",schemaType:"object",code(e){const{gen:t,schema:r,parentSchema:s,data:i,it:o}=e;o.opts.removeAdditional==="all"&&s.additionalProperties===void 0&&Vr.default.code(new Ba.KeywordCxt(o,Vr.default,"additionalProperties"));const l=(0,Dr.allSchemaProperties)(r);for(const v of l)o.definedProperties.add(v);o.opts.unevaluated&&l.length&&o.props!==!0&&(o.props=St.mergeEvaluated.props(t,(0,St.toHash)(l),o.props));const a=l.filter(v=>!(0,St.alwaysValidSchema)(o,r[v]));if(a.length===0)return;const c=t.name("valid");for(const v of a)d(v)?m(v):(t.if((0,Dr.propertyInData)(t,i,v,o.opts.ownProperties)),m(v),o.allErrors||t.else().var(c,!0),t.endIf()),e.it.definedProperties.add(v),e.ok(c);function d(v){return o.opts.useDefaults&&!o.compositeRule&&r[v].default!==void 0}function m(v){e.subschema({keyword:"properties",schemaProp:v,dataProp:v},c)}}};ur.default=Wa;var dr={};Object.defineProperty(dr,"__esModule",{value:!0});const qr=F,ot=K,Fr=C,Kr=C,Qa={keyword:"patternProperties",type:"object",schemaType:"object",code(e){const{gen:t,schema:r,data:s,parentSchema:i,it:o}=e,{opts:l}=o,a=(0,qr.allSchemaProperties)(r),c=a.filter(w=>(0,Fr.alwaysValidSchema)(o,r[w]));if(a.length===0||c.length===a.length&&(!o.opts.unevaluated||o.props===!0))return;const d=l.strictSchema&&!l.allowMatchingProperties&&i.properties,m=t.name("valid");o.props!==!0&&!(o.props instanceof ot.Name)&&(o.props=(0,Kr.evaluatedPropsToName)(t,o.props));const{props:v}=o;P();function P(){for(const w of a)d&&b(w),o.allErrors?$(w):(t.var(m,!0),$(w),t.if(m))}function b(w){for(const p in d)new RegExp(w).test(p)&&(0,Fr.checkStrictMode)(o,`property ${p} matches pattern ${w} (use allowMatchingProperties)`)}function $(w){t.forIn("key",s,p=>{t.if((0,ot._)`${(0,qr.usePattern)(e,w)}.test(${p})`,()=>{const f=c.includes(w);f||e.subschema({keyword:"patternProperties",schemaProp:w,dataProp:p,dataPropType:Kr.Type.Str},m),o.opts.unevaluated&&v!==!0?t.assign((0,ot._)`${v}[${p}]`,!0):!f&&!o.allErrors&&t.if((0,ot.not)(m),()=>t.break())})})}}};dr.default=Qa;var fr={};Object.defineProperty(fr,"__esModule",{value:!0});const Xa=C,Ya={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(e){const{gen:t,schema:r,it:s}=e;if((0,Xa.alwaysValidSchema)(s,r)){e.fail();return}const i=t.name("valid");e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},i),e.failResult(i,()=>e.reset(),()=>e.error())},error:{message:"must NOT be valid"}};fr.default=Ya;var hr={};Object.defineProperty(hr,"__esModule",{value:!0});const Za=F,xa={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:Za.validateUnion,error:{message:"must match a schema in anyOf"}};hr.default=xa;var mr={};Object.defineProperty(mr,"__esModule",{value:!0});const lt=K,eo=C,to={message:"must match exactly one schema in oneOf",params:({params:e})=>(0,lt._)`{passingSchemas: ${e.passing}}`},ro={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:to,code(e){const{gen:t,schema:r,parentSchema:s,it:i}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");if(i.opts.discriminator&&s.discriminator)return;const o=r,l=t.let("valid",!1),a=t.let("passing",null),c=t.name("_valid");e.setParams({passing:a}),t.block(d),e.result(l,()=>e.reset(),()=>e.error(!0));function d(){o.forEach((m,v)=>{let P;(0,eo.alwaysValidSchema)(i,m)?t.var(c,!0):P=e.subschema({keyword:"oneOf",schemaProp:v,compositeRule:!0},c),v>0&&t.if((0,lt._)`${c} && ${l}`).assign(l,!1).assign(a,(0,lt._)`[${a}, ${v}]`).else(),t.if(c,()=>{t.assign(l,!0),t.assign(a,v),P&&e.mergeEvaluated(P,lt.Name)})})}}};mr.default=ro;var pr={};Object.defineProperty(pr,"__esModule",{value:!0});const no=C,so={keyword:"allOf",schemaType:"array",code(e){const{gen:t,schema:r,it:s}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");const i=t.name("valid");r.forEach((o,l)=>{if((0,no.alwaysValidSchema)(s,o))return;const a=e.subschema({keyword:"allOf",schemaProp:l},i);e.ok(i),e.mergeEvaluated(a)})}};pr.default=so;var yr={};Object.defineProperty(yr,"__esModule",{value:!0});const ht=K,_n=C,ao={message:({params:e})=>(0,ht.str)`must match "${e.ifClause}" schema`,params:({params:e})=>(0,ht._)`{failingKeyword: ${e.ifClause}}`},oo={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:ao,code(e){const{gen:t,parentSchema:r,it:s}=e;r.then===void 0&&r.else===void 0&&(0,_n.checkStrictMode)(s,'"if" without "then" and "else" is ignored');const i=Ur(s,"then"),o=Ur(s,"else");if(!i&&!o)return;const l=t.let("valid",!0),a=t.name("_valid");if(c(),e.reset(),i&&o){const m=t.let("ifClause");e.setParams({ifClause:m}),t.if(a,d("then",m),d("else",m))}else i?t.if(a,d("then")):t.if((0,ht.not)(a),d("else"));e.pass(l,()=>e.error(!0));function c(){const m=e.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},a);e.mergeEvaluated(m)}function d(m,v){return()=>{const P=e.subschema({keyword:m},a);t.assign(l,a),e.mergeValidEvaluated(P,l),v?t.assign(v,(0,ht._)`${m}`):e.setParams({ifClause:m})}}}};function Ur(e,t){const r=e.schema[t];return r!==void 0&&!(0,_n.alwaysValidSchema)(e,r)}yr.default=oo;var $r={};Object.defineProperty($r,"__esModule",{value:!0});const io=C,co={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:e,parentSchema:t,it:r}){t.if===void 0&&(0,io.checkStrictMode)(r,`"${e}" without "if" is ignored`)}};$r.default=co;Object.defineProperty(ar,"__esModule",{value:!0});const lo=Ue,uo=or,fo=ze,ho=ir,mo=cr,po=yn,yo=lr,$o=$t,_o=ur,vo=dr,go=fr,wo=hr,bo=mr,Eo=pr,Po=yr,So=$r;function No(e=!1){const t=[go.default,wo.default,bo.default,Eo.default,Po.default,So.default,yo.default,$o.default,po.default,_o.default,vo.default];return e?t.push(uo.default,ho.default):t.push(lo.default,fo.default),t.push(mo.default),t}ar.default=No;var _r={},vr={};Object.defineProperty(vr,"__esModule",{value:!0});const W=K,ko={message:({schemaCode:e})=>(0,W.str)`must match format "${e}"`,params:({schemaCode:e})=>(0,W._)`{format: ${e}}`},jo={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:ko,code(e,t){const{gen:r,data:s,$data:i,schema:o,schemaCode:l,it:a}=e,{opts:c,errSchemaPath:d,schemaEnv:m,self:v}=a;if(!c.validateFormats)return;i?P():b();function P(){const $=r.scopeValue("formats",{ref:v.formats,code:c.code.formats}),w=r.const("fDef",(0,W._)`${$}[${l}]`),p=r.let("fType"),f=r.let("format");r.if((0,W._)`typeof ${w} == "object" && !(${w} instanceof RegExp)`,()=>r.assign(p,(0,W._)`${w}.type || "string"`).assign(f,(0,W._)`${w}.validate`),()=>r.assign(p,(0,W._)`"string"`).assign(f,w)),e.fail$data((0,W.or)(E(),j()));function E(){return c.strictSchema===!1?W.nil:(0,W._)`${l} && !${f}`}function j(){const R=m.$async?(0,W._)`(${w}.async ? await ${f}(${s}) : ${f}(${s}))`:(0,W._)`${f}(${s})`,I=(0,W._)`(typeof ${f} == "function" ? ${R} : ${f}.test(${s}))`;return(0,W._)`${f} && ${f} !== true && ${p} === ${t} && !${I}`}}function b(){const $=v.formats[o];if(!$){E();return}if($===!0)return;const[w,p,f]=j($);w===t&&e.pass(R());function E(){if(c.strictSchema===!1){v.logger.warn(I());return}throw new Error(I());function I(){return`unknown format "${o}" ignored in schema at path "${d}"`}}function j(I){const z=I instanceof RegExp?(0,W.regexpCode)(I):c.code.formats?(0,W._)`${c.code.formats}${(0,W.getProperty)(o)}`:void 0,G=r.scopeValue("formats",{key:o,ref:I,code:z});return typeof I=="object"&&!(I instanceof RegExp)?[I.type||"string",I.validate,(0,W._)`${G}.validate`]:["string",I,G]}function R(){if(typeof $=="object"&&!($ instanceof RegExp)&&$.async){if(!m.$async)throw new Error("async format in sync schema");return(0,W._)`await ${f}(${s})`}return typeof p=="function"?(0,W._)`${f}(${s})`:(0,W._)`${f}.test(${s})`}}}};vr.default=jo;Object.defineProperty(_r,"__esModule",{value:!0});const Oo=vr,To=[Oo.default];_r.default=To;var Fe={};Object.defineProperty(Fe,"__esModule",{value:!0});Fe.contentVocabulary=Fe.metadataVocabulary=void 0;Fe.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];Fe.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"];Object.defineProperty(Gt,"__esModule",{value:!0});const Ro=Jt,Co=Bt,Io=ar,Mo=_r,zr=Fe,Ao=[Ro.default,Co.default,(0,Io.default)(),Mo.default,zr.metadataVocabulary,zr.contentVocabulary];Gt.default=Ao;var gr={},_t={};Object.defineProperty(_t,"__esModule",{value:!0});_t.DiscrError=void 0;var Lr;(function(e){e.Tag="tag",e.Mapping="mapping"})(Lr||(_t.DiscrError=Lr={}));Object.defineProperty(gr,"__esModule",{value:!0});const De=K,It=_t,Gr=ie,Do=Ke,Vo=C,qo={message:({params:{discrError:e,tagName:t}})=>e===It.DiscrError.Tag?`tag "${t}" must be string`:`value of tag "${t}" must be in oneOf`,params:({params:{discrError:e,tag:t,tagName:r}})=>(0,De._)`{error: ${e}, tag: ${r}, tagValue: ${t}}`},Fo={keyword:"discriminator",type:"object",schemaType:"object",error:qo,code(e){const{gen:t,data:r,schema:s,parentSchema:i,it:o}=e,{oneOf:l}=i;if(!o.opts.discriminator)throw new Error("discriminator: requires discriminator option");const a=s.propertyName;if(typeof a!="string")throw new Error("discriminator: requires propertyName");if(s.mapping)throw new Error("discriminator: mapping is not supported");if(!l)throw new Error("discriminator: requires oneOf keyword");const c=t.let("valid",!1),d=t.const("tag",(0,De._)`${r}${(0,De.getProperty)(a)}`);t.if((0,De._)`typeof ${d} == "string"`,()=>m(),()=>e.error(!1,{discrError:It.DiscrError.Tag,tag:d,tagName:a})),e.ok(c);function m(){const b=P();t.if(!1);for(const $ in b)t.elseIf((0,De._)`${d} === ${$}`),t.assign(c,v(b[$]));t.else(),e.error(!1,{discrError:It.DiscrError.Mapping,tag:d,tagName:a}),t.endIf()}function v(b){const $=t.name("valid"),w=e.subschema({keyword:"oneOf",schemaProp:b},$);return e.mergeEvaluated(w,De.Name),$}function P(){var b;const $={},w=f(i);let p=!0;for(let R=0;R<l.length;R++){let I=l[R];if(I!=null&&I.$ref&&!(0,Vo.schemaHasRulesButRef)(I,o.self.RULES)){const G=I.$ref;if(I=Gr.resolveRef.call(o.self,o.schemaEnv.root,o.baseId,G),I instanceof Gr.SchemaEnv&&(I=I.schema),I===void 0)throw new Do.default(o.opts.uriResolver,o.baseId,G)}const z=(b=I==null?void 0:I.properties)===null||b===void 0?void 0:b[a];if(typeof z!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${a}"`);p=p&&(w||f(I)),E(z,R)}if(!p)throw new Error(`discriminator: "${a}" must be required`);return $;function f({required:R}){return Array.isArray(R)&&R.includes(a)}function E(R,I){if(R.const)j(R.const,I);else if(R.enum)for(const z of R.enum)j(z,I);else throw new Error(`discriminator: "properties/${a}" must have "const" or "enum"`)}function j(R,I){if(typeof R!="string"||R in $)throw new Error(`discriminator: "${a}" values must be unique strings`);$[R]=I}}}};gr.default=Fo;const Ko="http://json-schema.org/draft-07/schema#",Uo="http://json-schema.org/draft-07/schema#",zo="Core schema meta-schema",Lo={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},Go=["object","boolean"],Jo={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},Ho={$schema:Ko,$id:Uo,title:zo,definitions:Lo,type:Go,properties:Jo,default:!0};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=t.Ajv=void 0;const r=Hr,s=Gt,i=gr,o=Ho,l=["/properties"],a="http://json-schema.org/draft-07/schema";class c extends r.default{_addVocabularies(){super._addVocabularies(),s.default.forEach($=>this.addVocabulary($)),this.opts.discriminator&&this.addKeyword(i.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const $=this.opts.$data?this.$dataMetaSchema(o,l):o;this.addMetaSchema($,a,!1),this.refs["http://json-schema.org/schema"]=a}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(a)?a:void 0)}}t.Ajv=c,e.exports=t=c,e.exports.Ajv=c,Object.defineProperty(t,"__esModule",{value:!0}),t.default=c;var d=mt();Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return d.KeywordCxt}});var m=K;Object.defineProperty(t,"_",{enumerable:!0,get:function(){return m._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return m.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return m.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return m.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return m.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return m.CodeGen}});var v=Ut();Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return v.default}});var P=Ke;Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return P.default}})})(Nt,Nt.exports);var Bo=Nt.exports;const xo=bn(Bo);export{xo as A,Zo as a,Yo as c,bn as g};
