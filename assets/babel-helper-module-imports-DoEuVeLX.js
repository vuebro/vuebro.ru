import{r as T}from"./assert-DVti1A0a.js";import{r as F}from"./babel-types-CE9sEDWp.js";var B={},w={},P={},L;function W(){if(L)return P;L=1,Object.defineProperty(P,"__esModule",{value:!0}),P.default=void 0;var f=T(),d=F();const{callExpression:I,cloneNode:_,expressionStatement:b,identifier:h,importDeclaration:y,importDefaultSpecifier:p,importNamespaceSpecifier:u,importSpecifier:c,memberExpression:m,stringLiteral:S,variableDeclaration:q,variableDeclarator:E}=d;class l{constructor(e,t,r){this._statements=[],this._resultName=null,this._importedSource=void 0,this._scope=t,this._hub=r,this._importedSource=e}done(){return{statements:this._statements,resultName:this._resultName}}import(){return this._statements.push(y([],S(this._importedSource))),this}require(){return this._statements.push(b(I(h("require"),[S(this._importedSource)]))),this}namespace(e="namespace"){const t=this._scope.generateUidIdentifier(e),r=this._statements[this._statements.length-1];return f(r.type==="ImportDeclaration"),f(r.specifiers.length===0),r.specifiers=[u(t)],this._resultName=_(t),this}default(e){const t=this._scope.generateUidIdentifier(e),r=this._statements[this._statements.length-1];return f(r.type==="ImportDeclaration"),f(r.specifiers.length===0),r.specifiers=[p(t)],this._resultName=_(t),this}named(e,t){if(t==="default")return this.default(e);const r=this._scope.generateUidIdentifier(e),n=this._statements[this._statements.length-1];return f(n.type==="ImportDeclaration"),f(n.specifiers.length===0),n.specifiers=[c(r,h(t))],this._resultName=_(r),this}var(e){const t=this._scope.generateUidIdentifier(e);let r=this._statements[this._statements.length-1];return r.type!=="ExpressionStatement"&&(f(this._resultName),r=b(this._resultName),this._statements.push(r)),this._statements[this._statements.length-1]=q("var",[E(t,r.expression)]),this._resultName=_(t),this}defaultInterop(){return this._interop(this._hub.addHelper("interopRequireDefault"))}wildcardInterop(){return this._interop(this._hub.addHelper("interopRequireWildcard"))}_interop(e){const t=this._statements[this._statements.length-1];return t.type==="ExpressionStatement"?t.expression=I(e,[t.expression]):t.type==="VariableDeclaration"?(f(t.declarations.length===1),t.declarations[0].init=I(e,[t.declarations[0].init])):f.fail("Unexpected type."),this}prop(e){const t=this._statements[this._statements.length-1];return t.type==="ExpressionStatement"?t.expression=m(t.expression,h(e)):t.type==="VariableDeclaration"?(f(t.declarations.length===1),t.declarations[0].init=m(t.declarations[0].init,h(e))):f.fail("Unexpected type:"+t.type),this}read(e){this._resultName=m(this._resultName,h(e))}}return P.default=l,P}var x={},A;function V(){if(A)return x;A=1,Object.defineProperty(x,"__esModule",{value:!0}),x.default=f;function f(d){return d.node.sourceType==="module"}return x}var $;function G(){if($)return w;$=1,Object.defineProperty(w,"__esModule",{value:!0}),w.default=void 0;var f=T(),d=F(),I=W(),_=V();const{identifier:b,importSpecifier:h,numericLiteral:y,sequenceExpression:p,isImportDeclaration:u}=d;class c{constructor(s,e,t){this._defaultOpts={importedSource:null,importedType:"commonjs",importedInterop:"babel",importingInterop:"babel",ensureLiveReference:!1,ensureNoContext:!1,importPosition:"before"};const r=s.find(n=>n.isProgram());this._programPath=r,this._programScope=r.scope,this._hub=r.hub,this._defaultOpts=this._applyDefaults(e,t,!0)}addDefault(s,e){return this.addNamed("default",s,e)}addNamed(s,e,t){return f(typeof s=="string"),this._generateImport(this._applyDefaults(e,t),s)}addNamespace(s,e){return this._generateImport(this._applyDefaults(s,e),null)}addSideEffect(s,e){return this._generateImport(this._applyDefaults(s,e),void 0)}_applyDefaults(s,e,t=!1){let r;return typeof s=="string"?r=Object.assign({},this._defaultOpts,{importedSource:s},e):(f(!e,"Unexpected secondary arguments."),r=Object.assign({},this._defaultOpts,s)),!t&&e&&(e.nameHint!==void 0&&(r.nameHint=e.nameHint),e.blockHoist!==void 0&&(r.blockHoist=e.blockHoist)),r}_generateImport(s,e){const t=e==="default",r=!!e&&!t,n=e===null,{importedSource:o,importedType:g,importedInterop:v,importingInterop:U,ensureLiveReference:D,ensureNoContext:K,nameHint:R,importPosition:k,blockHoist:z}=s;let a=R||e;const O=(0,_.default)(this._programPath),j=O&&U==="node",N=O&&U==="babel";if(k==="after"&&!O)throw new Error('"importPosition": "after" is only supported in modules');const i=new I.default(o,this._programScope,this._hub);if(g==="es6"){if(!j&&!N)throw new Error("Cannot import an ES6 module from CommonJS");i.import(),n?i.namespace(R||o):(t||r)&&i.named(a,e)}else{if(g!=="commonjs")throw new Error(`Unexpected interopType "${g}"`);if(v==="babel")if(j){a=a!=="default"?a:o;const M=`${o}$es6Default`;i.import(),n?i.default(M).var(a||o).wildcardInterop():t?D?i.default(M).var(a||o).defaultInterop().read("default"):i.default(M).var(a).defaultInterop().prop(e):r&&i.default(M).read(e)}else N?(i.import(),n?i.namespace(a||o):(t||r)&&i.named(a,e)):(i.require(),n?i.var(a||o).wildcardInterop():(t||r)&&D?t?(a=a!=="default"?a:o,i.var(a).read(e),i.defaultInterop()):i.var(o).read(e):t?i.var(a).defaultInterop().prop(e):r&&i.var(a).prop(e));else if(v==="compiled")j?(i.import(),n?i.default(a||o):(t||r)&&i.default(o).read(a)):N?(i.import(),n?i.namespace(a||o):(t||r)&&i.named(a,e)):(i.require(),n?i.var(a||o):(t||r)&&(D?i.var(o).read(a):i.prop(e).var(a)));else if(v==="uncompiled"){if(t&&D)throw new Error("No live reference for commonjs default");j?(i.import(),n?i.default(a||o):t?i.default(a):r&&i.default(o).read(a)):N?(i.import(),n?i.default(a||o):t?i.default(a):r&&i.named(a,e)):(i.require(),n?i.var(a||o):t?i.var(a):r&&(D?i.var(o).read(a):i.var(a).prop(e)))}else throw new Error(`Unknown importedInterop "${v}".`)}const{statements:J,resultName:H}=i.done();return this._insertStatements(J,k,z),(t||r)&&K&&H.type!=="Identifier"?p([y(0),H]):H}_insertStatements(s,e="before",t=3){if(e==="after"){if(this._insertStatementsAfter(s))return}else if(this._insertStatementsBefore(s,t))return;this._programPath.unshiftContainer("body",s)}_insertStatementsBefore(s,e){if(s.length===1&&u(s[0])&&m(s[0])){const r=this._programPath.get("body").find(n=>n.isImportDeclaration()&&m(n.node));if((r==null?void 0:r.node.source.value)===s[0].source.value&&E(r.node,s[0]))return!0}s.forEach(r=>{r._blockHoist=e});const t=this._programPath.get("body").find(r=>{const n=r.node._blockHoist;return Number.isFinite(n)&&n<4});return t?(t.insertBefore(s),!0):!1}_insertStatementsAfter(s){const e=new Set(s),t=new Map;for(const n of s)if(u(n)&&m(n)){const o=n.source.value;t.has(o)||t.set(o,[]),t.get(o).push(n)}let r=null;for(const n of this._programPath.get("body"))if(n.isImportDeclaration()&&m(n.node)){r=n;const o=n.node.source.value,g=t.get(o);if(!g)continue;for(const v of g)e.has(v)&&E(n.node,v)&&e.delete(v)}return e.size===0?!0:(r&&r.insertAfter(Array.from(e)),!!r)}}w.default=c;function m(l){return l.importKind!=="type"&&l.importKind!=="typeof"}function S(l){return l.specifiers.length===1&&l.specifiers[0].type==="ImportNamespaceSpecifier"||l.specifiers.length===2&&l.specifiers[1].type==="ImportNamespaceSpecifier"}function q(l){return l.specifiers.length>0&&l.specifiers[0].type==="ImportDefaultSpecifier"}function E(l,s){return l.specifiers.length?s.specifiers.length?S(l)||S(s)?!1:(q(s)&&(q(l)?s.specifiers[0]=h(s.specifiers[0].local,b("default")):l.specifiers.unshift(s.specifiers.shift())),l.specifiers.push(...s.specifiers),!0):!0:(l.specifiers=s.specifiers,!0)}return w}var C;function Q(){return C||(C=1,function(f){Object.defineProperty(f,"__esModule",{value:!0}),Object.defineProperty(f,"ImportInjector",{enumerable:!0,get:function(){return d.default}}),f.addDefault=_,f.addNamed=b,f.addNamespace=h,f.addSideEffect=y,Object.defineProperty(f,"isModule",{enumerable:!0,get:function(){return I.default}});var d=G(),I=V();function _(p,u,c){return new d.default(p).addDefault(u,c)}function b(p,u,c,m){return new d.default(p).addNamed(u,c,m)}function h(p,u,c){return new d.default(p).addNamespace(u,c)}function y(p,u,c){return new d.default(p).addSideEffect(u,c)}}(B)),B}var Z=Q();export{Z as l,Q as r};
