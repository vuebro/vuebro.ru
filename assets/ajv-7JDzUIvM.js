import{f as Lr}from"./fast-deep-equal-DhA4GXGS.js";import{j as yn}from"./json-schema-traverse-DW8_mBst.js";import{f as $n}from"./fast-uri-WMTOr92D.js";var Ao=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function _n(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Do(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function s(){return this instanceof s?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(s){var l=Object.getOwnPropertyDescriptor(e,s);Object.defineProperty(r,s,l.get?l:{enumerable:!0,get:function(){return e[s]}})}),r}var St={exports:{}},Gr={},ge={},Se={},Ye={},U={},Xe={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.regexpCode=e.getEsmExportName=e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;class t{}e._CodeOrName=t,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class r extends t{constructor(m){if(super(),!e.IDENTIFIER.test(m))throw new Error("CodeGen: name must be a valid identifier");this.str=m}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}e.Name=r;class s extends t{constructor(m){super(),this._items=typeof m=="string"?[m]:m}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const m=this._items[0];return m===""||m==='""'}get str(){var m;return(m=this._str)!==null&&m!==void 0?m:this._str=this._items.reduce((P,j)=>`${P}${j}`,"")}get names(){var m;return(m=this._names)!==null&&m!==void 0?m:this._names=this._items.reduce((P,j)=>(j instanceof r&&(P[j.str]=(P[j.str]||0)+1),P),{})}}e._Code=s,e.nil=new s("");function l(d,...m){const P=[d[0]];let j=0;for(;j<m.length;)a(P,m[j]),P.push(d[++j]);return new s(P)}e._=l;const o=new s("+");function u(d,...m){const P=[E(d[0])];let j=0;for(;j<m.length;)P.push(o),a(P,m[j]),P.push(o,E(d[++j]));return i(P),new s(P)}e.str=u;function a(d,m){m instanceof s?d.push(...m._items):m instanceof r?d.push(m):d.push(g(m))}e.addCodeArg=a;function i(d){let m=1;for(;m<d.length-1;){if(d[m]===o){const P=f(d[m-1],d[m+1]);if(P!==void 0){d.splice(m-1,3,P);continue}d[m++]="+"}m++}}function f(d,m){if(m==='""')return d;if(d==='""')return m;if(typeof d=="string")return m instanceof r||d[d.length-1]!=='"'?void 0:typeof m!="string"?`${d.slice(0,-1)}${m}"`:m[0]==='"'?d.slice(0,-1)+m.slice(1):void 0;if(typeof m=="string"&&m[0]==='"'&&!(d instanceof r))return`"${d}${m.slice(1)}`}function p(d,m){return m.emptyStr()?d:d.emptyStr()?m:u`${d}${m}`}e.strConcat=p;function g(d){return typeof d=="number"||typeof d=="boolean"||d===null?d:E(Array.isArray(d)?d.join(","):d)}function N(d){return new s(E(d))}e.stringify=N;function E(d){return JSON.stringify(d).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}e.safeStringify=E;function $(d){return typeof d=="string"&&e.IDENTIFIER.test(d)?new s(`.${d}`):l`[${d}]`}e.getProperty=$;function b(d){if(typeof d=="string"&&e.IDENTIFIER.test(d))return new s(`${d}`);throw new Error(`CodeGen: invalid export name: ${d}, use explicit $id name mapping`)}e.getEsmExportName=b;function y(d){return new s(d.toString())}e.regexpCode=y})(Xe);var Nt={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=e.UsedValueState=void 0;const t=Xe;class r extends Error{constructor(f){super(`CodeGen: "code" for ${f} not defined`),this.value=f.value}}var s;(function(i){i[i.Started=0]="Started",i[i.Completed=1]="Completed"})(s||(e.UsedValueState=s={})),e.varKinds={const:new t.Name("const"),let:new t.Name("let"),var:new t.Name("var")};class l{constructor({prefixes:f,parent:p}={}){this._names={},this._prefixes=f,this._parent=p}toName(f){return f instanceof t.Name?f:this.name(f)}name(f){return new t.Name(this._newName(f))}_newName(f){const p=this._names[f]||this._nameGroup(f);return`${f}${p.index++}`}_nameGroup(f){var p,g;if(!((g=(p=this._parent)===null||p===void 0?void 0:p._prefixes)===null||g===void 0)&&g.has(f)||this._prefixes&&!this._prefixes.has(f))throw new Error(`CodeGen: prefix "${f}" is not allowed in this scope`);return this._names[f]={prefix:f,index:0}}}e.Scope=l;class o extends t.Name{constructor(f,p){super(p),this.prefix=f}setValue(f,{property:p,itemIndex:g}){this.value=f,this.scopePath=(0,t._)`.${new t.Name(p)}[${g}]`}}e.ValueScopeName=o;const u=(0,t._)`\n`;class a extends l{constructor(f){super(f),this._values={},this._scope=f.scope,this.opts={...f,_n:f.lines?u:t.nil}}get(){return this._scope}name(f){return new o(f,this._newName(f))}value(f,p){var g;if(p.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const N=this.toName(f),{prefix:E}=N,$=(g=p.key)!==null&&g!==void 0?g:p.ref;let b=this._values[E];if(b){const m=b.get($);if(m)return m}else b=this._values[E]=new Map;b.set($,N);const y=this._scope[E]||(this._scope[E]=[]),d=y.length;return y[d]=p.ref,N.setValue(p,{property:E,itemIndex:d}),N}getValue(f,p){const g=this._values[f];if(g)return g.get(p)}scopeRefs(f,p=this._values){return this._reduceValues(p,g=>{if(g.scopePath===void 0)throw new Error(`CodeGen: name "${g}" has no value`);return(0,t._)`${f}${g.scopePath}`})}scopeCode(f=this._values,p,g){return this._reduceValues(f,N=>{if(N.value===void 0)throw new Error(`CodeGen: name "${N}" has no value`);return N.value.code},p,g)}_reduceValues(f,p,g={},N){let E=t.nil;for(const $ in f){const b=f[$];if(!b)continue;const y=g[$]=g[$]||new Map;b.forEach(d=>{if(y.has(d))return;y.set(d,s.Started);let m=p(d);if(m){const P=this.opts.es5?e.varKinds.var:e.varKinds.const;E=(0,t._)`${E}${P} ${d} = ${m};${this.opts._n}`}else if(m=N?.(d))E=(0,t._)`${E}${m}${this.opts._n}`;else throw new r(d);y.set(d,s.Completed)})}return E}}e.ValueScope=a})(Nt);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.regexpCode=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;const t=Xe,r=Nt;var s=Xe;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return s._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return s.str}}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:function(){return s.strConcat}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return s.nil}}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:function(){return s.getProperty}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return s.stringify}}),Object.defineProperty(e,"regexpCode",{enumerable:!0,get:function(){return s.regexpCode}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return s.Name}});var l=Nt;Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return l.Scope}}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:function(){return l.ValueScope}}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:function(){return l.ValueScopeName}}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:function(){return l.varKinds}}),e.operators={GT:new t._Code(">"),GTE:new t._Code(">="),LT:new t._Code("<"),LTE:new t._Code("<="),EQ:new t._Code("==="),NEQ:new t._Code("!=="),NOT:new t._Code("!"),OR:new t._Code("||"),AND:new t._Code("&&"),ADD:new t._Code("+")};class o{optimizeNodes(){return this}optimizeNames(n,c){return this}}class u extends o{constructor(n,c,S){super(),this.varKind=n,this.name=c,this.rhs=S}render({es5:n,_n:c}){const S=n?r.varKinds.var:this.varKind,M=this.rhs===void 0?"":` = ${this.rhs}`;return`${S} ${this.name}${M};`+c}optimizeNames(n,c){if(n[this.name.str])return this.rhs&&(this.rhs=Q(this.rhs,n,c)),this}get names(){return this.rhs instanceof t._CodeOrName?this.rhs.names:{}}}class a extends o{constructor(n,c,S){super(),this.lhs=n,this.rhs=c,this.sideEffects=S}render({_n:n}){return`${this.lhs} = ${this.rhs};`+n}optimizeNames(n,c){if(!(this.lhs instanceof t.Name&&!n[this.lhs.str]&&!this.sideEffects))return this.rhs=Q(this.rhs,n,c),this}get names(){const n=this.lhs instanceof t.Name?{}:{...this.lhs.names};return B(n,this.rhs)}}class i extends a{constructor(n,c,S,M){super(n,S,M),this.op=c}render({_n:n}){return`${this.lhs} ${this.op}= ${this.rhs};`+n}}class f extends o{constructor(n){super(),this.label=n,this.names={}}render({_n:n}){return`${this.label}:`+n}}class p extends o{constructor(n){super(),this.label=n,this.names={}}render({_n:n}){return`break${this.label?` ${this.label}`:""};`+n}}class g extends o{constructor(n){super(),this.error=n}render({_n:n}){return`throw ${this.error};`+n}get names(){return this.error.names}}class N extends o{constructor(n){super(),this.code=n}render({_n:n}){return`${this.code};`+n}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(n,c){return this.code=Q(this.code,n,c),this}get names(){return this.code instanceof t._CodeOrName?this.code.names:{}}}class E extends o{constructor(n=[]){super(),this.nodes=n}render(n){return this.nodes.reduce((c,S)=>c+S.render(n),"")}optimizeNodes(){const{nodes:n}=this;let c=n.length;for(;c--;){const S=n[c].optimizeNodes();Array.isArray(S)?n.splice(c,1,...S):S?n[c]=S:n.splice(c,1)}return n.length>0?this:void 0}optimizeNames(n,c){const{nodes:S}=this;let M=S.length;for(;M--;){const D=S[M];D.optimizeNames(n,c)||(ve(n,D.names),S.splice(M,1))}return S.length>0?this:void 0}get names(){return this.nodes.reduce((n,c)=>x(n,c.names),{})}}class $ extends E{render(n){return"{"+n._n+super.render(n)+"}"+n._n}}class b extends E{}class y extends ${}y.kind="else";class d extends ${constructor(n,c){super(c),this.condition=n}render(n){let c=`if(${this.condition})`+super.render(n);return this.else&&(c+="else "+this.else.render(n)),c}optimizeNodes(){super.optimizeNodes();const n=this.condition;if(n===!0)return this.nodes;let c=this.else;if(c){const S=c.optimizeNodes();c=this.else=Array.isArray(S)?new y(S):S}if(c)return n===!1?c instanceof d?c:c.nodes:this.nodes.length?this:new d(Pe(n),c instanceof d?[c]:c.nodes);if(!(n===!1||!this.nodes.length))return this}optimizeNames(n,c){var S;if(this.else=(S=this.else)===null||S===void 0?void 0:S.optimizeNames(n,c),!!(super.optimizeNames(n,c)||this.else))return this.condition=Q(this.condition,n,c),this}get names(){const n=super.names;return B(n,this.condition),this.else&&x(n,this.else.names),n}}d.kind="if";class m extends ${}m.kind="for";class P extends m{constructor(n){super(),this.iteration=n}render(n){return`for(${this.iteration})`+super.render(n)}optimizeNames(n,c){if(super.optimizeNames(n,c))return this.iteration=Q(this.iteration,n,c),this}get names(){return x(super.names,this.iteration.names)}}class j extends m{constructor(n,c,S,M){super(),this.varKind=n,this.name=c,this.from=S,this.to=M}render(n){const c=n.es5?r.varKinds.var:this.varKind,{name:S,from:M,to:D}=this;return`for(${c} ${S}=${M}; ${S}<${D}; ${S}++)`+super.render(n)}get names(){const n=B(super.names,this.from);return B(n,this.to)}}class R extends m{constructor(n,c,S,M){super(),this.loop=n,this.varKind=c,this.name=S,this.iterable=M}render(n){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(n)}optimizeNames(n,c){if(super.optimizeNames(n,c))return this.iterable=Q(this.iterable,n,c),this}get names(){return x(super.names,this.iterable.names)}}class V extends ${constructor(n,c,S){super(),this.name=n,this.args=c,this.async=S}render(n){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(n)}}V.kind="func";class q extends E{render(n){return"return "+super.render(n)}}q.kind="return";class H extends ${render(n){let c="try"+super.render(n);return this.catch&&(c+=this.catch.render(n)),this.finally&&(c+=this.finally.render(n)),c}optimizeNodes(){var n,c;return super.optimizeNodes(),(n=this.catch)===null||n===void 0||n.optimizeNodes(),(c=this.finally)===null||c===void 0||c.optimizeNodes(),this}optimizeNames(n,c){var S,M;return super.optimizeNames(n,c),(S=this.catch)===null||S===void 0||S.optimizeNames(n,c),(M=this.finally)===null||M===void 0||M.optimizeNames(n,c),this}get names(){const n=super.names;return this.catch&&x(n,this.catch.names),this.finally&&x(n,this.finally.names),n}}class W extends ${constructor(n){super(),this.error=n}render(n){return`catch(${this.error})`+super.render(n)}}W.kind="catch";class Y extends ${render(n){return"finally"+super.render(n)}}Y.kind="finally";class ee{constructor(n,c={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...c,_n:c.lines?`
`:""},this._extScope=n,this._scope=new r.Scope({parent:n}),this._nodes=[new b]}toString(){return this._root.render(this.opts)}name(n){return this._scope.name(n)}scopeName(n){return this._extScope.name(n)}scopeValue(n,c){const S=this._extScope.value(n,c);return(this._values[S.prefix]||(this._values[S.prefix]=new Set)).add(S),S}getScopeValue(n,c){return this._extScope.getValue(n,c)}scopeRefs(n){return this._extScope.scopeRefs(n,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(n,c,S,M){const D=this._scope.toName(c);return S!==void 0&&M&&(this._constants[D.str]=S),this._leafNode(new u(n,D,S)),D}const(n,c,S){return this._def(r.varKinds.const,n,c,S)}let(n,c,S){return this._def(r.varKinds.let,n,c,S)}var(n,c,S){return this._def(r.varKinds.var,n,c,S)}assign(n,c,S){return this._leafNode(new a(n,c,S))}add(n,c){return this._leafNode(new i(n,e.operators.ADD,c))}code(n){return typeof n=="function"?n():n!==t.nil&&this._leafNode(new N(n)),this}object(...n){const c=["{"];for(const[S,M]of n)c.length>1&&c.push(","),c.push(S),(S!==M||this.opts.es5)&&(c.push(":"),(0,t.addCodeArg)(c,M));return c.push("}"),new t._Code(c)}if(n,c,S){if(this._blockNode(new d(n)),c&&S)this.code(c).else().code(S).endIf();else if(c)this.code(c).endIf();else if(S)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(n){return this._elseNode(new d(n))}else(){return this._elseNode(new y)}endIf(){return this._endBlockNode(d,y)}_for(n,c){return this._blockNode(n),c&&this.code(c).endFor(),this}for(n,c){return this._for(new P(n),c)}forRange(n,c,S,M,D=this.opts.es5?r.varKinds.var:r.varKinds.let){const L=this._scope.toName(n);return this._for(new j(D,L,c,S),()=>M(L))}forOf(n,c,S,M=r.varKinds.const){const D=this._scope.toName(n);if(this.opts.es5){const L=c instanceof t.Name?c:this.var("_arr",c);return this.forRange("_i",0,(0,t._)`${L}.length`,z=>{this.var(D,(0,t._)`${L}[${z}]`),S(D)})}return this._for(new R("of",M,D,c),()=>S(D))}forIn(n,c,S,M=this.opts.es5?r.varKinds.var:r.varKinds.const){if(this.opts.ownProperties)return this.forOf(n,(0,t._)`Object.keys(${c})`,S);const D=this._scope.toName(n);return this._for(new R("in",M,D,c),()=>S(D))}endFor(){return this._endBlockNode(m)}label(n){return this._leafNode(new f(n))}break(n){return this._leafNode(new p(n))}return(n){const c=new q;if(this._blockNode(c),this.code(n),c.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(q)}try(n,c,S){if(!c&&!S)throw new Error('CodeGen: "try" without "catch" and "finally"');const M=new H;if(this._blockNode(M),this.code(n),c){const D=this.name("e");this._currNode=M.catch=new W(D),c(D)}return S&&(this._currNode=M.finally=new Y,this.code(S)),this._endBlockNode(W,Y)}throw(n){return this._leafNode(new g(n))}block(n,c){return this._blockStarts.push(this._nodes.length),n&&this.code(n).endBlock(c),this}endBlock(n){const c=this._blockStarts.pop();if(c===void 0)throw new Error("CodeGen: not in self-balancing block");const S=this._nodes.length-c;if(S<0||n!==void 0&&S!==n)throw new Error(`CodeGen: wrong number of nodes: ${S} vs ${n} expected`);return this._nodes.length=c,this}func(n,c=t.nil,S,M){return this._blockNode(new V(n,c,S)),M&&this.code(M).endFunc(),this}endFunc(){return this._endBlockNode(V)}optimize(n=1){for(;n-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(n){return this._currNode.nodes.push(n),this}_blockNode(n){this._currNode.nodes.push(n),this._nodes.push(n)}_endBlockNode(n,c){const S=this._currNode;if(S instanceof n||c&&S instanceof c)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${c?`${n.kind}/${c.kind}`:n.kind}"`)}_elseNode(n){const c=this._currNode;if(!(c instanceof d))throw new Error('CodeGen: "else" without "if"');return this._currNode=c.else=n,this}get _root(){return this._nodes[0]}get _currNode(){const n=this._nodes;return n[n.length-1]}set _currNode(n){const c=this._nodes;c[c.length-1]=n}}e.CodeGen=ee;function x(w,n){for(const c in n)w[c]=(w[c]||0)+(n[c]||0);return w}function B(w,n){return n instanceof t._CodeOrName?x(w,n.names):w}function Q(w,n,c){if(w instanceof t.Name)return S(w);if(!M(w))return w;return new t._Code(w._items.reduce((D,L)=>(L instanceof t.Name&&(L=S(L)),L instanceof t._Code?D.push(...L._items):D.push(L),D),[]));function S(D){const L=c[D.str];return L===void 0||n[D.str]!==1?D:(delete n[D.str],L)}function M(D){return D instanceof t._Code&&D._items.some(L=>L instanceof t.Name&&n[L.str]===1&&c[L.str]!==void 0)}}function ve(w,n){for(const c in n)w[c]=(w[c]||0)-(n[c]||0)}function Pe(w){return typeof w=="boolean"||typeof w=="number"||w===null?!w:(0,t._)`!${O(w)}`}e.not=Pe;const Te=_(e.operators.AND);function Ue(...w){return w.reduce(Te)}e.and=Ue;const Ce=_(e.operators.OR);function C(...w){return w.reduce(Ce)}e.or=C;function _(w){return(n,c)=>n===t.nil?c:c===t.nil?n:(0,t._)`${O(n)} ${w} ${O(c)}`}function O(w){return w instanceof t.Name?w:(0,t._)`(${w})`}})(U);var I={};Object.defineProperty(I,"__esModule",{value:!0});I.checkStrictMode=I.getErrorPath=I.Type=I.useFunc=I.setEvaluated=I.evaluatedPropsToName=I.mergeEvaluated=I.eachItem=I.unescapeJsonPointer=I.escapeJsonPointer=I.escapeFragment=I.unescapeFragment=I.schemaRefOrVal=I.schemaHasRulesButRef=I.schemaHasRules=I.checkUnknownRules=I.alwaysValidSchema=I.toHash=void 0;const J=U,vn=Xe;function gn(e){const t={};for(const r of e)t[r]=!0;return t}I.toHash=gn;function wn(e,t){return typeof t=="boolean"?t:Object.keys(t).length===0?!0:(Jr(e,t),!Hr(t,e.self.RULES.all))}I.alwaysValidSchema=wn;function Jr(e,t=e.schema){const{opts:r,self:s}=e;if(!r.strictSchema||typeof t=="boolean")return;const l=s.RULES.keywords;for(const o in t)l[o]||Qr(e,`unknown keyword: "${o}"`)}I.checkUnknownRules=Jr;function Hr(e,t){if(typeof e=="boolean")return!e;for(const r in e)if(t[r])return!0;return!1}I.schemaHasRules=Hr;function bn(e,t){if(typeof e=="boolean")return!e;for(const r in e)if(r!=="$ref"&&t.all[r])return!0;return!1}I.schemaHasRulesButRef=bn;function En({topSchemaRef:e,schemaPath:t},r,s,l){if(!l){if(typeof r=="number"||typeof r=="boolean")return r;if(typeof r=="string")return(0,J._)`${r}`}return(0,J._)`${e}${t}${(0,J.getProperty)(s)}`}I.schemaRefOrVal=En;function Pn(e){return Br(decodeURIComponent(e))}I.unescapeFragment=Pn;function Sn(e){return encodeURIComponent(It(e))}I.escapeFragment=Sn;function It(e){return typeof e=="number"?`${e}`:e.replace(/~/g,"~0").replace(/\//g,"~1")}I.escapeJsonPointer=It;function Br(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}I.unescapeJsonPointer=Br;function Nn(e,t){if(Array.isArray(e))for(const r of e)t(r);else t(e)}I.eachItem=Nn;function vr({mergeNames:e,mergeToName:t,mergeValues:r,resultToName:s}){return(l,o,u,a)=>{const i=u===void 0?o:u instanceof J.Name?(o instanceof J.Name?e(l,o,u):t(l,o,u),u):o instanceof J.Name?(t(l,u,o),o):r(o,u);return a===J.Name&&!(i instanceof J.Name)?s(l,i):i}}I.mergeEvaluated={props:vr({mergeNames:(e,t,r)=>e.if((0,J._)`${r} !== true && ${t} !== undefined`,()=>{e.if((0,J._)`${t} === true`,()=>e.assign(r,!0),()=>e.assign(r,(0,J._)`${r} || {}`).code((0,J._)`Object.assign(${r}, ${t})`))}),mergeToName:(e,t,r)=>e.if((0,J._)`${r} !== true`,()=>{t===!0?e.assign(r,!0):(e.assign(r,(0,J._)`${r} || {}`),Mt(e,r,t))}),mergeValues:(e,t)=>e===!0?!0:{...e,...t},resultToName:Wr}),items:vr({mergeNames:(e,t,r)=>e.if((0,J._)`${r} !== true && ${t} !== undefined`,()=>e.assign(r,(0,J._)`${t} === true ? true : ${r} > ${t} ? ${r} : ${t}`)),mergeToName:(e,t,r)=>e.if((0,J._)`${r} !== true`,()=>e.assign(r,t===!0?!0:(0,J._)`${r} > ${t} ? ${r} : ${t}`)),mergeValues:(e,t)=>e===!0?!0:Math.max(e,t),resultToName:(e,t)=>e.var("items",t)})};function Wr(e,t){if(t===!0)return e.var("props",!0);const r=e.var("props",(0,J._)`{}`);return t!==void 0&&Mt(e,r,t),r}I.evaluatedPropsToName=Wr;function Mt(e,t,r){Object.keys(r).forEach(s=>e.assign((0,J._)`${t}${(0,J.getProperty)(s)}`,!0))}I.setEvaluated=Mt;const gr={};function kn(e,t){return e.scopeValue("func",{ref:t,code:gr[t.code]||(gr[t.code]=new vn._Code(t.code))})}I.useFunc=kn;var kt;(function(e){e[e.Num=0]="Num",e[e.Str=1]="Str"})(kt||(I.Type=kt={}));function jn(e,t,r){if(e instanceof J.Name){const s=t===kt.Num;return r?s?(0,J._)`"[" + ${e} + "]"`:(0,J._)`"['" + ${e} + "']"`:s?(0,J._)`"/" + ${e}`:(0,J._)`"/" + ${e}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return r?(0,J.getProperty)(e).toString():"/"+It(e)}I.getErrorPath=jn;function Qr(e,t,r=e.opts.strictSchema){if(r){if(t=`strict mode: ${t}`,r===!0)throw new Error(t);e.self.logger.warn(t)}}I.checkStrictMode=Qr;var _e={};Object.defineProperty(_e,"__esModule",{value:!0});const ae=U,On={data:new ae.Name("data"),valCxt:new ae.Name("valCxt"),instancePath:new ae.Name("instancePath"),parentData:new ae.Name("parentData"),parentDataProperty:new ae.Name("parentDataProperty"),rootData:new ae.Name("rootData"),dynamicAnchors:new ae.Name("dynamicAnchors"),vErrors:new ae.Name("vErrors"),errors:new ae.Name("errors"),this:new ae.Name("this"),self:new ae.Name("self"),scope:new ae.Name("scope"),json:new ae.Name("json"),jsonPos:new ae.Name("jsonPos"),jsonLen:new ae.Name("jsonLen"),jsonPart:new ae.Name("jsonPart")};_e.default=On;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;const t=U,r=I,s=_e;e.keywordError={message:({keyword:y})=>(0,t.str)`must pass "${y}" keyword validation`},e.keyword$DataError={message:({keyword:y,schemaType:d})=>d?(0,t.str)`"${y}" keyword must be ${d} ($data)`:(0,t.str)`"${y}" keyword is invalid ($data)`};function l(y,d=e.keywordError,m,P){const{it:j}=y,{gen:R,compositeRule:V,allErrors:q}=j,H=g(y,d,m);P??(V||q)?i(R,H):f(j,(0,t._)`[${H}]`)}e.reportError=l;function o(y,d=e.keywordError,m){const{it:P}=y,{gen:j,compositeRule:R,allErrors:V}=P,q=g(y,d,m);i(j,q),R||V||f(P,s.default.vErrors)}e.reportExtraError=o;function u(y,d){y.assign(s.default.errors,d),y.if((0,t._)`${s.default.vErrors} !== null`,()=>y.if(d,()=>y.assign((0,t._)`${s.default.vErrors}.length`,d),()=>y.assign(s.default.vErrors,null)))}e.resetErrorsCount=u;function a({gen:y,keyword:d,schemaValue:m,data:P,errsCount:j,it:R}){if(j===void 0)throw new Error("ajv implementation error");const V=y.name("err");y.forRange("i",j,s.default.errors,q=>{y.const(V,(0,t._)`${s.default.vErrors}[${q}]`),y.if((0,t._)`${V}.instancePath === undefined`,()=>y.assign((0,t._)`${V}.instancePath`,(0,t.strConcat)(s.default.instancePath,R.errorPath))),y.assign((0,t._)`${V}.schemaPath`,(0,t.str)`${R.errSchemaPath}/${d}`),R.opts.verbose&&(y.assign((0,t._)`${V}.schema`,m),y.assign((0,t._)`${V}.data`,P))})}e.extendErrors=a;function i(y,d){const m=y.const("err",d);y.if((0,t._)`${s.default.vErrors} === null`,()=>y.assign(s.default.vErrors,(0,t._)`[${m}]`),(0,t._)`${s.default.vErrors}.push(${m})`),y.code((0,t._)`${s.default.errors}++`)}function f(y,d){const{gen:m,validateName:P,schemaEnv:j}=y;j.$async?m.throw((0,t._)`new ${y.ValidationError}(${d})`):(m.assign((0,t._)`${P}.errors`,d),m.return(!1))}const p={keyword:new t.Name("keyword"),schemaPath:new t.Name("schemaPath"),params:new t.Name("params"),propertyName:new t.Name("propertyName"),message:new t.Name("message"),schema:new t.Name("schema"),parentSchema:new t.Name("parentSchema")};function g(y,d,m){const{createErrors:P}=y.it;return P===!1?(0,t._)`{}`:N(y,d,m)}function N(y,d,m={}){const{gen:P,it:j}=y,R=[E(j,m),$(y,m)];return b(y,d,R),P.object(...R)}function E({errorPath:y},{instancePath:d}){const m=d?(0,t.str)`${y}${(0,r.getErrorPath)(d,r.Type.Str)}`:y;return[s.default.instancePath,(0,t.strConcat)(s.default.instancePath,m)]}function $({keyword:y,it:{errSchemaPath:d}},{schemaPath:m,parentSchema:P}){let j=P?d:(0,t.str)`${d}/${y}`;return m&&(j=(0,t.str)`${j}${(0,r.getErrorPath)(m,r.Type.Str)}`),[p.schemaPath,j]}function b(y,{params:d,message:m},P){const{keyword:j,data:R,schemaValue:V,it:q}=y,{opts:H,propertyName:W,topSchemaRef:Y,schemaPath:ee}=q;P.push([p.keyword,j],[p.params,typeof d=="function"?d(y):d||(0,t._)`{}`]),H.messages&&P.push([p.message,typeof m=="function"?m(y):m]),H.verbose&&P.push([p.schema,V],[p.parentSchema,(0,t._)`${Y}${ee}`],[s.default.data,R]),W&&P.push([p.propertyName,W])}})(Ye);var wr;function Rn(){if(wr)return Se;wr=1,Object.defineProperty(Se,"__esModule",{value:!0}),Se.boolOrEmptySchema=Se.topBoolOrEmptySchema=void 0;const e=Ye,t=U,r=_e,s={message:"boolean schema is false"};function l(a){const{gen:i,schema:f,validateName:p}=a;f===!1?u(a,!1):typeof f=="object"&&f.$async===!0?i.return(r.default.data):(i.assign((0,t._)`${p}.errors`,null),i.return(!0))}Se.topBoolOrEmptySchema=l;function o(a,i){const{gen:f,schema:p}=a;p===!1?(f.var(i,!1),u(a)):f.var(i,!0)}Se.boolOrEmptySchema=o;function u(a,i){const{gen:f,data:p}=a,g={gen:f,keyword:"false schema",data:p,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:a};(0,e.reportError)(g,s,void 0,i)}return Se}var Z={},Oe={};Object.defineProperty(Oe,"__esModule",{value:!0});Oe.getRules=Oe.isJSONType=void 0;const Tn=["string","number","integer","boolean","null","object","array"],Cn=new Set(Tn);function In(e){return typeof e=="string"&&Cn.has(e)}Oe.isJSONType=In;function Mn(){const e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...e,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}}Oe.getRules=Mn;var be={};Object.defineProperty(be,"__esModule",{value:!0});be.shouldUseRule=be.shouldUseGroup=be.schemaHasRulesForType=void 0;function An({schema:e,self:t},r){const s=t.RULES.types[r];return s&&s!==!0&&Xr(e,s)}be.schemaHasRulesForType=An;function Xr(e,t){return t.rules.some(r=>Yr(e,r))}be.shouldUseGroup=Xr;function Yr(e,t){var r;return e[t.keyword]!==void 0||((r=t.definition.implements)===null||r===void 0?void 0:r.some(s=>e[s]!==void 0))}be.shouldUseRule=Yr;Object.defineProperty(Z,"__esModule",{value:!0});Z.reportTypeError=Z.checkDataTypes=Z.checkDataType=Z.coerceAndCheckDataType=Z.getJSONTypes=Z.getSchemaTypes=Z.DataType=void 0;const Dn=Oe,Vn=be,qn=Ye,F=U,Zr=I;var De;(function(e){e[e.Correct=0]="Correct",e[e.Wrong=1]="Wrong"})(De||(Z.DataType=De={}));function Fn(e){const t=xr(e.type);if(t.includes("null")){if(e.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!t.length&&e.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');e.nullable===!0&&t.push("null")}return t}Z.getSchemaTypes=Fn;function xr(e){const t=Array.isArray(e)?e:e?[e]:[];if(t.every(Dn.isJSONType))return t;throw new Error("type must be JSONType or JSONType[]: "+t.join(","))}Z.getJSONTypes=xr;function Kn(e,t){const{gen:r,data:s,opts:l}=e,o=Un(t,l.coerceTypes),u=t.length>0&&!(o.length===0&&t.length===1&&(0,Vn.schemaHasRulesForType)(e,t[0]));if(u){const a=At(t,s,l.strictNumbers,De.Wrong);r.if(a,()=>{o.length?zn(e,t,o):Dt(e)})}return u}Z.coerceAndCheckDataType=Kn;const en=new Set(["string","number","integer","boolean","null"]);function Un(e,t){return t?e.filter(r=>en.has(r)||t==="array"&&r==="array"):[]}function zn(e,t,r){const{gen:s,data:l,opts:o}=e,u=s.let("dataType",(0,F._)`typeof ${l}`),a=s.let("coerced",(0,F._)`undefined`);o.coerceTypes==="array"&&s.if((0,F._)`${u} == 'object' && Array.isArray(${l}) && ${l}.length == 1`,()=>s.assign(l,(0,F._)`${l}[0]`).assign(u,(0,F._)`typeof ${l}`).if(At(t,l,o.strictNumbers),()=>s.assign(a,l))),s.if((0,F._)`${a} !== undefined`);for(const f of r)(en.has(f)||f==="array"&&o.coerceTypes==="array")&&i(f);s.else(),Dt(e),s.endIf(),s.if((0,F._)`${a} !== undefined`,()=>{s.assign(l,a),Ln(e,a)});function i(f){switch(f){case"string":s.elseIf((0,F._)`${u} == "number" || ${u} == "boolean"`).assign(a,(0,F._)`"" + ${l}`).elseIf((0,F._)`${l} === null`).assign(a,(0,F._)`""`);return;case"number":s.elseIf((0,F._)`${u} == "boolean" || ${l} === null
              || (${u} == "string" && ${l} && ${l} == +${l})`).assign(a,(0,F._)`+${l}`);return;case"integer":s.elseIf((0,F._)`${u} === "boolean" || ${l} === null
              || (${u} === "string" && ${l} && ${l} == +${l} && !(${l} % 1))`).assign(a,(0,F._)`+${l}`);return;case"boolean":s.elseIf((0,F._)`${l} === "false" || ${l} === 0 || ${l} === null`).assign(a,!1).elseIf((0,F._)`${l} === "true" || ${l} === 1`).assign(a,!0);return;case"null":s.elseIf((0,F._)`${l} === "" || ${l} === 0 || ${l} === false`),s.assign(a,null);return;case"array":s.elseIf((0,F._)`${u} === "string" || ${u} === "number"
              || ${u} === "boolean" || ${l} === null`).assign(a,(0,F._)`[${l}]`)}}}function Ln({gen:e,parentData:t,parentDataProperty:r},s){e.if((0,F._)`${t} !== undefined`,()=>e.assign((0,F._)`${t}[${r}]`,s))}function jt(e,t,r,s=De.Correct){const l=s===De.Correct?F.operators.EQ:F.operators.NEQ;let o;switch(e){case"null":return(0,F._)`${t} ${l} null`;case"array":o=(0,F._)`Array.isArray(${t})`;break;case"object":o=(0,F._)`${t} && typeof ${t} == "object" && !Array.isArray(${t})`;break;case"integer":o=u((0,F._)`!(${t} % 1) && !isNaN(${t})`);break;case"number":o=u();break;default:return(0,F._)`typeof ${t} ${l} ${e}`}return s===De.Correct?o:(0,F.not)(o);function u(a=F.nil){return(0,F.and)((0,F._)`typeof ${t} == "number"`,a,r?(0,F._)`isFinite(${t})`:F.nil)}}Z.checkDataType=jt;function At(e,t,r,s){if(e.length===1)return jt(e[0],t,r,s);let l;const o=(0,Zr.toHash)(e);if(o.array&&o.object){const u=(0,F._)`typeof ${t} != "object"`;l=o.null?u:(0,F._)`!${t} || ${u}`,delete o.null,delete o.array,delete o.object}else l=F.nil;o.number&&delete o.integer;for(const u in o)l=(0,F.and)(l,jt(u,t,r,s));return l}Z.checkDataTypes=At;const Gn={message:({schema:e})=>`must be ${e}`,params:({schema:e,schemaValue:t})=>typeof e=="string"?(0,F._)`{type: ${e}}`:(0,F._)`{type: ${t}}`};function Dt(e){const t=Jn(e);(0,qn.reportError)(t,Gn)}Z.reportTypeError=Dt;function Jn(e){const{gen:t,data:r,schema:s}=e,l=(0,Zr.schemaRefOrVal)(e,s,"type");return{gen:t,keyword:"type",data:r,schema:s.type,schemaCode:l,schemaValue:l,parentSchema:s,params:{},it:e}}var Le={},br;function Hn(){if(br)return Le;br=1,Object.defineProperty(Le,"__esModule",{value:!0}),Le.assignDefaults=void 0;const e=U,t=I;function r(l,o){const{properties:u,items:a}=l.schema;if(o==="object"&&u)for(const i in u)s(l,i,u[i].default);else o==="array"&&Array.isArray(a)&&a.forEach((i,f)=>s(l,f,i.default))}Le.assignDefaults=r;function s(l,o,u){const{gen:a,compositeRule:i,data:f,opts:p}=l;if(u===void 0)return;const g=(0,e._)`${f}${(0,e.getProperty)(o)}`;if(i){(0,t.checkStrictMode)(l,`default is ignored for: ${g}`);return}let N=(0,e._)`${g} === undefined`;p.useDefaults==="empty"&&(N=(0,e._)`${N} || ${g} === null || ${g} === ""`),a.if(N,(0,e._)`${g} = ${(0,e.stringify)(u)}`)}return Le}var he={},G={},Er;function $e(){if(Er)return G;Er=1,Object.defineProperty(G,"__esModule",{value:!0}),G.validateUnion=G.validateArray=G.usePattern=G.callValidateCode=G.schemaProperties=G.allSchemaProperties=G.noPropertyInData=G.propertyInData=G.isOwnProperty=G.hasPropFunc=G.reportMissingProp=G.checkMissingProp=G.checkReportMissingProp=void 0;const e=U,t=I,r=_e,s=I;function l(m,P){const{gen:j,data:R,it:V}=m;j.if(p(j,R,P,V.opts.ownProperties),()=>{m.setParams({missingProperty:(0,e._)`${P}`},!0),m.error()})}G.checkReportMissingProp=l;function o({gen:m,data:P,it:{opts:j}},R,V){return(0,e.or)(...R.map(q=>(0,e.and)(p(m,P,q,j.ownProperties),(0,e._)`${V} = ${q}`)))}G.checkMissingProp=o;function u(m,P){m.setParams({missingProperty:P},!0),m.error()}G.reportMissingProp=u;function a(m){return m.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,e._)`Object.prototype.hasOwnProperty`})}G.hasPropFunc=a;function i(m,P,j){return(0,e._)`${a(m)}.call(${P}, ${j})`}G.isOwnProperty=i;function f(m,P,j,R){const V=(0,e._)`${P}${(0,e.getProperty)(j)} !== undefined`;return R?(0,e._)`${V} && ${i(m,P,j)}`:V}G.propertyInData=f;function p(m,P,j,R){const V=(0,e._)`${P}${(0,e.getProperty)(j)} === undefined`;return R?(0,e.or)(V,(0,e.not)(i(m,P,j))):V}G.noPropertyInData=p;function g(m){return m?Object.keys(m).filter(P=>P!=="__proto__"):[]}G.allSchemaProperties=g;function N(m,P){return g(P).filter(j=>!(0,t.alwaysValidSchema)(m,P[j]))}G.schemaProperties=N;function E({schemaCode:m,data:P,it:{gen:j,topSchemaRef:R,schemaPath:V,errorPath:q},it:H},W,Y,ee){const x=ee?(0,e._)`${m}, ${P}, ${R}${V}`:P,B=[[r.default.instancePath,(0,e.strConcat)(r.default.instancePath,q)],[r.default.parentData,H.parentData],[r.default.parentDataProperty,H.parentDataProperty],[r.default.rootData,r.default.rootData]];H.opts.dynamicRef&&B.push([r.default.dynamicAnchors,r.default.dynamicAnchors]);const Q=(0,e._)`${x}, ${j.object(...B)}`;return Y!==e.nil?(0,e._)`${W}.call(${Y}, ${Q})`:(0,e._)`${W}(${Q})`}G.callValidateCode=E;const $=(0,e._)`new RegExp`;function b({gen:m,it:{opts:P}},j){const R=P.unicodeRegExp?"u":"",{regExp:V}=P.code,q=V(j,R);return m.scopeValue("pattern",{key:q.toString(),ref:q,code:(0,e._)`${V.code==="new RegExp"?$:(0,s.useFunc)(m,V)}(${j}, ${R})`})}G.usePattern=b;function y(m){const{gen:P,data:j,keyword:R,it:V}=m,q=P.name("valid");if(V.allErrors){const W=P.let("valid",!0);return H(()=>P.assign(W,!1)),W}return P.var(q,!0),H(()=>P.break()),q;function H(W){const Y=P.const("len",(0,e._)`${j}.length`);P.forRange("i",0,Y,ee=>{m.subschema({keyword:R,dataProp:ee,dataPropType:t.Type.Num},q),P.if((0,e.not)(q),W)})}}G.validateArray=y;function d(m){const{gen:P,schema:j,keyword:R,it:V}=m;if(!Array.isArray(j))throw new Error("ajv implementation error");if(j.some(Y=>(0,t.alwaysValidSchema)(V,Y))&&!V.opts.unevaluated)return;const H=P.let("valid",!1),W=P.name("_valid");P.block(()=>j.forEach((Y,ee)=>{const x=m.subschema({keyword:R,schemaProp:ee,compositeRule:!0},W);P.assign(H,(0,e._)`${H} || ${W}`),m.mergeValidEvaluated(x,W)||P.if((0,e.not)(H))})),m.result(H,()=>m.reset(),()=>m.error(!0))}return G.validateUnion=d,G}var Pr;function Bn(){if(Pr)return he;Pr=1,Object.defineProperty(he,"__esModule",{value:!0}),he.validateKeywordUsage=he.validSchemaType=he.funcKeywordCode=he.macroKeywordCode=void 0;const e=U,t=_e,r=$e(),s=Ye;function l(N,E){const{gen:$,keyword:b,schema:y,parentSchema:d,it:m}=N,P=E.macro.call(m.self,y,d,m),j=f($,b,P);m.opts.validateSchema!==!1&&m.self.validateSchema(P,!0);const R=$.name("valid");N.subschema({schema:P,schemaPath:e.nil,errSchemaPath:`${m.errSchemaPath}/${b}`,topSchemaRef:j,compositeRule:!0},R),N.pass(R,()=>N.error(!0))}he.macroKeywordCode=l;function o(N,E){var $;const{gen:b,keyword:y,schema:d,parentSchema:m,$data:P,it:j}=N;i(j,E);const R=!P&&E.compile?E.compile.call(j.self,d,m,j):E.validate,V=f(b,y,R),q=b.let("valid");N.block$data(q,H),N.ok(($=E.valid)!==null&&$!==void 0?$:q);function H(){if(E.errors===!1)ee(),E.modifying&&u(N),x(()=>N.error());else{const B=E.async?W():Y();E.modifying&&u(N),x(()=>a(N,B))}}function W(){const B=b.let("ruleErrs",null);return b.try(()=>ee((0,e._)`await `),Q=>b.assign(q,!1).if((0,e._)`${Q} instanceof ${j.ValidationError}`,()=>b.assign(B,(0,e._)`${Q}.errors`),()=>b.throw(Q))),B}function Y(){const B=(0,e._)`${V}.errors`;return b.assign(B,null),ee(e.nil),B}function ee(B=E.async?(0,e._)`await `:e.nil){const Q=j.opts.passContext?t.default.this:t.default.self,ve=!("compile"in E&&!P||E.schema===!1);b.assign(q,(0,e._)`${B}${(0,r.callValidateCode)(N,V,Q,ve)}`,E.modifying)}function x(B){var Q;b.if((0,e.not)((Q=E.valid)!==null&&Q!==void 0?Q:q),B)}}he.funcKeywordCode=o;function u(N){const{gen:E,data:$,it:b}=N;E.if(b.parentData,()=>E.assign($,(0,e._)`${b.parentData}[${b.parentDataProperty}]`))}function a(N,E){const{gen:$}=N;$.if((0,e._)`Array.isArray(${E})`,()=>{$.assign(t.default.vErrors,(0,e._)`${t.default.vErrors} === null ? ${E} : ${t.default.vErrors}.concat(${E})`).assign(t.default.errors,(0,e._)`${t.default.vErrors}.length`),(0,s.extendErrors)(N)},()=>N.error())}function i({schemaEnv:N},E){if(E.async&&!N.$async)throw new Error("async keyword in sync schema")}function f(N,E,$){if($===void 0)throw new Error(`keyword "${E}" failed to compile`);return N.scopeValue("keyword",typeof $=="function"?{ref:$}:{ref:$,code:(0,e.stringify)($)})}function p(N,E,$=!1){return!E.length||E.some(b=>b==="array"?Array.isArray(N):b==="object"?N&&typeof N=="object"&&!Array.isArray(N):typeof N==b||$&&typeof N>"u")}he.validSchemaType=p;function g({schema:N,opts:E,self:$,errSchemaPath:b},y,d){if(Array.isArray(y.keyword)?!y.keyword.includes(d):y.keyword!==d)throw new Error("ajv implementation error");const m=y.dependencies;if(m?.some(P=>!Object.prototype.hasOwnProperty.call(N,P)))throw new Error(`parent schema must have dependencies of ${d}: ${m.join(",")}`);if(y.validateSchema&&!y.validateSchema(N[d])){const j=`keyword "${d}" value is invalid at path "${b}": `+$.errorsText(y.validateSchema.errors);if(E.validateSchema==="log")$.logger.error(j);else throw new Error(j)}}return he.validateKeywordUsage=g,he}var we={},Sr;function Wn(){if(Sr)return we;Sr=1,Object.defineProperty(we,"__esModule",{value:!0}),we.extendSubschemaMode=we.extendSubschemaData=we.getSubschema=void 0;const e=U,t=I;function r(o,{keyword:u,schemaProp:a,schema:i,schemaPath:f,errSchemaPath:p,topSchemaRef:g}){if(u!==void 0&&i!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(u!==void 0){const N=o.schema[u];return a===void 0?{schema:N,schemaPath:(0,e._)`${o.schemaPath}${(0,e.getProperty)(u)}`,errSchemaPath:`${o.errSchemaPath}/${u}`}:{schema:N[a],schemaPath:(0,e._)`${o.schemaPath}${(0,e.getProperty)(u)}${(0,e.getProperty)(a)}`,errSchemaPath:`${o.errSchemaPath}/${u}/${(0,t.escapeFragment)(a)}`}}if(i!==void 0){if(f===void 0||p===void 0||g===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:i,schemaPath:f,topSchemaRef:g,errSchemaPath:p}}throw new Error('either "keyword" or "schema" must be passed')}we.getSubschema=r;function s(o,u,{dataProp:a,dataPropType:i,data:f,dataTypes:p,propertyName:g}){if(f!==void 0&&a!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:N}=u;if(a!==void 0){const{errorPath:$,dataPathArr:b,opts:y}=u,d=N.let("data",(0,e._)`${u.data}${(0,e.getProperty)(a)}`,!0);E(d),o.errorPath=(0,e.str)`${$}${(0,t.getErrorPath)(a,i,y.jsPropertySyntax)}`,o.parentDataProperty=(0,e._)`${a}`,o.dataPathArr=[...b,o.parentDataProperty]}if(f!==void 0){const $=f instanceof e.Name?f:N.let("data",f,!0);E($),g!==void 0&&(o.propertyName=g)}p&&(o.dataTypes=p);function E($){o.data=$,o.dataLevel=u.dataLevel+1,o.dataTypes=[],u.definedProperties=new Set,o.parentData=u.data,o.dataNames=[...u.dataNames,$]}}we.extendSubschemaData=s;function l(o,{jtdDiscriminator:u,jtdMetadata:a,compositeRule:i,createErrors:f,allErrors:p}){i!==void 0&&(o.compositeRule=i),f!==void 0&&(o.createErrors=f),p!==void 0&&(o.allErrors=p),o.jtdDiscriminator=u,o.jtdMetadata=a}return we.extendSubschemaMode=l,we}var se={};Object.defineProperty(se,"__esModule",{value:!0});se.getSchemaRefs=se.resolveUrl=se.normalizeId=se._getFullPath=se.getFullPath=se.inlineRef=void 0;const Qn=I,Xn=Lr,Yn=yn,Zn=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function xn(e,t=!0){return typeof e=="boolean"?!0:t===!0?!Ot(e):t?tn(e)<=t:!1}se.inlineRef=xn;const es=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function Ot(e){for(const t in e){if(es.has(t))return!0;const r=e[t];if(Array.isArray(r)&&r.some(Ot)||typeof r=="object"&&Ot(r))return!0}return!1}function tn(e){let t=0;for(const r in e){if(r==="$ref")return 1/0;if(t++,!Zn.has(r)&&(typeof e[r]=="object"&&(0,Qn.eachItem)(e[r],s=>t+=tn(s)),t===1/0))return 1/0}return t}function rn(e,t="",r){r!==!1&&(t=Ve(t));const s=e.parse(t);return nn(e,s)}se.getFullPath=rn;function nn(e,t){return e.serialize(t).split("#")[0]+"#"}se._getFullPath=nn;const ts=/#\/?$/;function Ve(e){return e?e.replace(ts,""):""}se.normalizeId=Ve;function rs(e,t,r){return r=Ve(r),e.resolve(t,r)}se.resolveUrl=rs;const ns=/^[a-z_][-a-z0-9._]*$/i;function ss(e,t){if(typeof e=="boolean")return{};const{schemaId:r,uriResolver:s}=this.opts,l=Ve(e[r]||t),o={"":l},u=rn(s,l,!1),a={},i=new Set;return Yn(e,{allKeys:!0},(g,N,E,$)=>{if($===void 0)return;const b=u+N;let y=o[$];typeof g[r]=="string"&&(y=d.call(this,g[r])),m.call(this,g.$anchor),m.call(this,g.$dynamicAnchor),o[N]=y;function d(P){const j=this.opts.uriResolver.resolve;if(P=Ve(y?j(y,P):P),i.has(P))throw p(P);i.add(P);let R=this.refs[P];return typeof R=="string"&&(R=this.refs[R]),typeof R=="object"?f(g,R.schema,P):P!==Ve(b)&&(P[0]==="#"?(f(g,a[P],P),a[P]=g):this.refs[P]=b),P}function m(P){if(typeof P=="string"){if(!ns.test(P))throw new Error(`invalid anchor "${P}"`);d.call(this,`#${P}`)}}}),a;function f(g,N,E){if(N!==void 0&&!Xn(g,N))throw p(E)}function p(g){return new Error(`reference "${g}" resolves to more than one schema`)}}se.getSchemaRefs=ss;var Nr;function ht(){if(Nr)return ge;Nr=1,Object.defineProperty(ge,"__esModule",{value:!0}),ge.getData=ge.KeywordCxt=ge.validateFunctionCode=void 0;const e=Rn(),t=Z,r=be,s=Z,l=Hn(),o=Bn(),u=Wn(),a=U,i=_e,f=se,p=I,g=Ye;function N(h){if(R(h)&&(q(h),j(h))){y(h);return}E(h,()=>(0,e.topBoolOrEmptySchema)(h))}ge.validateFunctionCode=N;function E({gen:h,validateName:v,schema:k,schemaEnv:T,opts:A},K){A.code.es5?h.func(v,(0,a._)`${i.default.data}, ${i.default.valCxt}`,T.$async,()=>{h.code((0,a._)`"use strict"; ${m(k,A)}`),b(h,A),h.code(K)}):h.func(v,(0,a._)`${i.default.data}, ${$(A)}`,T.$async,()=>h.code(m(k,A)).code(K))}function $(h){return(0,a._)`{${i.default.instancePath}="", ${i.default.parentData}, ${i.default.parentDataProperty}, ${i.default.rootData}=${i.default.data}${h.dynamicRef?(0,a._)`, ${i.default.dynamicAnchors}={}`:a.nil}}={}`}function b(h,v){h.if(i.default.valCxt,()=>{h.var(i.default.instancePath,(0,a._)`${i.default.valCxt}.${i.default.instancePath}`),h.var(i.default.parentData,(0,a._)`${i.default.valCxt}.${i.default.parentData}`),h.var(i.default.parentDataProperty,(0,a._)`${i.default.valCxt}.${i.default.parentDataProperty}`),h.var(i.default.rootData,(0,a._)`${i.default.valCxt}.${i.default.rootData}`),v.dynamicRef&&h.var(i.default.dynamicAnchors,(0,a._)`${i.default.valCxt}.${i.default.dynamicAnchors}`)},()=>{h.var(i.default.instancePath,(0,a._)`""`),h.var(i.default.parentData,(0,a._)`undefined`),h.var(i.default.parentDataProperty,(0,a._)`undefined`),h.var(i.default.rootData,i.default.data),v.dynamicRef&&h.var(i.default.dynamicAnchors,(0,a._)`{}`)})}function y(h){const{schema:v,opts:k,gen:T}=h;E(h,()=>{k.$comment&&v.$comment&&B(h),Y(h),T.let(i.default.vErrors,null),T.let(i.default.errors,0),k.unevaluated&&d(h),H(h),Q(h)})}function d(h){const{gen:v,validateName:k}=h;h.evaluated=v.const("evaluated",(0,a._)`${k}.evaluated`),v.if((0,a._)`${h.evaluated}.dynamicProps`,()=>v.assign((0,a._)`${h.evaluated}.props`,(0,a._)`undefined`)),v.if((0,a._)`${h.evaluated}.dynamicItems`,()=>v.assign((0,a._)`${h.evaluated}.items`,(0,a._)`undefined`))}function m(h,v){const k=typeof h=="object"&&h[v.schemaId];return k&&(v.code.source||v.code.process)?(0,a._)`/*# sourceURL=${k} */`:a.nil}function P(h,v){if(R(h)&&(q(h),j(h))){V(h,v);return}(0,e.boolOrEmptySchema)(h,v)}function j({schema:h,self:v}){if(typeof h=="boolean")return!h;for(const k in h)if(v.RULES.all[k])return!0;return!1}function R(h){return typeof h.schema!="boolean"}function V(h,v){const{schema:k,gen:T,opts:A}=h;A.$comment&&k.$comment&&B(h),ee(h),x(h);const K=T.const("_errs",i.default.errors);H(h,K),T.var(v,(0,a._)`${K} === ${i.default.errors}`)}function q(h){(0,p.checkUnknownRules)(h),W(h)}function H(h,v){if(h.opts.jtd)return Pe(h,[],!1,v);const k=(0,t.getSchemaTypes)(h.schema),T=(0,t.coerceAndCheckDataType)(h,k);Pe(h,k,!T,v)}function W(h){const{schema:v,errSchemaPath:k,opts:T,self:A}=h;v.$ref&&T.ignoreKeywordsWithRef&&(0,p.schemaHasRulesButRef)(v,A.RULES)&&A.logger.warn(`$ref: keywords ignored in schema at path "${k}"`)}function Y(h){const{schema:v,opts:k}=h;v.default!==void 0&&k.useDefaults&&k.strictSchema&&(0,p.checkStrictMode)(h,"default is ignored in the schema root")}function ee(h){const v=h.schema[h.opts.schemaId];v&&(h.baseId=(0,f.resolveUrl)(h.opts.uriResolver,h.baseId,v))}function x(h){if(h.schema.$async&&!h.schemaEnv.$async)throw new Error("async schema in sync schema")}function B({gen:h,schemaEnv:v,schema:k,errSchemaPath:T,opts:A}){const K=k.$comment;if(A.$comment===!0)h.code((0,a._)`${i.default.self}.logger.log(${K})`);else if(typeof A.$comment=="function"){const te=(0,a.str)`${T}/$comment`,fe=h.scopeValue("root",{ref:v.root});h.code((0,a._)`${i.default.self}.opts.$comment(${K}, ${te}, ${fe}.schema)`)}}function Q(h){const{gen:v,schemaEnv:k,validateName:T,ValidationError:A,opts:K}=h;k.$async?v.if((0,a._)`${i.default.errors} === 0`,()=>v.return(i.default.data),()=>v.throw((0,a._)`new ${A}(${i.default.vErrors})`)):(v.assign((0,a._)`${T}.errors`,i.default.vErrors),K.unevaluated&&ve(h),v.return((0,a._)`${i.default.errors} === 0`))}function ve({gen:h,evaluated:v,props:k,items:T}){k instanceof a.Name&&h.assign((0,a._)`${v}.props`,k),T instanceof a.Name&&h.assign((0,a._)`${v}.items`,T)}function Pe(h,v,k,T){const{gen:A,schema:K,data:te,allErrors:fe,opts:oe,self:ie}=h,{RULES:re}=ie;if(K.$ref&&(oe.ignoreKeywordsWithRef||!(0,p.schemaHasRulesButRef)(K,re))){A.block(()=>M(h,"$ref",re.all.$ref.definition));return}oe.jtd||Ue(h,v),A.block(()=>{for(const ue of re.rules)Ie(ue);Ie(re.post)});function Ie(ue){(0,r.shouldUseGroup)(K,ue)&&(ue.type?(A.if((0,s.checkDataType)(ue.type,te,oe.strictNumbers)),Te(h,ue),v.length===1&&v[0]===ue.type&&k&&(A.else(),(0,s.reportTypeError)(h)),A.endIf()):Te(h,ue),fe||A.if((0,a._)`${i.default.errors} === ${T||0}`))}}function Te(h,v){const{gen:k,schema:T,opts:{useDefaults:A}}=h;A&&(0,l.assignDefaults)(h,v.type),k.block(()=>{for(const K of v.rules)(0,r.shouldUseRule)(T,K)&&M(h,K.keyword,K.definition,v.type)})}function Ue(h,v){h.schemaEnv.meta||!h.opts.strictTypes||(Ce(h,v),h.opts.allowUnionTypes||C(h,v),_(h,h.dataTypes))}function Ce(h,v){if(v.length){if(!h.dataTypes.length){h.dataTypes=v;return}v.forEach(k=>{w(h.dataTypes,k)||c(h,`type "${k}" not allowed by context "${h.dataTypes.join(",")}"`)}),n(h,v)}}function C(h,v){v.length>1&&!(v.length===2&&v.includes("null"))&&c(h,"use allowUnionTypes to allow union type keyword")}function _(h,v){const k=h.self.RULES.all;for(const T in k){const A=k[T];if(typeof A=="object"&&(0,r.shouldUseRule)(h.schema,A)){const{type:K}=A.definition;K.length&&!K.some(te=>O(v,te))&&c(h,`missing type "${K.join(",")}" for keyword "${T}"`)}}}function O(h,v){return h.includes(v)||v==="number"&&h.includes("integer")}function w(h,v){return h.includes(v)||v==="integer"&&h.includes("number")}function n(h,v){const k=[];for(const T of h.dataTypes)w(v,T)?k.push(T):v.includes("integer")&&T==="number"&&k.push("integer");h.dataTypes=k}function c(h,v){const k=h.schemaEnv.baseId+h.errSchemaPath;v+=` at "${k}" (strictTypes)`,(0,p.checkStrictMode)(h,v,h.opts.strictTypes)}class S{constructor(v,k,T){if((0,o.validateKeywordUsage)(v,k,T),this.gen=v.gen,this.allErrors=v.allErrors,this.keyword=T,this.data=v.data,this.schema=v.schema[T],this.$data=k.$data&&v.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,p.schemaRefOrVal)(v,this.schema,T,this.$data),this.schemaType=k.schemaType,this.parentSchema=v.schema,this.params={},this.it=v,this.def=k,this.$data)this.schemaCode=v.gen.const("vSchema",z(this.$data,v));else if(this.schemaCode=this.schemaValue,!(0,o.validSchemaType)(this.schema,k.schemaType,k.allowUndefined))throw new Error(`${T} value must be ${JSON.stringify(k.schemaType)}`);("code"in k?k.trackErrors:k.errors!==!1)&&(this.errsCount=v.gen.const("_errs",i.default.errors))}result(v,k,T){this.failResult((0,a.not)(v),k,T)}failResult(v,k,T){this.gen.if(v),T?T():this.error(),k?(this.gen.else(),k(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(v,k){this.failResult((0,a.not)(v),void 0,k)}fail(v){if(v===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(v),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(v){if(!this.$data)return this.fail(v);const{schemaCode:k}=this;this.fail((0,a._)`${k} !== undefined && (${(0,a.or)(this.invalid$data(),v)})`)}error(v,k,T){if(k){this.setParams(k),this._error(v,T),this.setParams({});return}this._error(v,T)}_error(v,k){(v?g.reportExtraError:g.reportError)(this,this.def.error,k)}$dataError(){(0,g.reportError)(this,this.def.$dataError||g.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,g.resetErrorsCount)(this.gen,this.errsCount)}ok(v){this.allErrors||this.gen.if(v)}setParams(v,k){k?Object.assign(this.params,v):this.params=v}block$data(v,k,T=a.nil){this.gen.block(()=>{this.check$data(v,T),k()})}check$data(v=a.nil,k=a.nil){if(!this.$data)return;const{gen:T,schemaCode:A,schemaType:K,def:te}=this;T.if((0,a.or)((0,a._)`${A} === undefined`,k)),v!==a.nil&&T.assign(v,!0),(K.length||te.validateSchema)&&(T.elseIf(this.invalid$data()),this.$dataError(),v!==a.nil&&T.assign(v,!1)),T.else()}invalid$data(){const{gen:v,schemaCode:k,schemaType:T,def:A,it:K}=this;return(0,a.or)(te(),fe());function te(){if(T.length){if(!(k instanceof a.Name))throw new Error("ajv implementation error");const oe=Array.isArray(T)?T:[T];return(0,a._)`${(0,s.checkDataTypes)(oe,k,K.opts.strictNumbers,s.DataType.Wrong)}`}return a.nil}function fe(){if(A.validateSchema){const oe=v.scopeValue("validate$data",{ref:A.validateSchema});return(0,a._)`!${oe}(${k})`}return a.nil}}subschema(v,k){const T=(0,u.getSubschema)(this.it,v);(0,u.extendSubschemaData)(T,this.it,v),(0,u.extendSubschemaMode)(T,v);const A={...this.it,...T,items:void 0,props:void 0};return P(A,k),A}mergeEvaluated(v,k){const{it:T,gen:A}=this;T.opts.unevaluated&&(T.props!==!0&&v.props!==void 0&&(T.props=p.mergeEvaluated.props(A,v.props,T.props,k)),T.items!==!0&&v.items!==void 0&&(T.items=p.mergeEvaluated.items(A,v.items,T.items,k)))}mergeValidEvaluated(v,k){const{it:T,gen:A}=this;if(T.opts.unevaluated&&(T.props!==!0||T.items!==!0))return A.if(k,()=>this.mergeEvaluated(v,a.Name)),!0}}ge.KeywordCxt=S;function M(h,v,k,T){const A=new S(h,k,v);"code"in k?k.code(A,T):A.$data&&k.validate?(0,o.funcKeywordCode)(A,k):"macro"in k?(0,o.macroKeywordCode)(A,k):(k.compile||k.validate)&&(0,o.funcKeywordCode)(A,k)}const D=/^\/(?:[^~]|~0|~1)*$/,L=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function z(h,{dataLevel:v,dataNames:k,dataPathArr:T}){let A,K;if(h==="")return i.default.rootData;if(h[0]==="/"){if(!D.test(h))throw new Error(`Invalid JSON-pointer: ${h}`);A=h,K=i.default.rootData}else{const ie=L.exec(h);if(!ie)throw new Error(`Invalid JSON-pointer: ${h}`);const re=+ie[1];if(A=ie[2],A==="#"){if(re>=v)throw new Error(oe("property/index",re));return T[v-re]}if(re>v)throw new Error(oe("data",re));if(K=k[v-re],!A)return K}let te=K;const fe=A.split("/");for(const ie of fe)ie&&(K=(0,a._)`${K}${(0,a.getProperty)((0,p.unescapeJsonPointer)(ie))}`,te=(0,a._)`${te} && ${K}`);return te;function oe(ie,re){return`Cannot access ${ie} ${re} levels up, current level is ${v}`}}return ge.getData=z,ge}var xe={},kr;function Vt(){if(kr)return xe;kr=1,Object.defineProperty(xe,"__esModule",{value:!0});class e extends Error{constructor(r){super("validation failed"),this.errors=r,this.ajv=this.validation=!0}}return xe.default=e,xe}var et={},jr;function mt(){if(jr)return et;jr=1,Object.defineProperty(et,"__esModule",{value:!0});const e=se;class t extends Error{constructor(s,l,o,u){super(u||`can't resolve reference ${o} from id ${l}`),this.missingRef=(0,e.resolveUrl)(s,l,o),this.missingSchema=(0,e.normalizeId)((0,e.getFullPath)(s,this.missingRef))}}return et.default=t,et}var le={};Object.defineProperty(le,"__esModule",{value:!0});le.resolveSchema=le.getCompilingSchema=le.resolveRef=le.compileSchema=le.SchemaEnv=void 0;const me=U,as=Vt(),Ne=_e,ye=se,Or=I,os=ht();class pt{constructor(t){var r;this.refs={},this.dynamicAnchors={};let s;typeof t.schema=="object"&&(s=t.schema),this.schema=t.schema,this.schemaId=t.schemaId,this.root=t.root||this,this.baseId=(r=t.baseId)!==null&&r!==void 0?r:(0,ye.normalizeId)(s?.[t.schemaId||"$id"]),this.schemaPath=t.schemaPath,this.localRefs=t.localRefs,this.meta=t.meta,this.$async=s?.$async,this.refs={}}}le.SchemaEnv=pt;function qt(e){const t=sn.call(this,e);if(t)return t;const r=(0,ye.getFullPath)(this.opts.uriResolver,e.root.baseId),{es5:s,lines:l}=this.opts.code,{ownProperties:o}=this.opts,u=new me.CodeGen(this.scope,{es5:s,lines:l,ownProperties:o});let a;e.$async&&(a=u.scopeValue("Error",{ref:as.default,code:(0,me._)`require("ajv/dist/runtime/validation_error").default`}));const i=u.scopeName("validate");e.validateName=i;const f={gen:u,allErrors:this.opts.allErrors,data:Ne.default.data,parentData:Ne.default.parentData,parentDataProperty:Ne.default.parentDataProperty,dataNames:[Ne.default.data],dataPathArr:[me.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:u.scopeValue("schema",this.opts.code.source===!0?{ref:e.schema,code:(0,me.stringify)(e.schema)}:{ref:e.schema}),validateName:i,ValidationError:a,schema:e.schema,schemaEnv:e,rootId:r,baseId:e.baseId||r,schemaPath:me.nil,errSchemaPath:e.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,me._)`""`,opts:this.opts,self:this};let p;try{this._compilations.add(e),(0,os.validateFunctionCode)(f),u.optimize(this.opts.code.optimize);const g=u.toString();p=`${u.scopeRefs(Ne.default.scope)}return ${g}`,this.opts.code.process&&(p=this.opts.code.process(p,e));const E=new Function(`${Ne.default.self}`,`${Ne.default.scope}`,p)(this,this.scope.get());if(this.scope.value(i,{ref:E}),E.errors=null,E.schema=e.schema,E.schemaEnv=e,e.$async&&(E.$async=!0),this.opts.code.source===!0&&(E.source={validateName:i,validateCode:g,scopeValues:u._values}),this.opts.unevaluated){const{props:$,items:b}=f;E.evaluated={props:$ instanceof me.Name?void 0:$,items:b instanceof me.Name?void 0:b,dynamicProps:$ instanceof me.Name,dynamicItems:b instanceof me.Name},E.source&&(E.source.evaluated=(0,me.stringify)(E.evaluated))}return e.validate=E,e}catch(g){throw delete e.validate,delete e.validateName,p&&this.logger.error("Error compiling schema, function code:",p),g}finally{this._compilations.delete(e)}}le.compileSchema=qt;function is(e,t,r){var s;r=(0,ye.resolveUrl)(this.opts.uriResolver,t,r);const l=e.refs[r];if(l)return l;let o=us.call(this,e,r);if(o===void 0){const u=(s=e.localRefs)===null||s===void 0?void 0:s[r],{schemaId:a}=this.opts;u&&(o=new pt({schema:u,schemaId:a,root:e,baseId:t}))}if(o!==void 0)return e.refs[r]=cs.call(this,o)}le.resolveRef=is;function cs(e){return(0,ye.inlineRef)(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:qt.call(this,e)}function sn(e){for(const t of this._compilations)if(ls(t,e))return t}le.getCompilingSchema=sn;function ls(e,t){return e.schema===t.schema&&e.root===t.root&&e.baseId===t.baseId}function us(e,t){let r;for(;typeof(r=this.refs[t])=="string";)t=r;return r||this.schemas[t]||yt.call(this,e,t)}function yt(e,t){const r=this.opts.uriResolver.parse(t),s=(0,ye._getFullPath)(this.opts.uriResolver,r);let l=(0,ye.getFullPath)(this.opts.uriResolver,e.baseId,void 0);if(Object.keys(e.schema).length>0&&s===l)return bt.call(this,r,e);const o=(0,ye.normalizeId)(s),u=this.refs[o]||this.schemas[o];if(typeof u=="string"){const a=yt.call(this,e,u);return typeof a?.schema!="object"?void 0:bt.call(this,r,a)}if(typeof u?.schema=="object"){if(u.validate||qt.call(this,u),o===(0,ye.normalizeId)(t)){const{schema:a}=u,{schemaId:i}=this.opts,f=a[i];return f&&(l=(0,ye.resolveUrl)(this.opts.uriResolver,l,f)),new pt({schema:a,schemaId:i,root:e,baseId:l})}return bt.call(this,r,u)}}le.resolveSchema=yt;const ds=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function bt(e,{baseId:t,schema:r,root:s}){var l;if(((l=e.fragment)===null||l===void 0?void 0:l[0])!=="/")return;for(const a of e.fragment.slice(1).split("/")){if(typeof r=="boolean")return;const i=r[(0,Or.unescapeFragment)(a)];if(i===void 0)return;r=i;const f=typeof r=="object"&&r[this.opts.schemaId];!ds.has(a)&&f&&(t=(0,ye.resolveUrl)(this.opts.uriResolver,t,f))}let o;if(typeof r!="boolean"&&r.$ref&&!(0,Or.schemaHasRulesButRef)(r,this.RULES)){const a=(0,ye.resolveUrl)(this.opts.uriResolver,t,r.$ref);o=yt.call(this,s,a)}const{schemaId:u}=this.opts;if(o=o||new pt({schema:r,schemaId:u,root:s,baseId:t}),o.schema!==o.root.schema)return o}const fs="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",hs="Meta-schema for $data reference (JSON AnySchema extension proposal)",ms="object",ps=["$data"],ys={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},$s=!1,_s={$id:fs,description:hs,type:ms,required:ps,properties:ys,additionalProperties:$s};var Ft={};Object.defineProperty(Ft,"__esModule",{value:!0});const an=$n;an.code='require("ajv/dist/runtime/uri").default';Ft.default=an;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;var t=ht();Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return t.KeywordCxt}});var r=U;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return r.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return r.CodeGen}});const s=Vt(),l=mt(),o=Oe,u=le,a=U,i=se,f=Z,p=I,g=_s,N=Ft,E=(C,_)=>new RegExp(C,_);E.code="new RegExp";const $=["removeAdditional","useDefaults","coerceTypes"],b=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),y={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},d={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},m=200;function P(C){var _,O,w,n,c,S,M,D,L,z,h,v,k,T,A,K,te,fe,oe,ie,re,Ie,ue,vt,gt;const ze=C.strict,wt=(_=C.code)===null||_===void 0?void 0:_.optimize,$r=wt===!0||wt===void 0?1:wt||0,_r=(w=(O=C.code)===null||O===void 0?void 0:O.regExp)!==null&&w!==void 0?w:E,pn=(n=C.uriResolver)!==null&&n!==void 0?n:N.default;return{strictSchema:(S=(c=C.strictSchema)!==null&&c!==void 0?c:ze)!==null&&S!==void 0?S:!0,strictNumbers:(D=(M=C.strictNumbers)!==null&&M!==void 0?M:ze)!==null&&D!==void 0?D:!0,strictTypes:(z=(L=C.strictTypes)!==null&&L!==void 0?L:ze)!==null&&z!==void 0?z:"log",strictTuples:(v=(h=C.strictTuples)!==null&&h!==void 0?h:ze)!==null&&v!==void 0?v:"log",strictRequired:(T=(k=C.strictRequired)!==null&&k!==void 0?k:ze)!==null&&T!==void 0?T:!1,code:C.code?{...C.code,optimize:$r,regExp:_r}:{optimize:$r,regExp:_r},loopRequired:(A=C.loopRequired)!==null&&A!==void 0?A:m,loopEnum:(K=C.loopEnum)!==null&&K!==void 0?K:m,meta:(te=C.meta)!==null&&te!==void 0?te:!0,messages:(fe=C.messages)!==null&&fe!==void 0?fe:!0,inlineRefs:(oe=C.inlineRefs)!==null&&oe!==void 0?oe:!0,schemaId:(ie=C.schemaId)!==null&&ie!==void 0?ie:"$id",addUsedSchema:(re=C.addUsedSchema)!==null&&re!==void 0?re:!0,validateSchema:(Ie=C.validateSchema)!==null&&Ie!==void 0?Ie:!0,validateFormats:(ue=C.validateFormats)!==null&&ue!==void 0?ue:!0,unicodeRegExp:(vt=C.unicodeRegExp)!==null&&vt!==void 0?vt:!0,int32range:(gt=C.int32range)!==null&&gt!==void 0?gt:!0,uriResolver:pn}}class j{constructor(_={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,_=this.opts={..._,...P(_)};const{es5:O,lines:w}=this.opts.code;this.scope=new a.ValueScope({scope:{},prefixes:b,es5:O,lines:w}),this.logger=x(_.logger);const n=_.validateFormats;_.validateFormats=!1,this.RULES=(0,o.getRules)(),R.call(this,y,_,"NOT SUPPORTED"),R.call(this,d,_,"DEPRECATED","warn"),this._metaOpts=Y.call(this),_.formats&&H.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),_.keywords&&W.call(this,_.keywords),typeof _.meta=="object"&&this.addMetaSchema(_.meta),q.call(this),_.validateFormats=n}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:_,meta:O,schemaId:w}=this.opts;let n=g;w==="id"&&(n={...g},n.id=n.$id,delete n.$id),O&&_&&this.addMetaSchema(n,n[w],!1)}defaultMeta(){const{meta:_,schemaId:O}=this.opts;return this.opts.defaultMeta=typeof _=="object"?_[O]||_:void 0}validate(_,O){let w;if(typeof _=="string"){if(w=this.getSchema(_),!w)throw new Error(`no schema with key or ref "${_}"`)}else w=this.compile(_);const n=w(O);return"$async"in w||(this.errors=w.errors),n}compile(_,O){const w=this._addSchema(_,O);return w.validate||this._compileSchemaEnv(w)}compileAsync(_,O){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:w}=this.opts;return n.call(this,_,O);async function n(z,h){await c.call(this,z.$schema);const v=this._addSchema(z,h);return v.validate||S.call(this,v)}async function c(z){z&&!this.getSchema(z)&&await n.call(this,{$ref:z},!0)}async function S(z){try{return this._compileSchemaEnv(z)}catch(h){if(!(h instanceof l.default))throw h;return M.call(this,h),await D.call(this,h.missingSchema),S.call(this,z)}}function M({missingSchema:z,missingRef:h}){if(this.refs[z])throw new Error(`AnySchema ${z} is loaded but ${h} cannot be resolved`)}async function D(z){const h=await L.call(this,z);this.refs[z]||await c.call(this,h.$schema),this.refs[z]||this.addSchema(h,z,O)}async function L(z){const h=this._loading[z];if(h)return h;try{return await(this._loading[z]=w(z))}finally{delete this._loading[z]}}}addSchema(_,O,w,n=this.opts.validateSchema){if(Array.isArray(_)){for(const S of _)this.addSchema(S,void 0,w,n);return this}let c;if(typeof _=="object"){const{schemaId:S}=this.opts;if(c=_[S],c!==void 0&&typeof c!="string")throw new Error(`schema ${S} must be string`)}return O=(0,i.normalizeId)(O||c),this._checkUnique(O),this.schemas[O]=this._addSchema(_,w,O,n,!0),this}addMetaSchema(_,O,w=this.opts.validateSchema){return this.addSchema(_,O,!0,w),this}validateSchema(_,O){if(typeof _=="boolean")return!0;let w;if(w=_.$schema,w!==void 0&&typeof w!="string")throw new Error("$schema must be a string");if(w=w||this.opts.defaultMeta||this.defaultMeta(),!w)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const n=this.validate(w,_);if(!n&&O){const c="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(c);else throw new Error(c)}return n}getSchema(_){let O;for(;typeof(O=V.call(this,_))=="string";)_=O;if(O===void 0){const{schemaId:w}=this.opts,n=new u.SchemaEnv({schema:{},schemaId:w});if(O=u.resolveSchema.call(this,n,_),!O)return;this.refs[_]=O}return O.validate||this._compileSchemaEnv(O)}removeSchema(_){if(_ instanceof RegExp)return this._removeAllSchemas(this.schemas,_),this._removeAllSchemas(this.refs,_),this;switch(typeof _){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const O=V.call(this,_);return typeof O=="object"&&this._cache.delete(O.schema),delete this.schemas[_],delete this.refs[_],this}case"object":{const O=_;this._cache.delete(O);let w=_[this.opts.schemaId];return w&&(w=(0,i.normalizeId)(w),delete this.schemas[w],delete this.refs[w]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(_){for(const O of _)this.addKeyword(O);return this}addKeyword(_,O){let w;if(typeof _=="string")w=_,typeof O=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),O.keyword=w);else if(typeof _=="object"&&O===void 0){if(O=_,w=O.keyword,Array.isArray(w)&&!w.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(Q.call(this,w,O),!O)return(0,p.eachItem)(w,c=>ve.call(this,c)),this;Te.call(this,O);const n={...O,type:(0,f.getJSONTypes)(O.type),schemaType:(0,f.getJSONTypes)(O.schemaType)};return(0,p.eachItem)(w,n.type.length===0?c=>ve.call(this,c,n):c=>n.type.forEach(S=>ve.call(this,c,n,S))),this}getKeyword(_){const O=this.RULES.all[_];return typeof O=="object"?O.definition:!!O}removeKeyword(_){const{RULES:O}=this;delete O.keywords[_],delete O.all[_];for(const w of O.rules){const n=w.rules.findIndex(c=>c.keyword===_);n>=0&&w.rules.splice(n,1)}return this}addFormat(_,O){return typeof O=="string"&&(O=new RegExp(O)),this.formats[_]=O,this}errorsText(_=this.errors,{separator:O=", ",dataVar:w="data"}={}){return!_||_.length===0?"No errors":_.map(n=>`${w}${n.instancePath} ${n.message}`).reduce((n,c)=>n+O+c)}$dataMetaSchema(_,O){const w=this.RULES.all;_=JSON.parse(JSON.stringify(_));for(const n of O){const c=n.split("/").slice(1);let S=_;for(const M of c)S=S[M];for(const M in w){const D=w[M];if(typeof D!="object")continue;const{$data:L}=D.definition,z=S[M];L&&z&&(S[M]=Ce(z))}}return _}_removeAllSchemas(_,O){for(const w in _){const n=_[w];(!O||O.test(w))&&(typeof n=="string"?delete _[w]:n&&!n.meta&&(this._cache.delete(n.schema),delete _[w]))}}_addSchema(_,O,w,n=this.opts.validateSchema,c=this.opts.addUsedSchema){let S;const{schemaId:M}=this.opts;if(typeof _=="object")S=_[M];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof _!="boolean")throw new Error("schema must be object or boolean")}let D=this._cache.get(_);if(D!==void 0)return D;w=(0,i.normalizeId)(S||w);const L=i.getSchemaRefs.call(this,_,w);return D=new u.SchemaEnv({schema:_,schemaId:M,meta:O,baseId:w,localRefs:L}),this._cache.set(D.schema,D),c&&!w.startsWith("#")&&(w&&this._checkUnique(w),this.refs[w]=D),n&&this.validateSchema(_,!0),D}_checkUnique(_){if(this.schemas[_]||this.refs[_])throw new Error(`schema with key or id "${_}" already exists`)}_compileSchemaEnv(_){if(_.meta?this._compileMetaSchema(_):u.compileSchema.call(this,_),!_.validate)throw new Error("ajv implementation error");return _.validate}_compileMetaSchema(_){const O=this.opts;this.opts=this._metaOpts;try{u.compileSchema.call(this,_)}finally{this.opts=O}}}j.ValidationError=s.default,j.MissingRefError=l.default,e.default=j;function R(C,_,O,w="error"){for(const n in C){const c=n;c in _&&this.logger[w](`${O}: option ${n}. ${C[c]}`)}}function V(C){return C=(0,i.normalizeId)(C),this.schemas[C]||this.refs[C]}function q(){const C=this.opts.schemas;if(C)if(Array.isArray(C))this.addSchema(C);else for(const _ in C)this.addSchema(C[_],_)}function H(){for(const C in this.opts.formats){const _=this.opts.formats[C];_&&this.addFormat(C,_)}}function W(C){if(Array.isArray(C)){this.addVocabulary(C);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const _ in C){const O=C[_];O.keyword||(O.keyword=_),this.addKeyword(O)}}function Y(){const C={...this.opts};for(const _ of $)delete C[_];return C}const ee={log(){},warn(){},error(){}};function x(C){if(C===!1)return ee;if(C===void 0)return console;if(C.log&&C.warn&&C.error)return C;throw new Error("logger must implement log, warn and error methods")}const B=/^[a-z_$][a-z0-9_$:-]*$/i;function Q(C,_){const{RULES:O}=this;if((0,p.eachItem)(C,w=>{if(O.keywords[w])throw new Error(`Keyword ${w} is already defined`);if(!B.test(w))throw new Error(`Keyword ${w} has invalid name`)}),!!_&&_.$data&&!("code"in _||"validate"in _))throw new Error('$data keyword must have "code" or "validate" function')}function ve(C,_,O){var w;const n=_?.post;if(O&&n)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:c}=this;let S=n?c.post:c.rules.find(({type:D})=>D===O);if(S||(S={type:O,rules:[]},c.rules.push(S)),c.keywords[C]=!0,!_)return;const M={keyword:C,definition:{..._,type:(0,f.getJSONTypes)(_.type),schemaType:(0,f.getJSONTypes)(_.schemaType)}};_.before?Pe.call(this,S,M,_.before):S.rules.push(M),c.all[C]=M,(w=_.implements)===null||w===void 0||w.forEach(D=>this.addKeyword(D))}function Pe(C,_,O){const w=C.rules.findIndex(n=>n.keyword===O);w>=0?C.rules.splice(w,0,_):(C.rules.push(_),this.logger.warn(`rule ${O} is not defined`))}function Te(C){let{metaSchema:_}=C;_!==void 0&&(C.$data&&this.opts.$data&&(_=Ce(_)),C.validateSchema=this.compile(_,!0))}const Ue={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function Ce(C){return{anyOf:[C,Ue]}}})(Gr);var Kt={},Ut={},zt={};Object.defineProperty(zt,"__esModule",{value:!0});const vs={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};zt.default=vs;var Re={};Object.defineProperty(Re,"__esModule",{value:!0});Re.callRef=Re.getValidate=void 0;const gs=mt(),Rr=$e(),ce=U,Me=_e,Tr=le,tt=I,ws={keyword:"$ref",schemaType:"string",code(e){const{gen:t,schema:r,it:s}=e,{baseId:l,schemaEnv:o,validateName:u,opts:a,self:i}=s,{root:f}=o;if((r==="#"||r==="#/")&&l===f.baseId)return g();const p=Tr.resolveRef.call(i,f,l,r);if(p===void 0)throw new gs.default(s.opts.uriResolver,l,r);if(p instanceof Tr.SchemaEnv)return N(p);return E(p);function g(){if(o===f)return ot(e,u,o,o.$async);const $=t.scopeValue("root",{ref:f});return ot(e,(0,ce._)`${$}.validate`,f,f.$async)}function N($){const b=on(e,$);ot(e,b,$,$.$async)}function E($){const b=t.scopeValue("schema",a.code.source===!0?{ref:$,code:(0,ce.stringify)($)}:{ref:$}),y=t.name("valid"),d=e.subschema({schema:$,dataTypes:[],schemaPath:ce.nil,topSchemaRef:b,errSchemaPath:r},y);e.mergeEvaluated(d),e.ok(y)}}};function on(e,t){const{gen:r}=e;return t.validate?r.scopeValue("validate",{ref:t.validate}):(0,ce._)`${r.scopeValue("wrapper",{ref:t})}.validate`}Re.getValidate=on;function ot(e,t,r,s){const{gen:l,it:o}=e,{allErrors:u,schemaEnv:a,opts:i}=o,f=i.passContext?Me.default.this:ce.nil;s?p():g();function p(){if(!a.$async)throw new Error("async schema referenced by sync schema");const $=l.let("valid");l.try(()=>{l.code((0,ce._)`await ${(0,Rr.callValidateCode)(e,t,f)}`),E(t),u||l.assign($,!0)},b=>{l.if((0,ce._)`!(${b} instanceof ${o.ValidationError})`,()=>l.throw(b)),N(b),u||l.assign($,!1)}),e.ok($)}function g(){e.result((0,Rr.callValidateCode)(e,t,f),()=>E(t),()=>N(t))}function N($){const b=(0,ce._)`${$}.errors`;l.assign(Me.default.vErrors,(0,ce._)`${Me.default.vErrors} === null ? ${b} : ${Me.default.vErrors}.concat(${b})`),l.assign(Me.default.errors,(0,ce._)`${Me.default.vErrors}.length`)}function E($){var b;if(!o.opts.unevaluated)return;const y=(b=r?.validate)===null||b===void 0?void 0:b.evaluated;if(o.props!==!0)if(y&&!y.dynamicProps)y.props!==void 0&&(o.props=tt.mergeEvaluated.props(l,y.props,o.props));else{const d=l.var("props",(0,ce._)`${$}.evaluated.props`);o.props=tt.mergeEvaluated.props(l,d,o.props,ce.Name)}if(o.items!==!0)if(y&&!y.dynamicItems)y.items!==void 0&&(o.items=tt.mergeEvaluated.items(l,y.items,o.items));else{const d=l.var("items",(0,ce._)`${$}.evaluated.items`);o.items=tt.mergeEvaluated.items(l,d,o.items,ce.Name)}}}Re.callRef=ot;Re.default=ws;Object.defineProperty(Ut,"__esModule",{value:!0});const bs=zt,Es=Re,Ps=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",bs.default,Es.default];Ut.default=Ps;var Lt={},Gt={};Object.defineProperty(Gt,"__esModule",{value:!0});const lt=U,Ee=lt.operators,ut={maximum:{okStr:"<=",ok:Ee.LTE,fail:Ee.GT},minimum:{okStr:">=",ok:Ee.GTE,fail:Ee.LT},exclusiveMaximum:{okStr:"<",ok:Ee.LT,fail:Ee.GTE},exclusiveMinimum:{okStr:">",ok:Ee.GT,fail:Ee.LTE}},Ss={message:({keyword:e,schemaCode:t})=>(0,lt.str)`must be ${ut[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>(0,lt._)`{comparison: ${ut[e].okStr}, limit: ${t}}`},Ns={keyword:Object.keys(ut),type:"number",schemaType:"number",$data:!0,error:Ss,code(e){const{keyword:t,data:r,schemaCode:s}=e;e.fail$data((0,lt._)`${r} ${ut[t].fail} ${s} || isNaN(${r})`)}};Gt.default=Ns;var Jt={};Object.defineProperty(Jt,"__esModule",{value:!0});const He=U,ks={message:({schemaCode:e})=>(0,He.str)`must be multiple of ${e}`,params:({schemaCode:e})=>(0,He._)`{multipleOf: ${e}}`},js={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:ks,code(e){const{gen:t,data:r,schemaCode:s,it:l}=e,o=l.opts.multipleOfPrecision,u=t.let("res"),a=o?(0,He._)`Math.abs(Math.round(${u}) - ${u}) > 1e-${o}`:(0,He._)`${u} !== parseInt(${u})`;e.fail$data((0,He._)`(${s} === 0 || (${u} = ${r}/${s}, ${a}))`)}};Jt.default=js;var Ht={},Bt={};Object.defineProperty(Bt,"__esModule",{value:!0});function cn(e){const t=e.length;let r=0,s=0,l;for(;s<t;)r++,l=e.charCodeAt(s++),l>=55296&&l<=56319&&s<t&&(l=e.charCodeAt(s),(l&64512)===56320&&s++);return r}Bt.default=cn;cn.code='require("ajv/dist/runtime/ucs2length").default';Object.defineProperty(Ht,"__esModule",{value:!0});const ke=U,Os=I,Rs=Bt,Ts={message({keyword:e,schemaCode:t}){const r=e==="maxLength"?"more":"fewer";return(0,ke.str)`must NOT have ${r} than ${t} characters`},params:({schemaCode:e})=>(0,ke._)`{limit: ${e}}`},Cs={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:Ts,code(e){const{keyword:t,data:r,schemaCode:s,it:l}=e,o=t==="maxLength"?ke.operators.GT:ke.operators.LT,u=l.opts.unicode===!1?(0,ke._)`${r}.length`:(0,ke._)`${(0,Os.useFunc)(e.gen,Rs.default)}(${r})`;e.fail$data((0,ke._)`${u} ${o} ${s}`)}};Ht.default=Cs;var Wt={};Object.defineProperty(Wt,"__esModule",{value:!0});const Is=$e(),dt=U,Ms={message:({schemaCode:e})=>(0,dt.str)`must match pattern "${e}"`,params:({schemaCode:e})=>(0,dt._)`{pattern: ${e}}`},As={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:Ms,code(e){const{data:t,$data:r,schema:s,schemaCode:l,it:o}=e,u=o.opts.unicodeRegExp?"u":"",a=r?(0,dt._)`(new RegExp(${l}, ${u}))`:(0,Is.usePattern)(e,s);e.fail$data((0,dt._)`!${a}.test(${t})`)}};Wt.default=As;var Qt={};Object.defineProperty(Qt,"__esModule",{value:!0});const Be=U,Ds={message({keyword:e,schemaCode:t}){const r=e==="maxProperties"?"more":"fewer";return(0,Be.str)`must NOT have ${r} than ${t} properties`},params:({schemaCode:e})=>(0,Be._)`{limit: ${e}}`},Vs={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:Ds,code(e){const{keyword:t,data:r,schemaCode:s}=e,l=t==="maxProperties"?Be.operators.GT:Be.operators.LT;e.fail$data((0,Be._)`Object.keys(${r}).length ${l} ${s}`)}};Qt.default=Vs;var Xt={};Object.defineProperty(Xt,"__esModule",{value:!0});const Ge=$e(),We=U,qs=I,Fs={message:({params:{missingProperty:e}})=>(0,We.str)`must have required property '${e}'`,params:({params:{missingProperty:e}})=>(0,We._)`{missingProperty: ${e}}`},Ks={keyword:"required",type:"object",schemaType:"array",$data:!0,error:Fs,code(e){const{gen:t,schema:r,schemaCode:s,data:l,$data:o,it:u}=e,{opts:a}=u;if(!o&&r.length===0)return;const i=r.length>=a.loopRequired;if(u.allErrors?f():p(),a.strictRequired){const E=e.parentSchema.properties,{definedProperties:$}=e.it;for(const b of r)if(E?.[b]===void 0&&!$.has(b)){const y=u.schemaEnv.baseId+u.errSchemaPath,d=`required property "${b}" is not defined at "${y}" (strictRequired)`;(0,qs.checkStrictMode)(u,d,u.opts.strictRequired)}}function f(){if(i||o)e.block$data(We.nil,g);else for(const E of r)(0,Ge.checkReportMissingProp)(e,E)}function p(){const E=t.let("missing");if(i||o){const $=t.let("valid",!0);e.block$data($,()=>N(E,$)),e.ok($)}else t.if((0,Ge.checkMissingProp)(e,r,E)),(0,Ge.reportMissingProp)(e,E),t.else()}function g(){t.forOf("prop",s,E=>{e.setParams({missingProperty:E}),t.if((0,Ge.noPropertyInData)(t,l,E,a.ownProperties),()=>e.error())})}function N(E,$){e.setParams({missingProperty:E}),t.forOf(E,s,()=>{t.assign($,(0,Ge.propertyInData)(t,l,E,a.ownProperties)),t.if((0,We.not)($),()=>{e.error(),t.break()})},We.nil)}}};Xt.default=Ks;var Yt={};Object.defineProperty(Yt,"__esModule",{value:!0});const Qe=U,Us={message({keyword:e,schemaCode:t}){const r=e==="maxItems"?"more":"fewer";return(0,Qe.str)`must NOT have ${r} than ${t} items`},params:({schemaCode:e})=>(0,Qe._)`{limit: ${e}}`},zs={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:Us,code(e){const{keyword:t,data:r,schemaCode:s}=e,l=t==="maxItems"?Qe.operators.GT:Qe.operators.LT;e.fail$data((0,Qe._)`${r}.length ${l} ${s}`)}};Yt.default=zs;var Zt={},Ze={};Object.defineProperty(Ze,"__esModule",{value:!0});const ln=Lr;ln.code='require("ajv/dist/runtime/equal").default';Ze.default=ln;Object.defineProperty(Zt,"__esModule",{value:!0});const Et=Z,ne=U,Ls=I,Gs=Ze,Js={message:({params:{i:e,j:t}})=>(0,ne.str)`must NOT have duplicate items (items ## ${t} and ${e} are identical)`,params:({params:{i:e,j:t}})=>(0,ne._)`{i: ${e}, j: ${t}}`},Hs={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:Js,code(e){const{gen:t,data:r,$data:s,schema:l,parentSchema:o,schemaCode:u,it:a}=e;if(!s&&!l)return;const i=t.let("valid"),f=o.items?(0,Et.getSchemaTypes)(o.items):[];e.block$data(i,p,(0,ne._)`${u} === false`),e.ok(i);function p(){const $=t.let("i",(0,ne._)`${r}.length`),b=t.let("j");e.setParams({i:$,j:b}),t.assign(i,!0),t.if((0,ne._)`${$} > 1`,()=>(g()?N:E)($,b))}function g(){return f.length>0&&!f.some($=>$==="object"||$==="array")}function N($,b){const y=t.name("item"),d=(0,Et.checkDataTypes)(f,y,a.opts.strictNumbers,Et.DataType.Wrong),m=t.const("indices",(0,ne._)`{}`);t.for((0,ne._)`;${$}--;`,()=>{t.let(y,(0,ne._)`${r}[${$}]`),t.if(d,(0,ne._)`continue`),f.length>1&&t.if((0,ne._)`typeof ${y} == "string"`,(0,ne._)`${y} += "_"`),t.if((0,ne._)`typeof ${m}[${y}] == "number"`,()=>{t.assign(b,(0,ne._)`${m}[${y}]`),e.error(),t.assign(i,!1).break()}).code((0,ne._)`${m}[${y}] = ${$}`)})}function E($,b){const y=(0,Ls.useFunc)(t,Gs.default),d=t.name("outer");t.label(d).for((0,ne._)`;${$}--;`,()=>t.for((0,ne._)`${b} = ${$}; ${b}--;`,()=>t.if((0,ne._)`${y}(${r}[${$}], ${r}[${b}])`,()=>{e.error(),t.assign(i,!1).break(d)})))}}};Zt.default=Hs;var xt={};Object.defineProperty(xt,"__esModule",{value:!0});const Rt=U,Bs=I,Ws=Ze,Qs={message:"must be equal to constant",params:({schemaCode:e})=>(0,Rt._)`{allowedValue: ${e}}`},Xs={keyword:"const",$data:!0,error:Qs,code(e){const{gen:t,data:r,$data:s,schemaCode:l,schema:o}=e;s||o&&typeof o=="object"?e.fail$data((0,Rt._)`!${(0,Bs.useFunc)(t,Ws.default)}(${r}, ${l})`):e.fail((0,Rt._)`${o} !== ${r}`)}};xt.default=Xs;var er={};Object.defineProperty(er,"__esModule",{value:!0});const Je=U,Ys=I,Zs=Ze,xs={message:"must be equal to one of the allowed values",params:({schemaCode:e})=>(0,Je._)`{allowedValues: ${e}}`},ea={keyword:"enum",schemaType:"array",$data:!0,error:xs,code(e){const{gen:t,data:r,$data:s,schema:l,schemaCode:o,it:u}=e;if(!s&&l.length===0)throw new Error("enum must have non-empty array");const a=l.length>=u.opts.loopEnum;let i;const f=()=>i??(i=(0,Ys.useFunc)(t,Zs.default));let p;if(a||s)p=t.let("valid"),e.block$data(p,g);else{if(!Array.isArray(l))throw new Error("ajv implementation error");const E=t.const("vSchema",o);p=(0,Je.or)(...l.map(($,b)=>N(E,b)))}e.pass(p);function g(){t.assign(p,!1),t.forOf("v",o,E=>t.if((0,Je._)`${f()}(${r}, ${E})`,()=>t.assign(p,!0).break()))}function N(E,$){const b=l[$];return typeof b=="object"&&b!==null?(0,Je._)`${f()}(${r}, ${E}[${$}])`:(0,Je._)`${r} === ${b}`}}};er.default=ea;Object.defineProperty(Lt,"__esModule",{value:!0});const ta=Gt,ra=Jt,na=Ht,sa=Wt,aa=Qt,oa=Xt,ia=Yt,ca=Zt,la=xt,ua=er,da=[ta.default,ra.default,na.default,sa.default,aa.default,oa.default,ia.default,ca.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},la.default,ua.default];Lt.default=da;var tr={},Fe={};Object.defineProperty(Fe,"__esModule",{value:!0});Fe.validateAdditionalItems=void 0;const je=U,Tt=I,fa={message:({params:{len:e}})=>(0,je.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,je._)`{limit: ${e}}`},ha={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:fa,code(e){const{parentSchema:t,it:r}=e,{items:s}=t;if(!Array.isArray(s)){(0,Tt.checkStrictMode)(r,'"additionalItems" is ignored when "items" is not an array of schemas');return}un(e,s)}};function un(e,t){const{gen:r,schema:s,data:l,keyword:o,it:u}=e;u.items=!0;const a=r.const("len",(0,je._)`${l}.length`);if(s===!1)e.setParams({len:t.length}),e.pass((0,je._)`${a} <= ${t.length}`);else if(typeof s=="object"&&!(0,Tt.alwaysValidSchema)(u,s)){const f=r.var("valid",(0,je._)`${a} <= ${t.length}`);r.if((0,je.not)(f),()=>i(f)),e.ok(f)}function i(f){r.forRange("i",t.length,a,p=>{e.subschema({keyword:o,dataProp:p,dataPropType:Tt.Type.Num},f),u.allErrors||r.if((0,je.not)(f),()=>r.break())})}}Fe.validateAdditionalItems=un;Fe.default=ha;var rr={},Ke={};Object.defineProperty(Ke,"__esModule",{value:!0});Ke.validateTuple=void 0;const Cr=U,it=I,ma=$e(),pa={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(e){const{schema:t,it:r}=e;if(Array.isArray(t))return dn(e,"additionalItems",t);r.items=!0,!(0,it.alwaysValidSchema)(r,t)&&e.ok((0,ma.validateArray)(e))}};function dn(e,t,r=e.schema){const{gen:s,parentSchema:l,data:o,keyword:u,it:a}=e;p(l),a.opts.unevaluated&&r.length&&a.items!==!0&&(a.items=it.mergeEvaluated.items(s,r.length,a.items));const i=s.name("valid"),f=s.const("len",(0,Cr._)`${o}.length`);r.forEach((g,N)=>{(0,it.alwaysValidSchema)(a,g)||(s.if((0,Cr._)`${f} > ${N}`,()=>e.subschema({keyword:u,schemaProp:N,dataProp:N},i)),e.ok(i))});function p(g){const{opts:N,errSchemaPath:E}=a,$=r.length,b=$===g.minItems&&($===g.maxItems||g[t]===!1);if(N.strictTuples&&!b){const y=`"${u}" is ${$}-tuple, but minItems or maxItems/${t} are not specified or different at path "${E}"`;(0,it.checkStrictMode)(a,y,N.strictTuples)}}}Ke.validateTuple=dn;Ke.default=pa;Object.defineProperty(rr,"__esModule",{value:!0});const ya=Ke,$a={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:e=>(0,ya.validateTuple)(e,"items")};rr.default=$a;var nr={};Object.defineProperty(nr,"__esModule",{value:!0});const Ir=U,_a=I,va=$e(),ga=Fe,wa={message:({params:{len:e}})=>(0,Ir.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,Ir._)`{limit: ${e}}`},ba={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:wa,code(e){const{schema:t,parentSchema:r,it:s}=e,{prefixItems:l}=r;s.items=!0,!(0,_a.alwaysValidSchema)(s,t)&&(l?(0,ga.validateAdditionalItems)(e,l):e.ok((0,va.validateArray)(e)))}};nr.default=ba;var sr={};Object.defineProperty(sr,"__esModule",{value:!0});const de=U,rt=I,Ea={message:({params:{min:e,max:t}})=>t===void 0?(0,de.str)`must contain at least ${e} valid item(s)`:(0,de.str)`must contain at least ${e} and no more than ${t} valid item(s)`,params:({params:{min:e,max:t}})=>t===void 0?(0,de._)`{minContains: ${e}}`:(0,de._)`{minContains: ${e}, maxContains: ${t}}`},Pa={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:Ea,code(e){const{gen:t,schema:r,parentSchema:s,data:l,it:o}=e;let u,a;const{minContains:i,maxContains:f}=s;o.opts.next?(u=i===void 0?1:i,a=f):u=1;const p=t.const("len",(0,de._)`${l}.length`);if(e.setParams({min:u,max:a}),a===void 0&&u===0){(0,rt.checkStrictMode)(o,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(a!==void 0&&u>a){(0,rt.checkStrictMode)(o,'"minContains" > "maxContains" is always invalid'),e.fail();return}if((0,rt.alwaysValidSchema)(o,r)){let b=(0,de._)`${p} >= ${u}`;a!==void 0&&(b=(0,de._)`${b} && ${p} <= ${a}`),e.pass(b);return}o.items=!0;const g=t.name("valid");a===void 0&&u===1?E(g,()=>t.if(g,()=>t.break())):u===0?(t.let(g,!0),a!==void 0&&t.if((0,de._)`${l}.length > 0`,N)):(t.let(g,!1),N()),e.result(g,()=>e.reset());function N(){const b=t.name("_valid"),y=t.let("count",0);E(b,()=>t.if(b,()=>$(y)))}function E(b,y){t.forRange("i",0,p,d=>{e.subschema({keyword:"contains",dataProp:d,dataPropType:rt.Type.Num,compositeRule:!0},b),y()})}function $(b){t.code((0,de._)`${b}++`),a===void 0?t.if((0,de._)`${b} >= ${u}`,()=>t.assign(g,!0).break()):(t.if((0,de._)`${b} > ${a}`,()=>t.assign(g,!1).break()),u===1?t.assign(g,!0):t.if((0,de._)`${b} >= ${u}`,()=>t.assign(g,!0)))}}};sr.default=Pa;var fn={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateSchemaDeps=e.validatePropertyDeps=e.error=void 0;const t=U,r=I,s=$e();e.error={message:({params:{property:i,depsCount:f,deps:p}})=>{const g=f===1?"property":"properties";return(0,t.str)`must have ${g} ${p} when property ${i} is present`},params:({params:{property:i,depsCount:f,deps:p,missingProperty:g}})=>(0,t._)`{property: ${i},
    missingProperty: ${g},
    depsCount: ${f},
    deps: ${p}}`};const l={keyword:"dependencies",type:"object",schemaType:"object",error:e.error,code(i){const[f,p]=o(i);u(i,f),a(i,p)}};function o({schema:i}){const f={},p={};for(const g in i){if(g==="__proto__")continue;const N=Array.isArray(i[g])?f:p;N[g]=i[g]}return[f,p]}function u(i,f=i.schema){const{gen:p,data:g,it:N}=i;if(Object.keys(f).length===0)return;const E=p.let("missing");for(const $ in f){const b=f[$];if(b.length===0)continue;const y=(0,s.propertyInData)(p,g,$,N.opts.ownProperties);i.setParams({property:$,depsCount:b.length,deps:b.join(", ")}),N.allErrors?p.if(y,()=>{for(const d of b)(0,s.checkReportMissingProp)(i,d)}):(p.if((0,t._)`${y} && (${(0,s.checkMissingProp)(i,b,E)})`),(0,s.reportMissingProp)(i,E),p.else())}}e.validatePropertyDeps=u;function a(i,f=i.schema){const{gen:p,data:g,keyword:N,it:E}=i,$=p.name("valid");for(const b in f)(0,r.alwaysValidSchema)(E,f[b])||(p.if((0,s.propertyInData)(p,g,b,E.opts.ownProperties),()=>{const y=i.subschema({keyword:N,schemaProp:b},$);i.mergeValidEvaluated(y,$)},()=>p.var($,!0)),i.ok($))}e.validateSchemaDeps=a,e.default=l})(fn);var ar={};Object.defineProperty(ar,"__esModule",{value:!0});const hn=U,Sa=I,Na={message:"property name must be valid",params:({params:e})=>(0,hn._)`{propertyName: ${e.propertyName}}`},ka={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:Na,code(e){const{gen:t,schema:r,data:s,it:l}=e;if((0,Sa.alwaysValidSchema)(l,r))return;const o=t.name("valid");t.forIn("key",s,u=>{e.setParams({propertyName:u}),e.subschema({keyword:"propertyNames",data:u,dataTypes:["string"],propertyName:u,compositeRule:!0},o),t.if((0,hn.not)(o),()=>{e.error(!0),l.allErrors||t.break()})}),e.ok(o)}};ar.default=ka;var $t={};Object.defineProperty($t,"__esModule",{value:!0});const nt=$e(),pe=U,ja=_e,st=I,Oa={message:"must NOT have additional properties",params:({params:e})=>(0,pe._)`{additionalProperty: ${e.additionalProperty}}`},Ra={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:Oa,code(e){const{gen:t,schema:r,parentSchema:s,data:l,errsCount:o,it:u}=e;if(!o)throw new Error("ajv implementation error");const{allErrors:a,opts:i}=u;if(u.props=!0,i.removeAdditional!=="all"&&(0,st.alwaysValidSchema)(u,r))return;const f=(0,nt.allSchemaProperties)(s.properties),p=(0,nt.allSchemaProperties)(s.patternProperties);g(),e.ok((0,pe._)`${o} === ${ja.default.errors}`);function g(){t.forIn("key",l,y=>{!f.length&&!p.length?$(y):t.if(N(y),()=>$(y))})}function N(y){let d;if(f.length>8){const m=(0,st.schemaRefOrVal)(u,s.properties,"properties");d=(0,nt.isOwnProperty)(t,m,y)}else f.length?d=(0,pe.or)(...f.map(m=>(0,pe._)`${y} === ${m}`)):d=pe.nil;return p.length&&(d=(0,pe.or)(d,...p.map(m=>(0,pe._)`${(0,nt.usePattern)(e,m)}.test(${y})`))),(0,pe.not)(d)}function E(y){t.code((0,pe._)`delete ${l}[${y}]`)}function $(y){if(i.removeAdditional==="all"||i.removeAdditional&&r===!1){E(y);return}if(r===!1){e.setParams({additionalProperty:y}),e.error(),a||t.break();return}if(typeof r=="object"&&!(0,st.alwaysValidSchema)(u,r)){const d=t.name("valid");i.removeAdditional==="failing"?(b(y,d,!1),t.if((0,pe.not)(d),()=>{e.reset(),E(y)})):(b(y,d),a||t.if((0,pe.not)(d),()=>t.break()))}}function b(y,d,m){const P={keyword:"additionalProperties",dataProp:y,dataPropType:st.Type.Str};m===!1&&Object.assign(P,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema(P,d)}}};$t.default=Ra;var or={};Object.defineProperty(or,"__esModule",{value:!0});const Ta=ht(),Mr=$e(),Pt=I,Ar=$t,Ca={keyword:"properties",type:"object",schemaType:"object",code(e){const{gen:t,schema:r,parentSchema:s,data:l,it:o}=e;o.opts.removeAdditional==="all"&&s.additionalProperties===void 0&&Ar.default.code(new Ta.KeywordCxt(o,Ar.default,"additionalProperties"));const u=(0,Mr.allSchemaProperties)(r);for(const g of u)o.definedProperties.add(g);o.opts.unevaluated&&u.length&&o.props!==!0&&(o.props=Pt.mergeEvaluated.props(t,(0,Pt.toHash)(u),o.props));const a=u.filter(g=>!(0,Pt.alwaysValidSchema)(o,r[g]));if(a.length===0)return;const i=t.name("valid");for(const g of a)f(g)?p(g):(t.if((0,Mr.propertyInData)(t,l,g,o.opts.ownProperties)),p(g),o.allErrors||t.else().var(i,!0),t.endIf()),e.it.definedProperties.add(g),e.ok(i);function f(g){return o.opts.useDefaults&&!o.compositeRule&&r[g].default!==void 0}function p(g){e.subschema({keyword:"properties",schemaProp:g,dataProp:g},i)}}};or.default=Ca;var ir={};Object.defineProperty(ir,"__esModule",{value:!0});const Dr=$e(),at=U,Vr=I,qr=I,Ia={keyword:"patternProperties",type:"object",schemaType:"object",code(e){const{gen:t,schema:r,data:s,parentSchema:l,it:o}=e,{opts:u}=o,a=(0,Dr.allSchemaProperties)(r),i=a.filter(b=>(0,Vr.alwaysValidSchema)(o,r[b]));if(a.length===0||i.length===a.length&&(!o.opts.unevaluated||o.props===!0))return;const f=u.strictSchema&&!u.allowMatchingProperties&&l.properties,p=t.name("valid");o.props!==!0&&!(o.props instanceof at.Name)&&(o.props=(0,qr.evaluatedPropsToName)(t,o.props));const{props:g}=o;N();function N(){for(const b of a)f&&E(b),o.allErrors?$(b):(t.var(p,!0),$(b),t.if(p))}function E(b){for(const y in f)new RegExp(b).test(y)&&(0,Vr.checkStrictMode)(o,`property ${y} matches pattern ${b} (use allowMatchingProperties)`)}function $(b){t.forIn("key",s,y=>{t.if((0,at._)`${(0,Dr.usePattern)(e,b)}.test(${y})`,()=>{const d=i.includes(b);d||e.subschema({keyword:"patternProperties",schemaProp:b,dataProp:y,dataPropType:qr.Type.Str},p),o.opts.unevaluated&&g!==!0?t.assign((0,at._)`${g}[${y}]`,!0):!d&&!o.allErrors&&t.if((0,at.not)(p),()=>t.break())})})}}};ir.default=Ia;var cr={};Object.defineProperty(cr,"__esModule",{value:!0});const Ma=I,Aa={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(e){const{gen:t,schema:r,it:s}=e;if((0,Ma.alwaysValidSchema)(s,r)){e.fail();return}const l=t.name("valid");e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},l),e.failResult(l,()=>e.reset(),()=>e.error())},error:{message:"must NOT be valid"}};cr.default=Aa;var lr={};Object.defineProperty(lr,"__esModule",{value:!0});const Da=$e(),Va={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:Da.validateUnion,error:{message:"must match a schema in anyOf"}};lr.default=Va;var ur={};Object.defineProperty(ur,"__esModule",{value:!0});const ct=U,qa=I,Fa={message:"must match exactly one schema in oneOf",params:({params:e})=>(0,ct._)`{passingSchemas: ${e.passing}}`},Ka={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:Fa,code(e){const{gen:t,schema:r,parentSchema:s,it:l}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");if(l.opts.discriminator&&s.discriminator)return;const o=r,u=t.let("valid",!1),a=t.let("passing",null),i=t.name("_valid");e.setParams({passing:a}),t.block(f),e.result(u,()=>e.reset(),()=>e.error(!0));function f(){o.forEach((p,g)=>{let N;(0,qa.alwaysValidSchema)(l,p)?t.var(i,!0):N=e.subschema({keyword:"oneOf",schemaProp:g,compositeRule:!0},i),g>0&&t.if((0,ct._)`${i} && ${u}`).assign(u,!1).assign(a,(0,ct._)`[${a}, ${g}]`).else(),t.if(i,()=>{t.assign(u,!0),t.assign(a,g),N&&e.mergeEvaluated(N,ct.Name)})})}}};ur.default=Ka;var dr={};Object.defineProperty(dr,"__esModule",{value:!0});const Ua=I,za={keyword:"allOf",schemaType:"array",code(e){const{gen:t,schema:r,it:s}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");const l=t.name("valid");r.forEach((o,u)=>{if((0,Ua.alwaysValidSchema)(s,o))return;const a=e.subschema({keyword:"allOf",schemaProp:u},l);e.ok(l),e.mergeEvaluated(a)})}};dr.default=za;var fr={};Object.defineProperty(fr,"__esModule",{value:!0});const ft=U,mn=I,La={message:({params:e})=>(0,ft.str)`must match "${e.ifClause}" schema`,params:({params:e})=>(0,ft._)`{failingKeyword: ${e.ifClause}}`},Ga={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:La,code(e){const{gen:t,parentSchema:r,it:s}=e;r.then===void 0&&r.else===void 0&&(0,mn.checkStrictMode)(s,'"if" without "then" and "else" is ignored');const l=Fr(s,"then"),o=Fr(s,"else");if(!l&&!o)return;const u=t.let("valid",!0),a=t.name("_valid");if(i(),e.reset(),l&&o){const p=t.let("ifClause");e.setParams({ifClause:p}),t.if(a,f("then",p),f("else",p))}else l?t.if(a,f("then")):t.if((0,ft.not)(a),f("else"));e.pass(u,()=>e.error(!0));function i(){const p=e.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},a);e.mergeEvaluated(p)}function f(p,g){return()=>{const N=e.subschema({keyword:p},a);t.assign(u,a),e.mergeValidEvaluated(N,u),g?t.assign(g,(0,ft._)`${p}`):e.setParams({ifClause:p})}}}};function Fr(e,t){const r=e.schema[t];return r!==void 0&&!(0,mn.alwaysValidSchema)(e,r)}fr.default=Ga;var hr={};Object.defineProperty(hr,"__esModule",{value:!0});const Ja=I,Ha={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:e,parentSchema:t,it:r}){t.if===void 0&&(0,Ja.checkStrictMode)(r,`"${e}" without "if" is ignored`)}};hr.default=Ha;Object.defineProperty(tr,"__esModule",{value:!0});const Ba=Fe,Wa=rr,Qa=Ke,Xa=nr,Ya=sr,Za=fn,xa=ar,eo=$t,to=or,ro=ir,no=cr,so=lr,ao=ur,oo=dr,io=fr,co=hr;function lo(e=!1){const t=[no.default,so.default,ao.default,oo.default,io.default,co.default,xa.default,eo.default,Za.default,to.default,ro.default];return e?t.push(Wa.default,Xa.default):t.push(Ba.default,Qa.default),t.push(Ya.default),t}tr.default=lo;var mr={},pr={};Object.defineProperty(pr,"__esModule",{value:!0});const X=U,uo={message:({schemaCode:e})=>(0,X.str)`must match format "${e}"`,params:({schemaCode:e})=>(0,X._)`{format: ${e}}`},fo={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:uo,code(e,t){const{gen:r,data:s,$data:l,schema:o,schemaCode:u,it:a}=e,{opts:i,errSchemaPath:f,schemaEnv:p,self:g}=a;if(!i.validateFormats)return;l?N():E();function N(){const $=r.scopeValue("formats",{ref:g.formats,code:i.code.formats}),b=r.const("fDef",(0,X._)`${$}[${u}]`),y=r.let("fType"),d=r.let("format");r.if((0,X._)`typeof ${b} == "object" && !(${b} instanceof RegExp)`,()=>r.assign(y,(0,X._)`${b}.type || "string"`).assign(d,(0,X._)`${b}.validate`),()=>r.assign(y,(0,X._)`"string"`).assign(d,b)),e.fail$data((0,X.or)(m(),P()));function m(){return i.strictSchema===!1?X.nil:(0,X._)`${u} && !${d}`}function P(){const j=p.$async?(0,X._)`(${b}.async ? await ${d}(${s}) : ${d}(${s}))`:(0,X._)`${d}(${s})`,R=(0,X._)`(typeof ${d} == "function" ? ${j} : ${d}.test(${s}))`;return(0,X._)`${d} && ${d} !== true && ${y} === ${t} && !${R}`}}function E(){const $=g.formats[o];if(!$){m();return}if($===!0)return;const[b,y,d]=P($);b===t&&e.pass(j());function m(){if(i.strictSchema===!1){g.logger.warn(R());return}throw new Error(R());function R(){return`unknown format "${o}" ignored in schema at path "${f}"`}}function P(R){const V=R instanceof RegExp?(0,X.regexpCode)(R):i.code.formats?(0,X._)`${i.code.formats}${(0,X.getProperty)(o)}`:void 0,q=r.scopeValue("formats",{key:o,ref:R,code:V});return typeof R=="object"&&!(R instanceof RegExp)?[R.type||"string",R.validate,(0,X._)`${q}.validate`]:["string",R,q]}function j(){if(typeof $=="object"&&!($ instanceof RegExp)&&$.async){if(!p.$async)throw new Error("async format in sync schema");return(0,X._)`await ${d}(${s})`}return typeof y=="function"?(0,X._)`${d}(${s})`:(0,X._)`${d}.test(${s})`}}}};pr.default=fo;Object.defineProperty(mr,"__esModule",{value:!0});const ho=pr,mo=[ho.default];mr.default=mo;var qe={};Object.defineProperty(qe,"__esModule",{value:!0});qe.contentVocabulary=qe.metadataVocabulary=void 0;qe.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];qe.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"];Object.defineProperty(Kt,"__esModule",{value:!0});const po=Ut,yo=Lt,$o=tr,_o=mr,Kr=qe,vo=[po.default,yo.default,(0,$o.default)(),_o.default,Kr.metadataVocabulary,Kr.contentVocabulary];Kt.default=vo;var yr={},_t={};Object.defineProperty(_t,"__esModule",{value:!0});_t.DiscrError=void 0;var Ur;(function(e){e.Tag="tag",e.Mapping="mapping"})(Ur||(_t.DiscrError=Ur={}));Object.defineProperty(yr,"__esModule",{value:!0});const Ae=U,Ct=_t,zr=le,go=mt(),wo=I,bo={message:({params:{discrError:e,tagName:t}})=>e===Ct.DiscrError.Tag?`tag "${t}" must be string`:`value of tag "${t}" must be in oneOf`,params:({params:{discrError:e,tag:t,tagName:r}})=>(0,Ae._)`{error: ${e}, tag: ${r}, tagValue: ${t}}`},Eo={keyword:"discriminator",type:"object",schemaType:"object",error:bo,code(e){const{gen:t,data:r,schema:s,parentSchema:l,it:o}=e,{oneOf:u}=l;if(!o.opts.discriminator)throw new Error("discriminator: requires discriminator option");const a=s.propertyName;if(typeof a!="string")throw new Error("discriminator: requires propertyName");if(s.mapping)throw new Error("discriminator: mapping is not supported");if(!u)throw new Error("discriminator: requires oneOf keyword");const i=t.let("valid",!1),f=t.const("tag",(0,Ae._)`${r}${(0,Ae.getProperty)(a)}`);t.if((0,Ae._)`typeof ${f} == "string"`,()=>p(),()=>e.error(!1,{discrError:Ct.DiscrError.Tag,tag:f,tagName:a})),e.ok(i);function p(){const E=N();t.if(!1);for(const $ in E)t.elseIf((0,Ae._)`${f} === ${$}`),t.assign(i,g(E[$]));t.else(),e.error(!1,{discrError:Ct.DiscrError.Mapping,tag:f,tagName:a}),t.endIf()}function g(E){const $=t.name("valid"),b=e.subschema({keyword:"oneOf",schemaProp:E},$);return e.mergeEvaluated(b,Ae.Name),$}function N(){var E;const $={},b=d(l);let y=!0;for(let j=0;j<u.length;j++){let R=u[j];if(R?.$ref&&!(0,wo.schemaHasRulesButRef)(R,o.self.RULES)){const q=R.$ref;if(R=zr.resolveRef.call(o.self,o.schemaEnv.root,o.baseId,q),R instanceof zr.SchemaEnv&&(R=R.schema),R===void 0)throw new go.default(o.opts.uriResolver,o.baseId,q)}const V=(E=R?.properties)===null||E===void 0?void 0:E[a];if(typeof V!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${a}"`);y=y&&(b||d(R)),m(V,j)}if(!y)throw new Error(`discriminator: "${a}" must be required`);return $;function d({required:j}){return Array.isArray(j)&&j.includes(a)}function m(j,R){if(j.const)P(j.const,R);else if(j.enum)for(const V of j.enum)P(V,R);else throw new Error(`discriminator: "properties/${a}" must have "const" or "enum"`)}function P(j,R){if(typeof j!="string"||j in $)throw new Error(`discriminator: "${a}" values must be unique strings`);$[j]=R}}}};yr.default=Eo;const Po="http://json-schema.org/draft-07/schema#",So="http://json-schema.org/draft-07/schema#",No="Core schema meta-schema",ko={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},jo=["object","boolean"],Oo={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},Ro={$schema:Po,$id:So,title:No,definitions:ko,type:jo,properties:Oo,default:!0};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=t.Ajv=void 0;const r=Gr,s=Kt,l=yr,o=Ro,u=["/properties"],a="http://json-schema.org/draft-07/schema";class i extends r.default{_addVocabularies(){super._addVocabularies(),s.default.forEach($=>this.addVocabulary($)),this.opts.discriminator&&this.addKeyword(l.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const $=this.opts.$data?this.$dataMetaSchema(o,u):o;this.addMetaSchema($,a,!1),this.refs["http://json-schema.org/schema"]=a}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(a)?a:void 0)}}t.Ajv=i,e.exports=t=i,e.exports.Ajv=i,Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var f=ht();Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return f.KeywordCxt}});var p=U;Object.defineProperty(t,"_",{enumerable:!0,get:function(){return p._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return p.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return p.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return p.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return p.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return p.CodeGen}});var g=Vt();Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return g.default}});var N=mt();Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return N.default}})})(St,St.exports);var To=St.exports;const Vo=_n(To);export{Vo as A,Do as a,Ao as c,_n as g};
