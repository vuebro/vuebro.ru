import{defineComponent as y,computed as w,ref as b,watch as B,onUnmounted as C,openBlock as v,createElementBlock as M,Fragment as O,renderList as j,normalizeClass as z,createBlock as D,resolveDynamicComponent as F}from"vue";import{p as L,b as P}from"./vues3-D1ixC1qx.js";import{a as R,b as T}from"./vueuse-BnEJPnEc.js";import{useRouter as U}from"vue-router";import{$ as l,p as _,m as X,r as Y,t as k,a as q,s as A,_ as G}from"./index-Cxj1B8l7.js";import{v as E}from"./uuid-C_lTrkZC.js";import"./ajv-keywords-CuM6mo8B.js";import"./fast-deep-equal-C148XJoK.js";import"./fast-uri-J6I7s6O_.js";import"./unocss-CO-gQP3e.js";import"./ofetch-DKyuTA_G.js";import"./destr-Cx7WjB9q.js";import"./ufo-LxZlbPj-.js";import"./iconify-DlADaerg.js";import"./debug-CP4J2T3R.js";import"./ms-CzQ2E3wO.js";import"./magic-string-D9CdRQHO.js";import"./jridgewell-9KHfGwW6.js";import"./unhead-BG2aZ-uN.js";import"./hookable-B7_1qfUG.js";import"./vue3-sfc-loader-DdTOzAd6.js";const H=y({__name:"MultiView",setup(S,{expose:h}){h();const s=w(()=>new Map(l.value.map(({id:e=E()})=>[e,!1]))),r=b(new Map(s.value)),p=b([]),c=U(),t=[],a=w(()=>{const[[e,o]=[]]=_;return _.clear(),e&&o&&_.set(e,o),Object.fromEntries(l.value.map(n=>[n.id,X(n)]))}),u=()=>{t.forEach(e=>{e()}),t.length=0},V=({id:e})=>a.value[e];B(p,e=>{u(),setTimeout(()=>{e.forEach(o=>{const{stop:n}=R(o,([{isIntersecting:m,target:{id:i}={}}={}]=[])=>{r.value=new Map(s.value),i&&m!==void 0&&s.value.set(i,m)},{threshold:.1});t.push(n)})})},{deep:!0}),T(window,{behavior:"smooth",onStop:()=>{var e,o;if(!q.value&&k.value&&l.value.length){const{scrollX:n,scrollY:m}=window,[i]=l.value,[d]=L.value;if(d&&i){const{$children:[{id:$}={}]=[]}=d,x=!Math.floor(n)&&!Math.floor(m)&&i.id===$?d.id:((e=[...s.value.entries()].find(([,f])=>f))==null?void 0:e[0])??((o=[...r.value.entries()].find(([,f])=>f))==null?void 0:o[0])??i.id;A.value=!1,c.push({name:x}).catch(P)}}}}),C(u);const g={intersecting:s,$intersecting:r,refs:p,router:c,stops:t,templates:a,clearStops:u,template:V,get v4(){return E},get $siblings(){return l},get resolve(){return Y},get that(){return k}};return Object.defineProperty(g,"__isScriptSetup",{enumerable:!1,value:!0}),g}}),I=["id","role"];function J(S,h,s,r,p,c){return v(!0),M(O,null,j(r.$siblings,t=>{var a;return v(),M("div",{id:t.id??r.v4(),key:t.id??r.v4(),ref_for:!0,ref:"refs",class:z(t.class),role:t.id===((a=r.that)==null?void 0:a.id)?"main":"section","un-cloak":""},[(v(),D(F(r.template(t)),{id:t.id,onVnodeMounted:u=>r.resolve(t)},null,8,["id","onVnodeMounted"]))],10,I)}),128)}const _e=G(H,[["render",J],["__file","MultiView.vue"]]);export{_e as default};
