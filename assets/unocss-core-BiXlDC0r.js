var gt=Object.defineProperty;var yt=(r,t,e)=>t in r?gt(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e;var B=(r,t,e)=>yt(r,typeof t!="symbol"?t+"":t,e);const H="default",Z="preflights",St="shortcuts",wt="imports",$t={[wt]:-200,[Z]:-100,[St]:-10,[H]:0},At=/[\\:]?[\s'"`;{}]+/g;function vt(r){return r.split(At)}const xt={name:"@unocss/core/extractor-split",order:0,extract({code:r}){return vt(r)}};function O(r=[]){return Array.isArray(r)?r:[r]}function F(r){return Array.from(new Set(r))}function st(r,t){return r.reduce((e,n)=>(e.findIndex(l=>t(n,l))===-1&&e.push(n),e),[])}function _(r){return typeof r=="string"}class ut extends Set{constructor(e){super(e);B(this,"_map");this._map??(this._map=new Map)}add(e){return this._map??(this._map=new Map),this._map.set(e,(this._map.get(e)??0)+1),super.add(e)}delete(e){return this._map.delete(e),super.delete(e)}clear(){this._map.clear(),super.clear()}getCount(e){return this._map.get(e)??0}setCount(e,n){return this._map.set(e,n),super.add(e)}}function K(r){return r instanceof ut}function Qt(r){return r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Mt(r){const t=r.length;let e=-1,n,i="";const l=r.charCodeAt(0);for(;++e<t;){if(n=r.charCodeAt(e),n===0){i+="ï¿½";continue}if(n===37){i+="\\%";continue}if(n===44){i+="\\,";continue}if(n>=1&&n<=31||n===127||e===0&&n>=48&&n<=57||e===1&&n>=48&&n<=57&&l===45){i+=`\\${n.toString(16)} `;continue}if(e===0&&t===1&&n===45){i+=`\\${r.charAt(e)}`;continue}if(n>=128||n===45||n===95||n>=48&&n<=57||n>=65&&n<=90||n>=97&&n<=122){i+=r.charAt(e);continue}i+=`\\${r.charAt(e)}`}return i}const J=Mt;function bt(){return{events:{},emit(r,...t){(this.events[r]||[]).forEach(e=>e(...t))},on(r,t){return(this.events[r]=this.events[r]||[]).push(t),()=>this.events[r]=(this.events[r]||[]).filter(e=>e!==t)}}}const Ct=/^\[(.+?)~?="(.*)"\]$/,_t=/[\w\u00A0-\uFFFF%-?]/;function Xt(r){return r.match(Ct)}function Zt(r=""){return _t.test(r)}function Et(r){return typeof r=="function"?{match:r}:r}function it(r){return r.length===3}function Q(r){return r!=null}function Ot(){}class Rt{constructor(){B(this,"_map",new Map)}get(t,e){const n=this._map.get(t);if(n)return n.get(e)}getFallback(t,e,n){let i=this._map.get(t);return i||(i=new Map,this._map.set(t,i)),i.has(e)||i.set(e,n),i.get(e)}set(t,e,n){let i=this._map.get(t);return i||(i=new Map,this._map.set(t,i)),i.set(e,n),this}has(t,e){var n;return(n=this._map.get(t))==null?void 0:n.has(e)}delete(t,e){var n;return((n=this._map.get(t))==null?void 0:n.delete(e))||!1}deleteTop(t){return this._map.delete(t)}map(t){return Array.from(this._map.entries()).flatMap(([e,n])=>Array.from(n.entries()).map(([i,l])=>t(l,e,i)))}}class jt extends Map{getFallback(t,e){const n=this.get(t);return n===void 0?(this.set(t,e),e):n}map(t){const e=[];return this.forEach((n,i)=>{e.push(t(n,i))}),e}flatMap(t){const e=[];return this.forEach((n,i)=>{e.push(...t(n,i))}),e}}function D(r){return _(r)?r:(Array.isArray(r)?r:Object.entries(r)).filter(t=>t[1]!=null)}function Lt(r){return Array.isArray(r)?r.find(t=>!Array.isArray(t)||Array.isArray(t[0]))?r.map(t=>D(t)):[r]:[D(r)]}function Pt(r){return r.filter(([t,e],n)=>{if(t.startsWith("$$"))return!1;for(let i=n-1;i>=0;i--)if(r[i][0]===t&&r[i][1]===e)return!1;return!0})}function X(r){return r==null?"":Pt(r).map(([t,e])=>e!=null&&typeof e!="function"?`${t}:${e};`:void 0).filter(Boolean).join("")}function G(r){return r&&typeof r=="object"&&!Array.isArray(r)}function ht(r,t,e=!1){const n=r,i=t;if(Array.isArray(i))return e&&Array.isArray(i)?[...n,...i]:[...i];const l={...n};return G(n)&&G(i)&&Object.keys(i).forEach(u=>{G(n[u])&&G(i[u])||Array.isArray(n[u])&&Array.isArray(i[u])?l[u]=ht(n[u],i[u],e):Object.assign(l,{[u]:i[u]})}),l}function W(r){let t,e,n;if(Array.isArray(r)){for(e=Array.from({length:t=r.length});t--;)e[t]=(n=r[t])&&typeof n=="object"?W(n):n;return e}if(Object.prototype.toString.call(r)==="[object Object]"){e={};for(t in r)t==="__proto__"?Object.defineProperty(e,t,{value:W(r[t]),configurable:!0,enumerable:!0,writable:!0}):e[t]=(n=r[t])&&typeof n=="object"?W(n):n;return e}return r}function Tt(r){return _(r[0])}function Vt(r){return _(r[0])}const Y={};function Bt(r=["-",":"]){const t=r.join("|");return Y[t]||(Y[t]=new RegExp(`((?:[!@<~\\w+:_-]|\\[&?>?:?\\S*\\])+?)(${t})\\(((?:[~!<>\\w\\s:/\\\\,%#.$?-]|\\[.*?\\])+?)\\)(?!\\s*?=>)`,"gm")),Y[t].lastIndex=0,Y[t]}function Ft(r,t=["-",":"],e=5){const n=Bt(t);let i,l=r.toString();const u=new Set,p=new Map;do i=!1,l=l.replace(n,(f,s,a,m,g)=>{var $;if(!t.includes(a))return f;i=!0,u.add(s+a);const w=g+s.length+a.length+1,S={length:f.length,items:[]};p.set(g,S);for(const A of[...m.matchAll(/\S+/g)]){const b=w+A.index;let v=($=p.get(b))==null?void 0:$.items;v?p.delete(b):v=[{offset:b,length:A[0].length,className:A[0]}];for(const y of v)y.className=y.className==="~"?s:y.className.replace(/^(!?)(.*)/,`$1${s}${a}$2`),S.items.push(y)}return"$".repeat(f.length)}),e-=1;while(i&&e);let c;if(typeof r=="string"){c="";let f=0;for(const[s,a]of p)c+=r.slice(f,s),c+=a.items.map(m=>m.className).join(" "),f=s+a.length;c+=r.slice(f)}else{c=r;for(const[f,s]of p)c.overwrite(f,f+s.length,s.items.map(a=>a.className).join(" "))}return{prefixes:Array.from(u),hasChanged:i,groupsByOffset:p,get expanded(){return c.toString()}}}function kt(r,t=["-",":"],e=5){const n=Ft(r,t,e);return typeof r=="string"?n.expanded:r}const ot=new Set;function Nt(r){ot.has(r)||(console.warn("[unocss]",r),ot.add(r))}function pt(r){return O(r).flatMap(t=>Array.isArray(t)?[t]:Object.entries(t))}const at="_uno_resolved";async function It(r){var n;let t=typeof r=="function"?await r():await r;if(at in t)return t;t={...t},Object.defineProperty(t,at,{value:!0,enumerable:!1});const e=t.shortcuts?pt(t.shortcuts):void 0;if(t.shortcuts=e,t.prefix||t.layer){const i=l=>{l[2]||(l[2]={});const u=l[2];u.prefix==null&&t.prefix&&(u.prefix=O(t.prefix)),u.layer==null&&t.layer&&(u.layer=t.layer)};e==null||e.forEach(i),(n=t.rules)==null||n.forEach(i)}return t}async function dt(r){const t=await It(r);if(!t.presets)return[t];const e=(await Promise.all((t.presets||[]).flatMap(O).flatMap(dt))).flat();return[t,...e]}function Ut(r){var c,f;if(r.length===0)return{};const t=[],e=[];let n=!1;const i=[],l=[],u=[];for(const s of r){if(s.pipeline===!1){n=!0;break}else(c=s.pipeline)!=null&&c.include&&t.push(s.pipeline.include),(f=s.pipeline)!=null&&f.exclude&&e.push(s.pipeline.exclude);s.filesystem&&i.push(s.filesystem),s.inline&&l.push(s.inline),s.plain&&u.push(s.plain)}const p={pipeline:n?!1:{include:F(lt(...t)),exclude:F(lt(...e))}};return i.length&&(p.filesystem=F(i.flat())),l.length&&(p.inline=F(l.flat())),u.length&&(p.plain=F(u.flat())),p}async function ct(r={},t={}){var M,d;const e=Object.assign({},t,r),n=st((await Promise.all((e.presets||[]).flatMap(O).flatMap(dt))).flat(),(o,h)=>o.name===h.name),i=[...n.filter(o=>o.enforce==="pre"),...n.filter(o=>!o.enforce),...n.filter(o=>o.enforce==="post")],l=[...i,e],u=[...l].reverse(),p=Object.assign({},$t,...l.map(o=>o.layers));function c(o){return F(l.flatMap(h=>O(h[o]||[])))}const f=c("extractors");let s=(M=u.find(o=>o.extractorDefault!==void 0))==null?void 0:M.extractorDefault;s===void 0&&(s=xt),s&&!f.includes(s)&&f.unshift(s),f.sort((o,h)=>(o.order||0)-(h.order||0));const a=c("rules"),m={},g=a.length,w=a.filter(o=>{var x;return Tt(o)?(O(((x=o[2])==null?void 0:x.prefix)||"").forEach(j=>{m[j+o[0]]=o}),!1):!0}).reverse();let S=Dt(l.map(o=>o.theme));const $=c("extendTheme");for(const o of $)S=o(S)||S;const A={templates:F(l.flatMap(o=>{var h;return O((h=o.autocomplete)==null?void 0:h.templates)})),extractors:l.flatMap(o=>{var h;return O((h=o.autocomplete)==null?void 0:h.extractors)}).sort((o,h)=>(o.order||0)-(h.order||0)),shorthands:zt(l.map(o=>{var h;return((h=o.autocomplete)==null?void 0:h.shorthands)||{}}))};let b=c("separators");b.length||(b=[":","-"]);const v=c("content"),y=Ut(v),E={mergeSelectors:!0,warn:!0,sortLayers:o=>o,...e,blocklist:c("blocklist"),presets:i,envMode:e.envMode||"build",shortcutsLayer:e.shortcutsLayer||"shortcuts",layers:p,theme:S,rules:a,rulesSize:g,rulesDynamic:w,rulesStaticMap:m,preprocess:c("preprocess"),postprocess:c("postprocess"),preflights:c("preflights"),autocomplete:A,variants:c("variants").map(Et).sort((o,h)=>(o.order||0)-(h.order||0)),shortcuts:pt(c("shortcuts")).reverse(),extractors:f,safelist:c("safelist"),separators:b,details:e.details??e.envMode==="dev",content:y,transformers:st(c("transformers"),(o,h)=>o.name===h.name)};for(const o of l)(d=o==null?void 0:o.configResolved)==null||d.call(o,E);return E}function Dt(r){return r.map(t=>t?W(t):{}).reduce((t,e)=>ht(t,e),{})}function zt(r){return r.reduce((t,e)=>{const n={};for(const i in e){const l=e[i];Array.isArray(l)?n[i]=`(${l.join("|")})`:n[i]=l}return{...t,...n}},{})}function lt(...r){return r.flatMap(Gt)}function Gt(r){return Array.isArray(r)?r:r?[r]:[]}function te(r){return r}const Yt="66.0.0",k={shortcutsNoMerge:"$$symbol-shortcut-no-merge",variants:"$$symbol-variants",parent:"$$symbol-parent",selector:"$$symbol-selector",layer:"$$symbol-layer",sort:"$$symbol-sort"};class tt{constructor(t={},e={}){B(this,"version",Yt);B(this,"events",bt());B(this,"config");B(this,"cache",new Map);B(this,"blocked",new Set);B(this,"parentOrders",new Map);B(this,"activatedRules",new Set);this.userConfig=t,this.defaults=e}static async create(t={},e={}){const n=new tt(t,e);return n.config=await ct(n.userConfig,n.defaults),n.events.emit("config",n.config),n}async setConfig(t,e){t&&(e&&(this.defaults=e),this.userConfig=t,this.blocked.clear(),this.parentOrders.clear(),this.activatedRules.clear(),this.cache.clear(),this.config=await ct(t,this.defaults),this.events.emit("config",this.config))}async applyExtractors(t,e,n=new Set){var l;const i={original:t,code:t,id:e,extracted:n,envMode:this.config.envMode};for(const u of this.config.extractors){const p=await((l=u.extract)==null?void 0:l.call(u,i));if(p)if(K(p)&&K(n))for(const c of p)n.setCount(c,n.getCount(c)+p.getCount(c));else for(const c of p)n.add(c)}return n}makeContext(t,e){const n={rawSelector:t,currentSelector:e[1],theme:this.config.theme,generator:this,symbols:k,variantHandlers:e[2],constructCSS:(...i)=>this.constructCustomCSS(n,...i),variantMatch:e};return n}async parseToken(t,e){if(this.blocked.has(t))return;const n=`${t}${e?` ${e}`:""}`;if(this.cache.has(n))return this.cache.get(n);let i=t;for(const c of this.config.preprocess)i=c(t);if(this.isBlocked(i)){this.blocked.add(t),this.cache.set(n,null);return}const l=await this.matchVariants(t,i);if(l.every(c=>!c||this.isBlocked(c[1]))){this.blocked.add(t),this.cache.set(n,null);return}const u=async c=>{var m;const f=this.makeContext(t,[e||c[0],c[1],c[2],c[3]]);this.config.details&&(f.variants=[...c[3]]);const s=await this.expandShortcut(f.currentSelector,f);return s?await this.stringifyShortcuts(f.variantMatch,f,s[0],s[1]):(m=await this.parseUtil(f.variantMatch,f))==null?void 0:m.map(g=>this.stringifyUtil(g,f)).filter(Q)},p=(await Promise.all(l.map(c=>u(c)))).flat().filter(c=>!!c);if(p!=null&&p.length)return this.cache.set(n,p),p;this.cache.set(n,null)}async generate(t,e={}){const{id:n,scope:i,preflights:l=!0,safelist:u=!0,minify:p=!1,extendedInfo:c=!1}=e,f=_(t)?await this.applyExtractors(t,n,c?new ut:new Set):Array.isArray(t)?new Set(t):t;if(u){const d={generator:this,theme:this.config.theme};this.config.safelist.flatMap(o=>typeof o=="function"?o(d):o).forEach(o=>{f.has(o)||f.add(o)})}const s=p?"":`
`,a=new Set([H]),m=c?new Map:new Set,g=new Map;let w={};const S=Array.from(f).map(async d=>{var h;if(m.has(d))return;const o=await this.parseToken(d);if(o!=null){m instanceof Map?m.set(d,{data:o,count:K(f)?f.getCount(d):-1}):m.add(d);for(const x of o){const j=x[3]||"",P=(h=x[4])==null?void 0:h.layer;g.has(j)||g.set(j,[]),g.get(j).push(x),P&&a.add(P)}}});await Promise.all(S),await(async()=>{if(!l)return;const d={generator:this,theme:this.config.theme},o=new Set([]);this.config.preflights.forEach(({layer:h=Z})=>{a.add(h),o.add(h)}),w=Object.fromEntries(await Promise.all(Array.from(o).map(async h=>{const j=(await Promise.all(this.config.preflights.filter(P=>(P.layer||Z)===h).map(async P=>await P.getCSS(d)))).filter(Boolean).join(s);return[h,j]})))})();const $=this.config.sortLayers(Array.from(a).sort((d,o)=>(this.config.layers[d]??0)-(this.config.layers[o]??0)||d.localeCompare(o))),A={},b=this.config.outputToCssLayers,v=d=>{var h;let o=d;return typeof b=="object"&&(o=(h=b.cssLayerName)==null?void 0:h.call(b,d)),o===null?null:o??d},y=(d=H)=>{if(A[d])return A[d];let o=Array.from(g).sort((j,P)=>{var z;return(this.parentOrders.get(j[0])??0)-(this.parentOrders.get(P[0])??0)||((z=j[0])==null?void 0:z.localeCompare(P[0]||""))||0}).map(([j,P])=>{const z=P.length,q=P.filter(C=>{var R;return(((R=C[4])==null?void 0:R.layer)||H)===d}).sort((C,R)=>{var T,N,I,V,L,U,nt;return C[0]-R[0]||(((T=C[4])==null?void 0:T.sort)||0)-(((N=R[4])==null?void 0:N.sort)||0)||((L=(I=C[5])==null?void 0:I.currentSelector)==null?void 0:L.localeCompare(((V=R[5])==null?void 0:V.currentSelector)??""))||((U=C[1])==null?void 0:U.localeCompare(R[1]||""))||((nt=C[2])==null?void 0:nt.localeCompare(R[2]||""))||0}).map(([,C,R,,T,,N])=>[[[(C&&Wt(C,i))??"",(T==null?void 0:T.sort)??0]],R,!!(N??(T==null?void 0:T.noMerge))]);if(!q.length)return;const et=q.reverse().map(([C,R,T],N)=>{if(!T&&this.config.mergeSelectors)for(let V=N+1;V<z;V++){const L=q[V];if(L&&!L[2]&&(C&&L[0]||C==null&&L[0]==null)&&L[1]===R)return C&&L[0]&&L[0].push(...C),null}const I=C?F(C.sort((V,L)=>{var U;return V[1]-L[1]||((U=V[0])==null?void 0:U.localeCompare(L[0]||""))||0}).map(V=>V[0]).filter(Boolean)):[];return I.length?`${I.join(`,${s}`)}{${R}}`:R}).filter(Boolean).reverse().join(s);if(!j)return et;const rt=j.split(" $$ ");return`${rt.join("{")}{${s}${et}${s}${"}".repeat(rt.length)}`}).filter(Boolean).join(s);l&&(o=[w[d],o].filter(Boolean).join(s));let h;b&&o&&(h=v(d),h!==null&&(o=`@layer ${h}{${s}${o}${s}}`));const x=p?"":`/* layer: ${d}${h&&h!==d?`, alias: ${h}`:""} */${s}`;return A[d]=o?x+o:""},E=(d=$,o)=>{const h=d.filter(x=>!(o!=null&&o.includes(x)));return[b&&h.length>0?`@layer ${h.map(v).filter(Q).join(", ")};`:void 0,...h.map(x=>y(x)||"")].filter(Boolean).join(s)};return{get css(){return E()},layers:$,matched:m,getLayers:E,getLayer:y,setLayer:async(d,o)=>{const h=await o(y(d));return A[d]=h,h}}}async matchVariants(t,e){const n={rawSelector:t,theme:this.config.theme,generator:this},i=async l=>{let u=!0;const[,,p,c]=l;for(;u;){u=!1;const f=l[1];for(const s of this.config.variants){if(!s.multiPass&&c.has(s))continue;let a=await s.match(f,n);if(a){if(_(a)){if(a===f)continue;a={matcher:a}}if(Array.isArray(a)){if(!a.length)continue;if(a.length===1)a=a[0];else{if(s.multiPass)throw new Error("multiPass can not be used together with array return variants");const m=a.map(g=>{const w=g.matcher??f,S=[g,...p],$=new Set(c);return $.add(s),[l[0],w,S,$]});return(await Promise.all(m.map(g=>i(g)))).flat()}}l[1]=a.matcher??f,p.unshift(a),c.add(s),u=!0;break}}if(!u)break;if(p.length>500)throw new Error(`Too many variants applied to "${t}"`)}return[l]};return await i([t,e||t,[],new Set])}applyVariants(t,e=t[4],n=t[1]){const l=e.slice().sort((f,s)=>(f.order||0)-(s.order||0)).reduceRight((f,s)=>a=>{var w,S;const m=((w=s.body)==null?void 0:w.call(s,a.entries))||a.entries,g=Array.isArray(s.parent)?s.parent:[s.parent,void 0];return(s.handle??Kt)({...a,entries:m,selector:((S=s.selector)==null?void 0:S.call(s,a.selector,m))||a.selector,parent:g[0]||a.parent,parentOrder:g[1]||a.parentOrder,layer:s.layer||a.layer,sort:s.sort||a.sort},f)},f=>f)({prefix:"",selector:qt(n),pseudo:"",entries:t[2]}),{parent:u,parentOrder:p}=l;u!=null&&p!=null&&this.parentOrders.set(u,p);const c={selector:[l.prefix,l.selector,l.pseudo].join(""),entries:l.entries,parent:u,layer:l.layer,sort:l.sort,noMerge:l.noMerge};for(const f of this.config.postprocess)f(c);return c}constructCustomCSS(t,e,n){const i=D(e);if(_(i))return i;const{selector:l,entries:u,parent:p}=this.applyVariants([0,n||t.rawSelector,i,void 0,t.variantHandlers]),c=`${l}{${X(u)}}`;return p?`${p}{${c}}`:c}async parseUtil(t,e,n=!1,i){const l=_(t)?await this.matchVariants(t):[t],u=async([c,f,s])=>{var g;this.config.details&&(e.rules=e.rules??[]);const a=this.config.rulesStaticMap[f];if(a&&a[1]&&(n||!((g=a[2])!=null&&g.internal))){e.generator.activatedRules.add(a),this.config.details&&e.rules.push(a);const w=this.config.rules.indexOf(a),S=D(a[1]),$=a[2];return _(S)?[[w,S,$]]:[[w,c,S,$,s]]}e.variantHandlers=s;const{rulesDynamic:m}=this.config;for(const w of m){const[S,$,A]=w;if(A!=null&&A.internal&&!n)continue;let b=f;if(A!=null&&A.prefix){const M=O(A.prefix);if(i){const d=O(i);if(!M.some(o=>d.includes(o)))continue}else{const d=M.find(o=>f.startsWith(o));if(d==null)continue;b=f.slice(d.length)}}const v=b.match(S);if(!v)continue;let y=await $(v,e);if(!y)continue;if(e.generator.activatedRules.add(w),this.config.details&&e.rules.push(w),typeof y!="string")if(Symbol.asyncIterator in y){const M=[];for await(const d of y)d&&M.push(d);y=M}else Symbol.iterator in y&&!Array.isArray(y)&&(y=Array.from(y).filter(Q));const E=Lt(y).filter(M=>M.length);if(E.length){const M=this.config.rules.indexOf(w);return E.map(d=>{if(_(d))return[M,d,A];let o=s,h=A;for(const x of d)x[0]===k.variants?o=[...O(x[1]),...o]:x[0]===k.parent?o=[{parent:x[1]},...o]:x[0]===k.selector?o=[{selector:x[1]},...o]:x[0]===k.layer?o=[{layer:x[1]},...o]:x[0]===k.sort&&(h={...h,sort:x[1]});return[M,c,d,h,o]})}}},p=(await Promise.all(l.map(c=>u(c)))).flat().filter(c=>!!c);if(p.length)return p}stringifyUtil(t,e){if(!t)return;if(it(t))return[t[0],void 0,t[1],void 0,t[2],this.config.details?e:void 0,void 0];const{selector:n,entries:i,parent:l,layer:u,sort:p,noMerge:c}=this.applyVariants(t),f=X(i);if(!f)return;const{layer:s,sort:a,...m}=t[3]??{},g={...m,layer:u??s,sort:p??a};return[t[0],n,f,l,g,this.config.details?e:void 0,c]}async expandShortcut(t,e,n=5){var f;if(n===0)return;const i=this.config.details?s=>{e.shortcuts=e.shortcuts??[],e.shortcuts.push(s)}:Ot;let l,u,p,c;for(const s of this.config.shortcuts){let a=t;if((f=s[2])!=null&&f.prefix){const g=O(s[2].prefix).find(w=>t.startsWith(w));if(g==null)continue;a=t.slice(g.length)}if(Vt(s)){if(s[0]===a){l=l||s[2],u=s[1],i(s);break}}else{const m=a.match(s[0]);if(m&&(u=s[1](m,e)),u){l=l||s[2],i(s);break}}}if(u&&(p=F(O(u).filter(_).map(s=>kt(s.trim()).split(/\s+/g)).flat()),c=O(u).filter(s=>!_(s)).map(s=>({handles:[],value:s}))),!u){const s=_(t)?await this.matchVariants(t):[t];for(const a of s){const[m,g,w]=a;if(m!==g){const S=await this.expandShortcut(g,e,n-1);S&&(p=S[0].filter(_).map($=>m.replace(g,$)),c=S[0].filter($=>!_($)).map($=>({handles:[...$.handles,...w],value:$.value})))}}}if(!(!(p!=null&&p.length)&&!(c!=null&&c.length)))return[[await Promise.all(O(p).map(async s=>{var a;return((a=await this.expandShortcut(s,e,n-1))==null?void 0:a[0])||[s]})),c].flat(2).filter(s=>!!s),l]}async stringifyShortcuts(t,e,n,i={layer:this.config.shortcutsLayer}){var s;const l=new jt,u=(await Promise.all(F(n).map(async a=>{const m=_(a)?await this.parseUtil(a,e,!0,i.prefix):[[Number.POSITIVE_INFINITY,"{inline}",D(a.value),void 0,a.handles]];return!m&&this.config.warn&&Nt(`unmatched utility "${a}" in shortcut "${t[1]}"`),m||[]}))).flat(1).filter(Boolean).sort((a,m)=>a[0]-m[0]),[p,,c]=t,f=[];for(const a of u){if(it(a)){f.push([a[0],void 0,a[1],void 0,a[2],e,void 0]);continue}const{selector:m,entries:g,parent:w,sort:S,noMerge:$,layer:A}=this.applyVariants(a,[...a[4],...c],p);l.getFallback(A??i.layer,new Rt).getFallback(m,w,[[],a[0]])[0].push([g,!!($??((s=a[3])==null?void 0:s.noMerge)),S??0])}return f.concat(l.flatMap((a,m)=>a.map(([g,w],S,$)=>{const A=(v,y,E)=>{const M=Math.max(...E.map(o=>o[1])),d=E.map(o=>o[0]);return(v?[d.flat(1)]:d).map(o=>{const h=X(o);if(h)return[w,S,h,$,{...i,noMerge:y,sort:M,layer:m},e,void 0]})};return[[g.filter(([,v])=>v).map(([v,,y])=>[v,y]),!0],[g.filter(([,v])=>!v).map(([v,,y])=>[v,y]),!1]].map(([v,y])=>[...A(!1,y,v.filter(([E])=>E.some(M=>M[0]===k.shortcutsNoMerge))),...A(!0,y,v.filter(([E])=>E.every(M=>M[0]!==k.shortcutsNoMerge)))])}).flat(2).filter(Boolean)))}isBlocked(t){return!t||this.config.blocklist.map(e=>Array.isArray(e)?e[0]:e).some(e=>typeof e=="function"?e(t):_(e)?e===t:e.test(t))}getBlocked(t){const e=this.config.blocklist.find(n=>{const i=Array.isArray(n)?n[0]:n;return typeof i=="function"?i(t):_(i)?i===t:i.test(t)});return e?Array.isArray(e)?e:[e,void 0]:void 0}}async function ee(r,t){return await tt.create(r,t)}const mt=/\s\$\$\s+/g;function Ht(r){return mt.test(r)}function Wt(r,t){return Ht(r)?r.replace(mt,t?` ${t} `:" "):t?`${t} ${r}`:r}const ft=/^\[(.+?)(~?=)"(.*)"\]$/;function qt(r){return ft.test(r)?r.replace(ft,(t,e,n,i)=>`[${J(e)}${n}"${J(i)}"]`):`.${J(r)}`}function Kt(r,t){return t(r)}export{wt as L,te as a,Xt as b,Qt as c,At as d,Mt as e,X as f,qt as g,_ as h,Zt as i,ee as j,ht as m,O as t,Nt as w};
