import{defineComponent as B,computed as w,ref as M,watch as C,onUnmounted as O,openBlock as v,createElementBlock as k,Fragment as Y,renderList as j,normalizeClass as z,createBlock as H,resolveDynamicComponent as q}from"vue";import{n as D,H as F,Y as L}from"./vues3-gwMlSONd.js";import{a as P,b as R}from"./vueuse-CCw7Rp-B.js";import{b as T}from"./vue-router-OTT23yck.js";import{$ as l,p as _,m as U,r as X,t as S,a as A,s as G,b as I,c as J,_ as K}from"./index-inSkhYoQ.js";import{v as V}from"./uuid-C_lTrkZC.js";import"./vue-BQnMDgJF.js";import"./unocss-DCXM9lgK.js";import"./ofetch-DKyuTA_G.js";import"./destr-Cx7WjB9q.js";import"./ufo-LxZlbPj-.js";import"./iconify-V2NmTHlX.js";import"./debug-iJ63bAfA.js";import"./ms-CzQ2E3wO.js";import"./magic-string-D9CdRQHO.js";import"./jridgewell-9KHfGwW6.js";import"./unhead-CdZEm2eo.js";import"./packrup-BqxTmGwz.js";import"./hookable-B7_1qfUG.js";import"./vue3-sfc-loader-DdTOzAd6.js";const N=B({__name:"MultiView",setup($,{expose:h}){h();const s=w(()=>new Map(l.value.map(({id:e=V()})=>[e,!1]))),r=M(new Map(s.value)),m=M([]),p=T(),t=[],a=w(()=>{const[[e,o]=[]]=_;return _.clear(),e&&o&&_.set(e,o),Object.fromEntries(l.value.map(n=>[n.id,U(n)]))}),u=()=>{t.forEach(e=>{e()}),t.length=0},b=()=>{var e,o;if(!A.value&&S.value&&l.value.length){const{scrollX:n,scrollY:c}=window,[i]=l.value,[d]=F.value;if(d&&i){const{$children:[{id:y}={}]=[]}=d,E=!Math.floor(n)&&!Math.floor(c)&&i.id===y?d.id:((e=[...s.value.entries()].find(([,f])=>f))==null?void 0:e[0])??((o=[...r.value.entries()].find(([,f])=>f))==null?void 0:o[0])??i.id;G.value=!1,p.push({name:E}).catch(L)}}},x=({id:e})=>a.value[e];C(m,e=>{u(),setTimeout(()=>{e.forEach(o=>{const{stop:n}=P(o,([{isIntersecting:c,target:{id:i}={}}={}]=[])=>{r.value=new Map(s.value),i&&c!==void 0&&s.value.set(i,c)},{threshold:I});t.push(n)})})},{deep:D}),R(window,{behavior:J,onStop:b}),O(u);const g={intersecting:s,$intersecting:r,refs:m,router:p,stops:t,templates:a,clearStops:u,onStop:b,template:x,get v4(){return V},get $siblings(){return l},get resolve(){return X},get that(){return S}};return Object.defineProperty(g,"__isScriptSetup",{enumerable:!1,value:!0}),g}}),Q=["id","role"];function W($,h,s,r,m,p){return v(!0),k(Y,null,j(r.$siblings,t=>{var a;return v(),k("div",{class:z(t.class),id:t.id??r.v4(),key:t.id??r.v4(),role:t.id===((a=r.that)==null?void 0:a.id)?"main":"section",ref_for:!0,ref:"refs","un-cloak":""},[(v(),H(q(r.template(t)),{id:t.id,onVnodeMounted:u=>r.resolve(t)},null,8,["id","onVnodeMounted"]))],10,Q)}),128)}const ge=K(N,[["render",W],["__file","MultiView.vue"]]);export{ge as default};
