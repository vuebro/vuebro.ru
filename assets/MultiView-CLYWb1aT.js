import{defineComponent as P,ref as f,computed as v,watch as S,nextTick as $,onUnmounted as x,openBlock as g,createElementBlock as C,Fragment as T,renderList as U,normalizeClass as X,createBlock as Y,resolveDynamicComponent as q}from"vue";import{a as V,b as E}from"./vueuse-Bs6x0GOr.js";import{$ as s,g as O,t as _,d as B,b as j,a as A,p as R,r as G,s as z,_ as H}from"./index-Bufkj7-p.js";import{b as D}from"./vue-router-DgSFFxGk.js";import"./unocss-BkcBwv3F.js";import"./ofetch-CwKPICM-.js";import"./destr-CVtkxrq9.js";import"./ufo-CsG24Xhf.js";import"./magic-string-CTxECtaK.js";import"./jridgewell-CS0TOL6_.js";import"./ajv-DVT_ztRr.js";import"./fast-deep-equal-DhA4GXGS.js";import"./json-schema-traverse-DW8_mBst.js";import"./fast-uri-DiSllsZr.js";import"./ajv-keywords-fgJOexQU.js";import"./uuid-random-C5LgB_p5.js";import"./iconify-DZNnka9g.js";import"./unhead-12oOAFTY.js";import"./hookable-B8xFkYCm.js";import"./vue3-sfc-loader-CoUr1SK8.js";import"./vue-Cow_pXkh.js";const J=P({__name:"MultiView",setup(F,{expose:h}){h();const i=f([]),o=D(),l=v(()=>Object.fromEntries(s.value.map(e=>[e.id,O(e)]))),b=({id:e})=>l.value[e],t=v(()=>new Map(s.value.map(({id:e})=>[e,!1]))),n=f(new Map(t.value)),w=()=>{var e,r;if(!R.value&&_.value&&s.value.length){const{scrollX:c,scrollY:p}=window,[m]=s.value,{root:y}=m,{$children:[{id:I}]=[{}]}=y,L=!Math.floor(c)&&!Math.floor(p)&&m.id===I?y.id:((e=[...t.value.entries()].find(([,d])=>d))==null?void 0:e[0])??((r=[...n.value.entries()].find(([,d])=>d))==null?void 0:r[0])??m.id;z.value=!1,o.push({name:L}).catch(()=>{})}};V(window,{behavior:j,onStop:w});const M=([{isIntersecting:e,target:{id:r}}])=>{console.log({id:r,isIntersecting:e}),n.value=new Map(t.value),t.value.set(r,e)},a=[],u=()=>{a.forEach(e=>{e()}),a.length=0};S(i,async e=>{var r;u(),await $(),e.forEach(c=>{const{stop:p}=E(c,M,{threshold:A});a.push(p)}),t.value.set((r=_.value)==null?void 0:r.id,!0)},{deep:B}),x(()=>{u()});const k={refs:i,router:o,templates:l,template:b,intersecting:t,$intersecting:n,onStop:w,callback:M,stops:a,clearStops:u,get useIntersectionObserver(){return E},get useScroll(){return V},get behavior(){return j},get deep(){return B},get threshold(){return A},computed:v,nextTick:$,onUnmounted:x,ref:f,watch:S,get useRouter(){return D},get $siblings(){return s},get getAsyncComponent(){return O},get paused(){return R},get resolve(){return G},get scroll(){return z},get that(){return _}};return Object.defineProperty(k,"__isScriptSetup",{enumerable:!1,value:!0}),k}}),K=["id","role"];function N(F,h,i,o,l,b){return g(!0),C(T,null,U(o.$siblings,t=>{var n;return g(),C("div",{class:X(t.class),id:t.id,key:t.id,role:t.id===((n=o.that)==null?void 0:n.id)?"main":void 0,ref_for:!0,ref:"refs","un-cloak":""},[(g(),Y(q(o.template(t)),{id:t.id,onVnodeMounted:()=>{o.resolve(t)}},null,8,["id","onVnodeMounted"]))],10,K)}),128)}const he=H(J,[["render",N],["__file","MultiView.vue"]]);export{he as default};
