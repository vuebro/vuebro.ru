import{f as Lr}from"./fast-deep-equal-DhA4GXGS.js";import{j as pn}from"./json-schema-traverse-DW8_mBst.js";import{f as yn}from"./fast-uri-WMTOr92D.js";var Ao=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function $n(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Do(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function a(){return this instanceof a?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(a){var i=Object.getOwnPropertyDescriptor(e,a);Object.defineProperty(r,a,i.get?i:{enumerable:!0,get:function(){return e[a]}})}),r}var Nt={exports:{}},Gr={},ge={},Se={},wt={},U={},Ye={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.regexpCode=e.getEsmExportName=e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;class t{}e._CodeOrName=t,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class r extends t{constructor(m){if(super(),!e.IDENTIFIER.test(m))throw new Error("CodeGen: name must be a valid identifier");this.str=m}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}e.Name=r;class a extends t{constructor(m){super(),this._items=typeof m=="string"?[m]:m}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const m=this._items[0];return m===""||m==='""'}get str(){var m;return(m=this._str)!==null&&m!==void 0?m:this._str=this._items.reduce((P,j)=>`${P}${j}`,"")}get names(){var m;return(m=this._names)!==null&&m!==void 0?m:this._names=this._items.reduce((P,j)=>(j instanceof r&&(P[j.str]=(P[j.str]||0)+1),P),{})}}e._Code=a,e.nil=new a("");function i(d,...m){const P=[d[0]];let j=0;for(;j<m.length;)o(P,m[j]),P.push(d[++j]);return new a(P)}e._=i;const s=new a("+");function u(d,...m){const P=[E(d[0])];let j=0;for(;j<m.length;)P.push(s),o(P,m[j]),P.push(s,E(d[++j]));return c(P),new a(P)}e.str=u;function o(d,m){m instanceof a?d.push(...m._items):m instanceof r?d.push(m):d.push(g(m))}e.addCodeArg=o;function c(d){let m=1;for(;m<d.length-1;){if(d[m]===s){const P=f(d[m-1],d[m+1]);if(P!==void 0){d.splice(m-1,3,P);continue}d[m++]="+"}m++}}function f(d,m){if(m==='""')return d;if(d==='""')return m;if(typeof d=="string")return m instanceof r||d[d.length-1]!=='"'?void 0:typeof m!="string"?`${d.slice(0,-1)}${m}"`:m[0]==='"'?d.slice(0,-1)+m.slice(1):void 0;if(typeof m=="string"&&m[0]==='"'&&!(d instanceof r))return`"${d}${m.slice(1)}`}function p(d,m){return m.emptyStr()?d:d.emptyStr()?m:u`${d}${m}`}e.strConcat=p;function g(d){return typeof d=="number"||typeof d=="boolean"||d===null?d:E(Array.isArray(d)?d.join(","):d)}function N(d){return new a(E(d))}e.stringify=N;function E(d){return JSON.stringify(d).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}e.safeStringify=E;function $(d){return typeof d=="string"&&e.IDENTIFIER.test(d)?new a(`.${d}`):i`[${d}]`}e.getProperty=$;function b(d){if(typeof d=="string"&&e.IDENTIFIER.test(d))return new a(`${d}`);throw new Error(`CodeGen: invalid export name: ${d}, use explicit $id name mapping`)}e.getEsmExportName=b;function y(d){return new a(d.toString())}e.regexpCode=y})(Ye);var kt={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=e.UsedValueState=void 0;const t=Ye;class r extends Error{constructor(f){super(`CodeGen: "code" for ${f} not defined`),this.value=f.value}}var a;(function(c){c[c.Started=0]="Started",c[c.Completed=1]="Completed"})(a||(e.UsedValueState=a={})),e.varKinds={const:new t.Name("const"),let:new t.Name("let"),var:new t.Name("var")};class i{constructor({prefixes:f,parent:p}={}){this._names={},this._prefixes=f,this._parent=p}toName(f){return f instanceof t.Name?f:this.name(f)}name(f){return new t.Name(this._newName(f))}_newName(f){const p=this._names[f]||this._nameGroup(f);return`${f}${p.index++}`}_nameGroup(f){var p,g;if(!((g=(p=this._parent)===null||p===void 0?void 0:p._prefixes)===null||g===void 0)&&g.has(f)||this._prefixes&&!this._prefixes.has(f))throw new Error(`CodeGen: prefix "${f}" is not allowed in this scope`);return this._names[f]={prefix:f,index:0}}}e.Scope=i;class s extends t.Name{constructor(f,p){super(p),this.prefix=f}setValue(f,{property:p,itemIndex:g}){this.value=f,this.scopePath=(0,t._)`.${new t.Name(p)}[${g}]`}}e.ValueScopeName=s;const u=(0,t._)`\n`;class o extends i{constructor(f){super(f),this._values={},this._scope=f.scope,this.opts={...f,_n:f.lines?u:t.nil}}get(){return this._scope}name(f){return new s(f,this._newName(f))}value(f,p){var g;if(p.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const N=this.toName(f),{prefix:E}=N,$=(g=p.key)!==null&&g!==void 0?g:p.ref;let b=this._values[E];if(b){const m=b.get($);if(m)return m}else b=this._values[E]=new Map;b.set($,N);const y=this._scope[E]||(this._scope[E]=[]),d=y.length;return y[d]=p.ref,N.setValue(p,{property:E,itemIndex:d}),N}getValue(f,p){const g=this._values[f];if(g)return g.get(p)}scopeRefs(f,p=this._values){return this._reduceValues(p,g=>{if(g.scopePath===void 0)throw new Error(`CodeGen: name "${g}" has no value`);return(0,t._)`${f}${g.scopePath}`})}scopeCode(f=this._values,p,g){return this._reduceValues(f,N=>{if(N.value===void 0)throw new Error(`CodeGen: name "${N}" has no value`);return N.value.code},p,g)}_reduceValues(f,p,g={},N){let E=t.nil;for(const $ in f){const b=f[$];if(!b)continue;const y=g[$]=g[$]||new Map;b.forEach(d=>{if(y.has(d))return;y.set(d,a.Started);let m=p(d);if(m){const P=this.opts.es5?e.varKinds.var:e.varKinds.const;E=(0,t._)`${E}${P} ${d} = ${m};${this.opts._n}`}else if(m=N?.(d))E=(0,t._)`${E}${m}${this.opts._n}`;else throw new r(d);y.set(d,a.Completed)})}return E}}e.ValueScope=o})(kt);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.regexpCode=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;const t=Ye,r=kt;var a=Ye;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return a._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return a.str}}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:function(){return a.strConcat}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return a.nil}}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:function(){return a.getProperty}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return a.stringify}}),Object.defineProperty(e,"regexpCode",{enumerable:!0,get:function(){return a.regexpCode}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return a.Name}});var i=kt;Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return i.Scope}}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:function(){return i.ValueScope}}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:function(){return i.ValueScopeName}}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:function(){return i.varKinds}}),e.operators={GT:new t._Code(">"),GTE:new t._Code(">="),LT:new t._Code("<"),LTE:new t._Code("<="),EQ:new t._Code("==="),NEQ:new t._Code("!=="),NOT:new t._Code("!"),OR:new t._Code("||"),AND:new t._Code("&&"),ADD:new t._Code("+")};class s{optimizeNodes(){return this}optimizeNames(n,l){return this}}class u extends s{constructor(n,l,S){super(),this.varKind=n,this.name=l,this.rhs=S}render({es5:n,_n:l}){const S=n?r.varKinds.var:this.varKind,M=this.rhs===void 0?"":` = ${this.rhs}`;return`${S} ${this.name}${M};`+l}optimizeNames(n,l){if(n[this.name.str])return this.rhs&&(this.rhs=Q(this.rhs,n,l)),this}get names(){return this.rhs instanceof t._CodeOrName?this.rhs.names:{}}}class o extends s{constructor(n,l,S){super(),this.lhs=n,this.rhs=l,this.sideEffects=S}render({_n:n}){return`${this.lhs} = ${this.rhs};`+n}optimizeNames(n,l){if(!(this.lhs instanceof t.Name&&!n[this.lhs.str]&&!this.sideEffects))return this.rhs=Q(this.rhs,n,l),this}get names(){const n=this.lhs instanceof t.Name?{}:{...this.lhs.names};return B(n,this.rhs)}}class c extends o{constructor(n,l,S,M){super(n,S,M),this.op=l}render({_n:n}){return`${this.lhs} ${this.op}= ${this.rhs};`+n}}class f extends s{constructor(n){super(),this.label=n,this.names={}}render({_n:n}){return`${this.label}:`+n}}class p extends s{constructor(n){super(),this.label=n,this.names={}}render({_n:n}){return`break${this.label?` ${this.label}`:""};`+n}}class g extends s{constructor(n){super(),this.error=n}render({_n:n}){return`throw ${this.error};`+n}get names(){return this.error.names}}class N extends s{constructor(n){super(),this.code=n}render({_n:n}){return`${this.code};`+n}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(n,l){return this.code=Q(this.code,n,l),this}get names(){return this.code instanceof t._CodeOrName?this.code.names:{}}}class E extends s{constructor(n=[]){super(),this.nodes=n}render(n){return this.nodes.reduce((l,S)=>l+S.render(n),"")}optimizeNodes(){const{nodes:n}=this;let l=n.length;for(;l--;){const S=n[l].optimizeNodes();Array.isArray(S)?n.splice(l,1,...S):S?n[l]=S:n.splice(l,1)}return n.length>0?this:void 0}optimizeNames(n,l){const{nodes:S}=this;let M=S.length;for(;M--;){const D=S[M];D.optimizeNames(n,l)||(ve(n,D.names),S.splice(M,1))}return S.length>0?this:void 0}get names(){return this.nodes.reduce((n,l)=>x(n,l.names),{})}}class $ extends E{render(n){return"{"+n._n+super.render(n)+"}"+n._n}}class b extends E{}class y extends ${}y.kind="else";class d extends ${constructor(n,l){super(l),this.condition=n}render(n){let l=`if(${this.condition})`+super.render(n);return this.else&&(l+="else "+this.else.render(n)),l}optimizeNodes(){super.optimizeNodes();const n=this.condition;if(n===!0)return this.nodes;let l=this.else;if(l){const S=l.optimizeNodes();l=this.else=Array.isArray(S)?new y(S):S}if(l)return n===!1?l instanceof d?l:l.nodes:this.nodes.length?this:new d(Pe(n),l instanceof d?[l]:l.nodes);if(!(n===!1||!this.nodes.length))return this}optimizeNames(n,l){var S;if(this.else=(S=this.else)===null||S===void 0?void 0:S.optimizeNames(n,l),!!(super.optimizeNames(n,l)||this.else))return this.condition=Q(this.condition,n,l),this}get names(){const n=super.names;return B(n,this.condition),this.else&&x(n,this.else.names),n}}d.kind="if";class m extends ${}m.kind="for";class P extends m{constructor(n){super(),this.iteration=n}render(n){return`for(${this.iteration})`+super.render(n)}optimizeNames(n,l){if(super.optimizeNames(n,l))return this.iteration=Q(this.iteration,n,l),this}get names(){return x(super.names,this.iteration.names)}}class j extends m{constructor(n,l,S,M){super(),this.varKind=n,this.name=l,this.from=S,this.to=M}render(n){const l=n.es5?r.varKinds.var:this.varKind,{name:S,from:M,to:D}=this;return`for(${l} ${S}=${M}; ${S}<${D}; ${S}++)`+super.render(n)}get names(){const n=B(super.names,this.from);return B(n,this.to)}}class T extends m{constructor(n,l,S,M){super(),this.loop=n,this.varKind=l,this.name=S,this.iterable=M}render(n){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(n)}optimizeNames(n,l){if(super.optimizeNames(n,l))return this.iterable=Q(this.iterable,n,l),this}get names(){return x(super.names,this.iterable.names)}}class V extends ${constructor(n,l,S){super(),this.name=n,this.args=l,this.async=S}render(n){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(n)}}V.kind="func";class q extends E{render(n){return"return "+super.render(n)}}q.kind="return";class H extends ${render(n){let l="try"+super.render(n);return this.catch&&(l+=this.catch.render(n)),this.finally&&(l+=this.finally.render(n)),l}optimizeNodes(){var n,l;return super.optimizeNodes(),(n=this.catch)===null||n===void 0||n.optimizeNodes(),(l=this.finally)===null||l===void 0||l.optimizeNodes(),this}optimizeNames(n,l){var S,M;return super.optimizeNames(n,l),(S=this.catch)===null||S===void 0||S.optimizeNames(n,l),(M=this.finally)===null||M===void 0||M.optimizeNames(n,l),this}get names(){const n=super.names;return this.catch&&x(n,this.catch.names),this.finally&&x(n,this.finally.names),n}}class W extends ${constructor(n){super(),this.error=n}render(n){return`catch(${this.error})`+super.render(n)}}W.kind="catch";class Y extends ${render(n){return"finally"+super.render(n)}}Y.kind="finally";class ee{constructor(n,l={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...l,_n:l.lines?`
`:""},this._extScope=n,this._scope=new r.Scope({parent:n}),this._nodes=[new b]}toString(){return this._root.render(this.opts)}name(n){return this._scope.name(n)}scopeName(n){return this._extScope.name(n)}scopeValue(n,l){const S=this._extScope.value(n,l);return(this._values[S.prefix]||(this._values[S.prefix]=new Set)).add(S),S}getScopeValue(n,l){return this._extScope.getValue(n,l)}scopeRefs(n){return this._extScope.scopeRefs(n,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(n,l,S,M){const D=this._scope.toName(l);return S!==void 0&&M&&(this._constants[D.str]=S),this._leafNode(new u(n,D,S)),D}const(n,l,S){return this._def(r.varKinds.const,n,l,S)}let(n,l,S){return this._def(r.varKinds.let,n,l,S)}var(n,l,S){return this._def(r.varKinds.var,n,l,S)}assign(n,l,S){return this._leafNode(new o(n,l,S))}add(n,l){return this._leafNode(new c(n,e.operators.ADD,l))}code(n){return typeof n=="function"?n():n!==t.nil&&this._leafNode(new N(n)),this}object(...n){const l=["{"];for(const[S,M]of n)l.length>1&&l.push(","),l.push(S),(S!==M||this.opts.es5)&&(l.push(":"),(0,t.addCodeArg)(l,M));return l.push("}"),new t._Code(l)}if(n,l,S){if(this._blockNode(new d(n)),l&&S)this.code(l).else().code(S).endIf();else if(l)this.code(l).endIf();else if(S)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(n){return this._elseNode(new d(n))}else(){return this._elseNode(new y)}endIf(){return this._endBlockNode(d,y)}_for(n,l){return this._blockNode(n),l&&this.code(l).endFor(),this}for(n,l){return this._for(new P(n),l)}forRange(n,l,S,M,D=this.opts.es5?r.varKinds.var:r.varKinds.let){const L=this._scope.toName(n);return this._for(new j(D,L,l,S),()=>M(L))}forOf(n,l,S,M=r.varKinds.const){const D=this._scope.toName(n);if(this.opts.es5){const L=l instanceof t.Name?l:this.var("_arr",l);return this.forRange("_i",0,(0,t._)`${L}.length`,z=>{this.var(D,(0,t._)`${L}[${z}]`),S(D)})}return this._for(new T("of",M,D,l),()=>S(D))}forIn(n,l,S,M=this.opts.es5?r.varKinds.var:r.varKinds.const){if(this.opts.ownProperties)return this.forOf(n,(0,t._)`Object.keys(${l})`,S);const D=this._scope.toName(n);return this._for(new T("in",M,D,l),()=>S(D))}endFor(){return this._endBlockNode(m)}label(n){return this._leafNode(new f(n))}break(n){return this._leafNode(new p(n))}return(n){const l=new q;if(this._blockNode(l),this.code(n),l.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(q)}try(n,l,S){if(!l&&!S)throw new Error('CodeGen: "try" without "catch" and "finally"');const M=new H;if(this._blockNode(M),this.code(n),l){const D=this.name("e");this._currNode=M.catch=new W(D),l(D)}return S&&(this._currNode=M.finally=new Y,this.code(S)),this._endBlockNode(W,Y)}throw(n){return this._leafNode(new g(n))}block(n,l){return this._blockStarts.push(this._nodes.length),n&&this.code(n).endBlock(l),this}endBlock(n){const l=this._blockStarts.pop();if(l===void 0)throw new Error("CodeGen: not in self-balancing block");const S=this._nodes.length-l;if(S<0||n!==void 0&&S!==n)throw new Error(`CodeGen: wrong number of nodes: ${S} vs ${n} expected`);return this._nodes.length=l,this}func(n,l=t.nil,S,M){return this._blockNode(new V(n,l,S)),M&&this.code(M).endFunc(),this}endFunc(){return this._endBlockNode(V)}optimize(n=1){for(;n-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(n){return this._currNode.nodes.push(n),this}_blockNode(n){this._currNode.nodes.push(n),this._nodes.push(n)}_endBlockNode(n,l){const S=this._currNode;if(S instanceof n||l&&S instanceof l)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${l?`${n.kind}/${l.kind}`:n.kind}"`)}_elseNode(n){const l=this._currNode;if(!(l instanceof d))throw new Error('CodeGen: "else" without "if"');return this._currNode=l.else=n,this}get _root(){return this._nodes[0]}get _currNode(){const n=this._nodes;return n[n.length-1]}set _currNode(n){const l=this._nodes;l[l.length-1]=n}}e.CodeGen=ee;function x(w,n){for(const l in n)w[l]=(w[l]||0)+(n[l]||0);return w}function B(w,n){return n instanceof t._CodeOrName?x(w,n.names):w}function Q(w,n,l){if(w instanceof t.Name)return S(w);if(!M(w))return w;return new t._Code(w._items.reduce((D,L)=>(L instanceof t.Name&&(L=S(L)),L instanceof t._Code?D.push(...L._items):D.push(L),D),[]));function S(D){const L=l[D.str];return L===void 0||n[D.str]!==1?D:(delete n[D.str],L)}function M(D){return D instanceof t._Code&&D._items.some(L=>L instanceof t.Name&&n[L.str]===1&&l[L.str]!==void 0)}}function ve(w,n){for(const l in n)w[l]=(w[l]||0)-(n[l]||0)}function Pe(w){return typeof w=="boolean"||typeof w=="number"||w===null?!w:(0,t._)`!${O(w)}`}e.not=Pe;const Re=_(e.operators.AND);function ze(...w){return w.reduce(Re)}e.and=ze;const Ce=_(e.operators.OR);function C(...w){return w.reduce(Ce)}e.or=C;function _(w){return(n,l)=>n===t.nil?l:l===t.nil?n:(0,t._)`${O(n)} ${w} ${O(l)}`}function O(w){return w instanceof t.Name?w:(0,t._)`(${w})`}})(U);var I={};Object.defineProperty(I,"__esModule",{value:!0});I.checkStrictMode=I.getErrorPath=I.Type=I.useFunc=I.setEvaluated=I.evaluatedPropsToName=I.mergeEvaluated=I.eachItem=I.unescapeJsonPointer=I.escapeJsonPointer=I.escapeFragment=I.unescapeFragment=I.schemaRefOrVal=I.schemaHasRulesButRef=I.schemaHasRules=I.checkUnknownRules=I.alwaysValidSchema=I.toHash=void 0;const J=U,_n=Ye;function vn(e){const t={};for(const r of e)t[r]=!0;return t}I.toHash=vn;function gn(e,t){return typeof t=="boolean"?t:Object.keys(t).length===0?!0:(Jr(e,t),!Hr(t,e.self.RULES.all))}I.alwaysValidSchema=gn;function Jr(e,t=e.schema){const{opts:r,self:a}=e;if(!r.strictSchema||typeof t=="boolean")return;const i=a.RULES.keywords;for(const s in t)i[s]||Qr(e,`unknown keyword: "${s}"`)}I.checkUnknownRules=Jr;function Hr(e,t){if(typeof e=="boolean")return!e;for(const r in e)if(t[r])return!0;return!1}I.schemaHasRules=Hr;function wn(e,t){if(typeof e=="boolean")return!e;for(const r in e)if(r!=="$ref"&&t.all[r])return!0;return!1}I.schemaHasRulesButRef=wn;function bn({topSchemaRef:e,schemaPath:t},r,a,i){if(!i){if(typeof r=="number"||typeof r=="boolean")return r;if(typeof r=="string")return(0,J._)`${r}`}return(0,J._)`${e}${t}${(0,J.getProperty)(a)}`}I.schemaRefOrVal=bn;function En(e){return Br(decodeURIComponent(e))}I.unescapeFragment=En;function Pn(e){return encodeURIComponent(Mt(e))}I.escapeFragment=Pn;function Mt(e){return typeof e=="number"?`${e}`:e.replace(/~/g,"~0").replace(/\//g,"~1")}I.escapeJsonPointer=Mt;function Br(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}I.unescapeJsonPointer=Br;function Sn(e,t){if(Array.isArray(e))for(const r of e)t(r);else t(e)}I.eachItem=Sn;function vr({mergeNames:e,mergeToName:t,mergeValues:r,resultToName:a}){return(i,s,u,o)=>{const c=u===void 0?s:u instanceof J.Name?(s instanceof J.Name?e(i,s,u):t(i,s,u),u):s instanceof J.Name?(t(i,u,s),s):r(s,u);return o===J.Name&&!(c instanceof J.Name)?a(i,c):c}}I.mergeEvaluated={props:vr({mergeNames:(e,t,r)=>e.if((0,J._)`${r} !== true && ${t} !== undefined`,()=>{e.if((0,J._)`${t} === true`,()=>e.assign(r,!0),()=>e.assign(r,(0,J._)`${r} || {}`).code((0,J._)`Object.assign(${r}, ${t})`))}),mergeToName:(e,t,r)=>e.if((0,J._)`${r} !== true`,()=>{t===!0?e.assign(r,!0):(e.assign(r,(0,J._)`${r} || {}`),At(e,r,t))}),mergeValues:(e,t)=>e===!0?!0:{...e,...t},resultToName:Wr}),items:vr({mergeNames:(e,t,r)=>e.if((0,J._)`${r} !== true && ${t} !== undefined`,()=>e.assign(r,(0,J._)`${t} === true ? true : ${r} > ${t} ? ${r} : ${t}`)),mergeToName:(e,t,r)=>e.if((0,J._)`${r} !== true`,()=>e.assign(r,t===!0?!0:(0,J._)`${r} > ${t} ? ${r} : ${t}`)),mergeValues:(e,t)=>e===!0?!0:Math.max(e,t),resultToName:(e,t)=>e.var("items",t)})};function Wr(e,t){if(t===!0)return e.var("props",!0);const r=e.var("props",(0,J._)`{}`);return t!==void 0&&At(e,r,t),r}I.evaluatedPropsToName=Wr;function At(e,t,r){Object.keys(r).forEach(a=>e.assign((0,J._)`${t}${(0,J.getProperty)(a)}`,!0))}I.setEvaluated=At;const gr={};function Nn(e,t){return e.scopeValue("func",{ref:t,code:gr[t.code]||(gr[t.code]=new _n._Code(t.code))})}I.useFunc=Nn;var jt;(function(e){e[e.Num=0]="Num",e[e.Str=1]="Str"})(jt||(I.Type=jt={}));function kn(e,t,r){if(e instanceof J.Name){const a=t===jt.Num;return r?a?(0,J._)`"[" + ${e} + "]"`:(0,J._)`"['" + ${e} + "']"`:a?(0,J._)`"/" + ${e}`:(0,J._)`"/" + ${e}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return r?(0,J.getProperty)(e).toString():"/"+Mt(e)}I.getErrorPath=kn;function Qr(e,t,r=e.opts.strictSchema){if(r){if(t=`strict mode: ${t}`,r===!0)throw new Error(t);e.self.logger.warn(t)}}I.checkStrictMode=Qr;var _e={};Object.defineProperty(_e,"__esModule",{value:!0});const ae=U,jn={data:new ae.Name("data"),valCxt:new ae.Name("valCxt"),instancePath:new ae.Name("instancePath"),parentData:new ae.Name("parentData"),parentDataProperty:new ae.Name("parentDataProperty"),rootData:new ae.Name("rootData"),dynamicAnchors:new ae.Name("dynamicAnchors"),vErrors:new ae.Name("vErrors"),errors:new ae.Name("errors"),this:new ae.Name("this"),self:new ae.Name("self"),scope:new ae.Name("scope"),json:new ae.Name("json"),jsonPos:new ae.Name("jsonPos"),jsonLen:new ae.Name("jsonLen"),jsonPart:new ae.Name("jsonPart")};_e.default=jn;var wr;function ft(){return wr||(wr=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;const t=U,r=I,a=_e;e.keywordError={message:({keyword:y})=>(0,t.str)`must pass "${y}" keyword validation`},e.keyword$DataError={message:({keyword:y,schemaType:d})=>d?(0,t.str)`"${y}" keyword must be ${d} ($data)`:(0,t.str)`"${y}" keyword is invalid ($data)`};function i(y,d=e.keywordError,m,P){const{it:j}=y,{gen:T,compositeRule:V,allErrors:q}=j,H=g(y,d,m);P??(V||q)?c(T,H):f(j,(0,t._)`[${H}]`)}e.reportError=i;function s(y,d=e.keywordError,m){const{it:P}=y,{gen:j,compositeRule:T,allErrors:V}=P,q=g(y,d,m);c(j,q),T||V||f(P,a.default.vErrors)}e.reportExtraError=s;function u(y,d){y.assign(a.default.errors,d),y.if((0,t._)`${a.default.vErrors} !== null`,()=>y.if(d,()=>y.assign((0,t._)`${a.default.vErrors}.length`,d),()=>y.assign(a.default.vErrors,null)))}e.resetErrorsCount=u;function o({gen:y,keyword:d,schemaValue:m,data:P,errsCount:j,it:T}){if(j===void 0)throw new Error("ajv implementation error");const V=y.name("err");y.forRange("i",j,a.default.errors,q=>{y.const(V,(0,t._)`${a.default.vErrors}[${q}]`),y.if((0,t._)`${V}.instancePath === undefined`,()=>y.assign((0,t._)`${V}.instancePath`,(0,t.strConcat)(a.default.instancePath,T.errorPath))),y.assign((0,t._)`${V}.schemaPath`,(0,t.str)`${T.errSchemaPath}/${d}`),T.opts.verbose&&(y.assign((0,t._)`${V}.schema`,m),y.assign((0,t._)`${V}.data`,P))})}e.extendErrors=o;function c(y,d){const m=y.const("err",d);y.if((0,t._)`${a.default.vErrors} === null`,()=>y.assign(a.default.vErrors,(0,t._)`[${m}]`),(0,t._)`${a.default.vErrors}.push(${m})`),y.code((0,t._)`${a.default.errors}++`)}function f(y,d){const{gen:m,validateName:P,schemaEnv:j}=y;j.$async?m.throw((0,t._)`new ${y.ValidationError}(${d})`):(m.assign((0,t._)`${P}.errors`,d),m.return(!1))}const p={keyword:new t.Name("keyword"),schemaPath:new t.Name("schemaPath"),params:new t.Name("params"),propertyName:new t.Name("propertyName"),message:new t.Name("message"),schema:new t.Name("schema"),parentSchema:new t.Name("parentSchema")};function g(y,d,m){const{createErrors:P}=y.it;return P===!1?(0,t._)`{}`:N(y,d,m)}function N(y,d,m={}){const{gen:P,it:j}=y,T=[E(j,m),$(y,m)];return b(y,d,T),P.object(...T)}function E({errorPath:y},{instancePath:d}){const m=d?(0,t.str)`${y}${(0,r.getErrorPath)(d,r.Type.Str)}`:y;return[a.default.instancePath,(0,t.strConcat)(a.default.instancePath,m)]}function $({keyword:y,it:{errSchemaPath:d}},{schemaPath:m,parentSchema:P}){let j=P?d:(0,t.str)`${d}/${y}`;return m&&(j=(0,t.str)`${j}${(0,r.getErrorPath)(m,r.Type.Str)}`),[p.schemaPath,j]}function b(y,{params:d,message:m},P){const{keyword:j,data:T,schemaValue:V,it:q}=y,{opts:H,propertyName:W,topSchemaRef:Y,schemaPath:ee}=q;P.push([p.keyword,j],[p.params,typeof d=="function"?d(y):d||(0,t._)`{}`]),H.messages&&P.push([p.message,typeof m=="function"?m(y):m]),H.verbose&&P.push([p.schema,V],[p.parentSchema,(0,t._)`${Y}${ee}`],[a.default.data,T]),W&&P.push([p.propertyName,W])}}(wt)),wt}var br;function On(){if(br)return Se;br=1,Object.defineProperty(Se,"__esModule",{value:!0}),Se.boolOrEmptySchema=Se.topBoolOrEmptySchema=void 0;const e=ft(),t=U,r=_e,a={message:"boolean schema is false"};function i(o){const{gen:c,schema:f,validateName:p}=o;f===!1?u(o,!1):typeof f=="object"&&f.$async===!0?c.return(r.default.data):(c.assign((0,t._)`${p}.errors`,null),c.return(!0))}Se.topBoolOrEmptySchema=i;function s(o,c){const{gen:f,schema:p}=o;p===!1?(f.var(c,!1),u(o)):f.var(c,!0)}Se.boolOrEmptySchema=s;function u(o,c){const{gen:f,data:p}=o,g={gen:f,keyword:"false schema",data:p,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:o};(0,e.reportError)(g,a,void 0,c)}return Se}var Z={},Oe={};Object.defineProperty(Oe,"__esModule",{value:!0});Oe.getRules=Oe.isJSONType=void 0;const Tn=["string","number","integer","boolean","null","object","array"],Rn=new Set(Tn);function Cn(e){return typeof e=="string"&&Rn.has(e)}Oe.isJSONType=Cn;function In(){const e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...e,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}}Oe.getRules=In;var we={},Er;function Xr(){if(Er)return we;Er=1,Object.defineProperty(we,"__esModule",{value:!0}),we.shouldUseRule=we.shouldUseGroup=we.schemaHasRulesForType=void 0;function e({schema:a,self:i},s){const u=i.RULES.types[s];return u&&u!==!0&&t(a,u)}we.schemaHasRulesForType=e;function t(a,i){return i.rules.some(s=>r(a,s))}we.shouldUseGroup=t;function r(a,i){var s;return a[i.keyword]!==void 0||((s=i.definition.implements)===null||s===void 0?void 0:s.some(u=>a[u]!==void 0))}return we.shouldUseRule=r,we}Object.defineProperty(Z,"__esModule",{value:!0});Z.reportTypeError=Z.checkDataTypes=Z.checkDataType=Z.coerceAndCheckDataType=Z.getJSONTypes=Z.getSchemaTypes=Z.DataType=void 0;const Mn=Oe,An=Xr(),Dn=ft(),F=U,Yr=I;var De;(function(e){e[e.Correct=0]="Correct",e[e.Wrong=1]="Wrong"})(De||(Z.DataType=De={}));function Vn(e){const t=Zr(e.type);if(t.includes("null")){if(e.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!t.length&&e.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');e.nullable===!0&&t.push("null")}return t}Z.getSchemaTypes=Vn;function Zr(e){const t=Array.isArray(e)?e:e?[e]:[];if(t.every(Mn.isJSONType))return t;throw new Error("type must be JSONType or JSONType[]: "+t.join(","))}Z.getJSONTypes=Zr;function qn(e,t){const{gen:r,data:a,opts:i}=e,s=Fn(t,i.coerceTypes),u=t.length>0&&!(s.length===0&&t.length===1&&(0,An.schemaHasRulesForType)(e,t[0]));if(u){const o=Dt(t,a,i.strictNumbers,De.Wrong);r.if(o,()=>{s.length?Kn(e,t,s):Vt(e)})}return u}Z.coerceAndCheckDataType=qn;const xr=new Set(["string","number","integer","boolean","null"]);function Fn(e,t){return t?e.filter(r=>xr.has(r)||t==="array"&&r==="array"):[]}function Kn(e,t,r){const{gen:a,data:i,opts:s}=e,u=a.let("dataType",(0,F._)`typeof ${i}`),o=a.let("coerced",(0,F._)`undefined`);s.coerceTypes==="array"&&a.if((0,F._)`${u} == 'object' && Array.isArray(${i}) && ${i}.length == 1`,()=>a.assign(i,(0,F._)`${i}[0]`).assign(u,(0,F._)`typeof ${i}`).if(Dt(t,i,s.strictNumbers),()=>a.assign(o,i))),a.if((0,F._)`${o} !== undefined`);for(const f of r)(xr.has(f)||f==="array"&&s.coerceTypes==="array")&&c(f);a.else(),Vt(e),a.endIf(),a.if((0,F._)`${o} !== undefined`,()=>{a.assign(i,o),Un(e,o)});function c(f){switch(f){case"string":a.elseIf((0,F._)`${u} == "number" || ${u} == "boolean"`).assign(o,(0,F._)`"" + ${i}`).elseIf((0,F._)`${i} === null`).assign(o,(0,F._)`""`);return;case"number":a.elseIf((0,F._)`${u} == "boolean" || ${i} === null
              || (${u} == "string" && ${i} && ${i} == +${i})`).assign(o,(0,F._)`+${i}`);return;case"integer":a.elseIf((0,F._)`${u} === "boolean" || ${i} === null
              || (${u} === "string" && ${i} && ${i} == +${i} && !(${i} % 1))`).assign(o,(0,F._)`+${i}`);return;case"boolean":a.elseIf((0,F._)`${i} === "false" || ${i} === 0 || ${i} === null`).assign(o,!1).elseIf((0,F._)`${i} === "true" || ${i} === 1`).assign(o,!0);return;case"null":a.elseIf((0,F._)`${i} === "" || ${i} === 0 || ${i} === false`),a.assign(o,null);return;case"array":a.elseIf((0,F._)`${u} === "string" || ${u} === "number"
              || ${u} === "boolean" || ${i} === null`).assign(o,(0,F._)`[${i}]`)}}}function Un({gen:e,parentData:t,parentDataProperty:r},a){e.if((0,F._)`${t} !== undefined`,()=>e.assign((0,F._)`${t}[${r}]`,a))}function Ot(e,t,r,a=De.Correct){const i=a===De.Correct?F.operators.EQ:F.operators.NEQ;let s;switch(e){case"null":return(0,F._)`${t} ${i} null`;case"array":s=(0,F._)`Array.isArray(${t})`;break;case"object":s=(0,F._)`${t} && typeof ${t} == "object" && !Array.isArray(${t})`;break;case"integer":s=u((0,F._)`!(${t} % 1) && !isNaN(${t})`);break;case"number":s=u();break;default:return(0,F._)`typeof ${t} ${i} ${e}`}return a===De.Correct?s:(0,F.not)(s);function u(o=F.nil){return(0,F.and)((0,F._)`typeof ${t} == "number"`,o,r?(0,F._)`isFinite(${t})`:F.nil)}}Z.checkDataType=Ot;function Dt(e,t,r,a){if(e.length===1)return Ot(e[0],t,r,a);let i;const s=(0,Yr.toHash)(e);if(s.array&&s.object){const u=(0,F._)`typeof ${t} != "object"`;i=s.null?u:(0,F._)`!${t} || ${u}`,delete s.null,delete s.array,delete s.object}else i=F.nil;s.number&&delete s.integer;for(const u in s)i=(0,F.and)(i,Ot(u,t,r,a));return i}Z.checkDataTypes=Dt;const zn={message:({schema:e})=>`must be ${e}`,params:({schema:e,schemaValue:t})=>typeof e=="string"?(0,F._)`{type: ${e}}`:(0,F._)`{type: ${t}}`};function Vt(e){const t=Ln(e);(0,Dn.reportError)(t,zn)}Z.reportTypeError=Vt;function Ln(e){const{gen:t,data:r,schema:a}=e,i=(0,Yr.schemaRefOrVal)(e,a,"type");return{gen:t,keyword:"type",data:r,schema:a.type,schemaCode:i,schemaValue:i,parentSchema:a,params:{},it:e}}var Ge={},Pr;function Gn(){if(Pr)return Ge;Pr=1,Object.defineProperty(Ge,"__esModule",{value:!0}),Ge.assignDefaults=void 0;const e=U,t=I;function r(i,s){const{properties:u,items:o}=i.schema;if(s==="object"&&u)for(const c in u)a(i,c,u[c].default);else s==="array"&&Array.isArray(o)&&o.forEach((c,f)=>a(i,f,c.default))}Ge.assignDefaults=r;function a(i,s,u){const{gen:o,compositeRule:c,data:f,opts:p}=i;if(u===void 0)return;const g=(0,e._)`${f}${(0,e.getProperty)(s)}`;if(c){(0,t.checkStrictMode)(i,`default is ignored for: ${g}`);return}let N=(0,e._)`${g} === undefined`;p.useDefaults==="empty"&&(N=(0,e._)`${N} || ${g} === null || ${g} === ""`),o.if(N,(0,e._)`${g} = ${(0,e.stringify)(u)}`)}return Ge}var he={},G={},Sr;function $e(){if(Sr)return G;Sr=1,Object.defineProperty(G,"__esModule",{value:!0}),G.validateUnion=G.validateArray=G.usePattern=G.callValidateCode=G.schemaProperties=G.allSchemaProperties=G.noPropertyInData=G.propertyInData=G.isOwnProperty=G.hasPropFunc=G.reportMissingProp=G.checkMissingProp=G.checkReportMissingProp=void 0;const e=U,t=I,r=_e,a=I;function i(m,P){const{gen:j,data:T,it:V}=m;j.if(p(j,T,P,V.opts.ownProperties),()=>{m.setParams({missingProperty:(0,e._)`${P}`},!0),m.error()})}G.checkReportMissingProp=i;function s({gen:m,data:P,it:{opts:j}},T,V){return(0,e.or)(...T.map(q=>(0,e.and)(p(m,P,q,j.ownProperties),(0,e._)`${V} = ${q}`)))}G.checkMissingProp=s;function u(m,P){m.setParams({missingProperty:P},!0),m.error()}G.reportMissingProp=u;function o(m){return m.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,e._)`Object.prototype.hasOwnProperty`})}G.hasPropFunc=o;function c(m,P,j){return(0,e._)`${o(m)}.call(${P}, ${j})`}G.isOwnProperty=c;function f(m,P,j,T){const V=(0,e._)`${P}${(0,e.getProperty)(j)} !== undefined`;return T?(0,e._)`${V} && ${c(m,P,j)}`:V}G.propertyInData=f;function p(m,P,j,T){const V=(0,e._)`${P}${(0,e.getProperty)(j)} === undefined`;return T?(0,e.or)(V,(0,e.not)(c(m,P,j))):V}G.noPropertyInData=p;function g(m){return m?Object.keys(m).filter(P=>P!=="__proto__"):[]}G.allSchemaProperties=g;function N(m,P){return g(P).filter(j=>!(0,t.alwaysValidSchema)(m,P[j]))}G.schemaProperties=N;function E({schemaCode:m,data:P,it:{gen:j,topSchemaRef:T,schemaPath:V,errorPath:q},it:H},W,Y,ee){const x=ee?(0,e._)`${m}, ${P}, ${T}${V}`:P,B=[[r.default.instancePath,(0,e.strConcat)(r.default.instancePath,q)],[r.default.parentData,H.parentData],[r.default.parentDataProperty,H.parentDataProperty],[r.default.rootData,r.default.rootData]];H.opts.dynamicRef&&B.push([r.default.dynamicAnchors,r.default.dynamicAnchors]);const Q=(0,e._)`${x}, ${j.object(...B)}`;return Y!==e.nil?(0,e._)`${W}.call(${Y}, ${Q})`:(0,e._)`${W}(${Q})`}G.callValidateCode=E;const $=(0,e._)`new RegExp`;function b({gen:m,it:{opts:P}},j){const T=P.unicodeRegExp?"u":"",{regExp:V}=P.code,q=V(j,T);return m.scopeValue("pattern",{key:q.toString(),ref:q,code:(0,e._)`${V.code==="new RegExp"?$:(0,a.useFunc)(m,V)}(${j}, ${T})`})}G.usePattern=b;function y(m){const{gen:P,data:j,keyword:T,it:V}=m,q=P.name("valid");if(V.allErrors){const W=P.let("valid",!0);return H(()=>P.assign(W,!1)),W}return P.var(q,!0),H(()=>P.break()),q;function H(W){const Y=P.const("len",(0,e._)`${j}.length`);P.forRange("i",0,Y,ee=>{m.subschema({keyword:T,dataProp:ee,dataPropType:t.Type.Num},q),P.if((0,e.not)(q),W)})}}G.validateArray=y;function d(m){const{gen:P,schema:j,keyword:T,it:V}=m;if(!Array.isArray(j))throw new Error("ajv implementation error");if(j.some(Y=>(0,t.alwaysValidSchema)(V,Y))&&!V.opts.unevaluated)return;const H=P.let("valid",!1),W=P.name("_valid");P.block(()=>j.forEach((Y,ee)=>{const x=m.subschema({keyword:T,schemaProp:ee,compositeRule:!0},W);P.assign(H,(0,e._)`${H} || ${W}`),m.mergeValidEvaluated(x,W)||P.if((0,e.not)(H))})),m.result(H,()=>m.reset(),()=>m.error(!0))}return G.validateUnion=d,G}var Nr;function Jn(){if(Nr)return he;Nr=1,Object.defineProperty(he,"__esModule",{value:!0}),he.validateKeywordUsage=he.validSchemaType=he.funcKeywordCode=he.macroKeywordCode=void 0;const e=U,t=_e,r=$e(),a=ft();function i(N,E){const{gen:$,keyword:b,schema:y,parentSchema:d,it:m}=N,P=E.macro.call(m.self,y,d,m),j=f($,b,P);m.opts.validateSchema!==!1&&m.self.validateSchema(P,!0);const T=$.name("valid");N.subschema({schema:P,schemaPath:e.nil,errSchemaPath:`${m.errSchemaPath}/${b}`,topSchemaRef:j,compositeRule:!0},T),N.pass(T,()=>N.error(!0))}he.macroKeywordCode=i;function s(N,E){var $;const{gen:b,keyword:y,schema:d,parentSchema:m,$data:P,it:j}=N;c(j,E);const T=!P&&E.compile?E.compile.call(j.self,d,m,j):E.validate,V=f(b,y,T),q=b.let("valid");N.block$data(q,H),N.ok(($=E.valid)!==null&&$!==void 0?$:q);function H(){if(E.errors===!1)ee(),E.modifying&&u(N),x(()=>N.error());else{const B=E.async?W():Y();E.modifying&&u(N),x(()=>o(N,B))}}function W(){const B=b.let("ruleErrs",null);return b.try(()=>ee((0,e._)`await `),Q=>b.assign(q,!1).if((0,e._)`${Q} instanceof ${j.ValidationError}`,()=>b.assign(B,(0,e._)`${Q}.errors`),()=>b.throw(Q))),B}function Y(){const B=(0,e._)`${V}.errors`;return b.assign(B,null),ee(e.nil),B}function ee(B=E.async?(0,e._)`await `:e.nil){const Q=j.opts.passContext?t.default.this:t.default.self,ve=!("compile"in E&&!P||E.schema===!1);b.assign(q,(0,e._)`${B}${(0,r.callValidateCode)(N,V,Q,ve)}`,E.modifying)}function x(B){var Q;b.if((0,e.not)((Q=E.valid)!==null&&Q!==void 0?Q:q),B)}}he.funcKeywordCode=s;function u(N){const{gen:E,data:$,it:b}=N;E.if(b.parentData,()=>E.assign($,(0,e._)`${b.parentData}[${b.parentDataProperty}]`))}function o(N,E){const{gen:$}=N;$.if((0,e._)`Array.isArray(${E})`,()=>{$.assign(t.default.vErrors,(0,e._)`${t.default.vErrors} === null ? ${E} : ${t.default.vErrors}.concat(${E})`).assign(t.default.errors,(0,e._)`${t.default.vErrors}.length`),(0,a.extendErrors)(N)},()=>N.error())}function c({schemaEnv:N},E){if(E.async&&!N.$async)throw new Error("async keyword in sync schema")}function f(N,E,$){if($===void 0)throw new Error(`keyword "${E}" failed to compile`);return N.scopeValue("keyword",typeof $=="function"?{ref:$}:{ref:$,code:(0,e.stringify)($)})}function p(N,E,$=!1){return!E.length||E.some(b=>b==="array"?Array.isArray(N):b==="object"?N&&typeof N=="object"&&!Array.isArray(N):typeof N==b||$&&typeof N>"u")}he.validSchemaType=p;function g({schema:N,opts:E,self:$,errSchemaPath:b},y,d){if(Array.isArray(y.keyword)?!y.keyword.includes(d):y.keyword!==d)throw new Error("ajv implementation error");const m=y.dependencies;if(m?.some(P=>!Object.prototype.hasOwnProperty.call(N,P)))throw new Error(`parent schema must have dependencies of ${d}: ${m.join(",")}`);if(y.validateSchema&&!y.validateSchema(N[d])){const j=`keyword "${d}" value is invalid at path "${b}": `+$.errorsText(y.validateSchema.errors);if(E.validateSchema==="log")$.logger.error(j);else throw new Error(j)}}return he.validateKeywordUsage=g,he}var be={},kr;function Hn(){if(kr)return be;kr=1,Object.defineProperty(be,"__esModule",{value:!0}),be.extendSubschemaMode=be.extendSubschemaData=be.getSubschema=void 0;const e=U,t=I;function r(s,{keyword:u,schemaProp:o,schema:c,schemaPath:f,errSchemaPath:p,topSchemaRef:g}){if(u!==void 0&&c!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(u!==void 0){const N=s.schema[u];return o===void 0?{schema:N,schemaPath:(0,e._)`${s.schemaPath}${(0,e.getProperty)(u)}`,errSchemaPath:`${s.errSchemaPath}/${u}`}:{schema:N[o],schemaPath:(0,e._)`${s.schemaPath}${(0,e.getProperty)(u)}${(0,e.getProperty)(o)}`,errSchemaPath:`${s.errSchemaPath}/${u}/${(0,t.escapeFragment)(o)}`}}if(c!==void 0){if(f===void 0||p===void 0||g===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:c,schemaPath:f,topSchemaRef:g,errSchemaPath:p}}throw new Error('either "keyword" or "schema" must be passed')}be.getSubschema=r;function a(s,u,{dataProp:o,dataPropType:c,data:f,dataTypes:p,propertyName:g}){if(f!==void 0&&o!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:N}=u;if(o!==void 0){const{errorPath:$,dataPathArr:b,opts:y}=u,d=N.let("data",(0,e._)`${u.data}${(0,e.getProperty)(o)}`,!0);E(d),s.errorPath=(0,e.str)`${$}${(0,t.getErrorPath)(o,c,y.jsPropertySyntax)}`,s.parentDataProperty=(0,e._)`${o}`,s.dataPathArr=[...b,s.parentDataProperty]}if(f!==void 0){const $=f instanceof e.Name?f:N.let("data",f,!0);E($),g!==void 0&&(s.propertyName=g)}p&&(s.dataTypes=p);function E($){s.data=$,s.dataLevel=u.dataLevel+1,s.dataTypes=[],u.definedProperties=new Set,s.parentData=u.data,s.dataNames=[...u.dataNames,$]}}be.extendSubschemaData=a;function i(s,{jtdDiscriminator:u,jtdMetadata:o,compositeRule:c,createErrors:f,allErrors:p}){c!==void 0&&(s.compositeRule=c),f!==void 0&&(s.createErrors=f),p!==void 0&&(s.allErrors=p),s.jtdDiscriminator=u,s.jtdMetadata=o}return be.extendSubschemaMode=i,be}var se={};Object.defineProperty(se,"__esModule",{value:!0});se.getSchemaRefs=se.resolveUrl=se.normalizeId=se._getFullPath=se.getFullPath=se.inlineRef=void 0;const Bn=I,Wn=Lr,Qn=pn,Xn=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function Yn(e,t=!0){return typeof e=="boolean"?!0:t===!0?!Tt(e):t?en(e)<=t:!1}se.inlineRef=Yn;const Zn=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function Tt(e){for(const t in e){if(Zn.has(t))return!0;const r=e[t];if(Array.isArray(r)&&r.some(Tt)||typeof r=="object"&&Tt(r))return!0}return!1}function en(e){let t=0;for(const r in e){if(r==="$ref")return 1/0;if(t++,!Xn.has(r)&&(typeof e[r]=="object"&&(0,Bn.eachItem)(e[r],a=>t+=en(a)),t===1/0))return 1/0}return t}function tn(e,t="",r){r!==!1&&(t=Ve(t));const a=e.parse(t);return rn(e,a)}se.getFullPath=tn;function rn(e,t){return e.serialize(t).split("#")[0]+"#"}se._getFullPath=rn;const xn=/#\/?$/;function Ve(e){return e?e.replace(xn,""):""}se.normalizeId=Ve;function es(e,t,r){return r=Ve(r),e.resolve(t,r)}se.resolveUrl=es;const ts=/^[a-z_][-a-z0-9._]*$/i;function rs(e,t){if(typeof e=="boolean")return{};const{schemaId:r,uriResolver:a}=this.opts,i=Ve(e[r]||t),s={"":i},u=tn(a,i,!1),o={},c=new Set;return Qn(e,{allKeys:!0},(g,N,E,$)=>{if($===void 0)return;const b=u+N;let y=s[$];typeof g[r]=="string"&&(y=d.call(this,g[r])),m.call(this,g.$anchor),m.call(this,g.$dynamicAnchor),s[N]=y;function d(P){const j=this.opts.uriResolver.resolve;if(P=Ve(y?j(y,P):P),c.has(P))throw p(P);c.add(P);let T=this.refs[P];return typeof T=="string"&&(T=this.refs[T]),typeof T=="object"?f(g,T.schema,P):P!==Ve(b)&&(P[0]==="#"?(f(g,o[P],P),o[P]=g):this.refs[P]=b),P}function m(P){if(typeof P=="string"){if(!ts.test(P))throw new Error(`invalid anchor "${P}"`);d.call(this,`#${P}`)}}}),o;function f(g,N,E){if(N!==void 0&&!Wn(g,N))throw p(E)}function p(g){return new Error(`reference "${g}" resolves to more than one schema`)}}se.getSchemaRefs=rs;var jr;function ht(){if(jr)return ge;jr=1,Object.defineProperty(ge,"__esModule",{value:!0}),ge.getData=ge.KeywordCxt=ge.validateFunctionCode=void 0;const e=On(),t=Z,r=Xr(),a=Z,i=Gn(),s=Jn(),u=Hn(),o=U,c=_e,f=se,p=I,g=ft();function N(h){if(T(h)&&(q(h),j(h))){y(h);return}E(h,()=>(0,e.topBoolOrEmptySchema)(h))}ge.validateFunctionCode=N;function E({gen:h,validateName:v,schema:k,schemaEnv:R,opts:A},K){A.code.es5?h.func(v,(0,o._)`${c.default.data}, ${c.default.valCxt}`,R.$async,()=>{h.code((0,o._)`"use strict"; ${m(k,A)}`),b(h,A),h.code(K)}):h.func(v,(0,o._)`${c.default.data}, ${$(A)}`,R.$async,()=>h.code(m(k,A)).code(K))}function $(h){return(0,o._)`{${c.default.instancePath}="", ${c.default.parentData}, ${c.default.parentDataProperty}, ${c.default.rootData}=${c.default.data}${h.dynamicRef?(0,o._)`, ${c.default.dynamicAnchors}={}`:o.nil}}={}`}function b(h,v){h.if(c.default.valCxt,()=>{h.var(c.default.instancePath,(0,o._)`${c.default.valCxt}.${c.default.instancePath}`),h.var(c.default.parentData,(0,o._)`${c.default.valCxt}.${c.default.parentData}`),h.var(c.default.parentDataProperty,(0,o._)`${c.default.valCxt}.${c.default.parentDataProperty}`),h.var(c.default.rootData,(0,o._)`${c.default.valCxt}.${c.default.rootData}`),v.dynamicRef&&h.var(c.default.dynamicAnchors,(0,o._)`${c.default.valCxt}.${c.default.dynamicAnchors}`)},()=>{h.var(c.default.instancePath,(0,o._)`""`),h.var(c.default.parentData,(0,o._)`undefined`),h.var(c.default.parentDataProperty,(0,o._)`undefined`),h.var(c.default.rootData,c.default.data),v.dynamicRef&&h.var(c.default.dynamicAnchors,(0,o._)`{}`)})}function y(h){const{schema:v,opts:k,gen:R}=h;E(h,()=>{k.$comment&&v.$comment&&B(h),Y(h),R.let(c.default.vErrors,null),R.let(c.default.errors,0),k.unevaluated&&d(h),H(h),Q(h)})}function d(h){const{gen:v,validateName:k}=h;h.evaluated=v.const("evaluated",(0,o._)`${k}.evaluated`),v.if((0,o._)`${h.evaluated}.dynamicProps`,()=>v.assign((0,o._)`${h.evaluated}.props`,(0,o._)`undefined`)),v.if((0,o._)`${h.evaluated}.dynamicItems`,()=>v.assign((0,o._)`${h.evaluated}.items`,(0,o._)`undefined`))}function m(h,v){const k=typeof h=="object"&&h[v.schemaId];return k&&(v.code.source||v.code.process)?(0,o._)`/*# sourceURL=${k} */`:o.nil}function P(h,v){if(T(h)&&(q(h),j(h))){V(h,v);return}(0,e.boolOrEmptySchema)(h,v)}function j({schema:h,self:v}){if(typeof h=="boolean")return!h;for(const k in h)if(v.RULES.all[k])return!0;return!1}function T(h){return typeof h.schema!="boolean"}function V(h,v){const{schema:k,gen:R,opts:A}=h;A.$comment&&k.$comment&&B(h),ee(h),x(h);const K=R.const("_errs",c.default.errors);H(h,K),R.var(v,(0,o._)`${K} === ${c.default.errors}`)}function q(h){(0,p.checkUnknownRules)(h),W(h)}function H(h,v){if(h.opts.jtd)return Pe(h,[],!1,v);const k=(0,t.getSchemaTypes)(h.schema),R=(0,t.coerceAndCheckDataType)(h,k);Pe(h,k,!R,v)}function W(h){const{schema:v,errSchemaPath:k,opts:R,self:A}=h;v.$ref&&R.ignoreKeywordsWithRef&&(0,p.schemaHasRulesButRef)(v,A.RULES)&&A.logger.warn(`$ref: keywords ignored in schema at path "${k}"`)}function Y(h){const{schema:v,opts:k}=h;v.default!==void 0&&k.useDefaults&&k.strictSchema&&(0,p.checkStrictMode)(h,"default is ignored in the schema root")}function ee(h){const v=h.schema[h.opts.schemaId];v&&(h.baseId=(0,f.resolveUrl)(h.opts.uriResolver,h.baseId,v))}function x(h){if(h.schema.$async&&!h.schemaEnv.$async)throw new Error("async schema in sync schema")}function B({gen:h,schemaEnv:v,schema:k,errSchemaPath:R,opts:A}){const K=k.$comment;if(A.$comment===!0)h.code((0,o._)`${c.default.self}.logger.log(${K})`);else if(typeof A.$comment=="function"){const te=(0,o.str)`${R}/$comment`,fe=h.scopeValue("root",{ref:v.root});h.code((0,o._)`${c.default.self}.opts.$comment(${K}, ${te}, ${fe}.schema)`)}}function Q(h){const{gen:v,schemaEnv:k,validateName:R,ValidationError:A,opts:K}=h;k.$async?v.if((0,o._)`${c.default.errors} === 0`,()=>v.return(c.default.data),()=>v.throw((0,o._)`new ${A}(${c.default.vErrors})`)):(v.assign((0,o._)`${R}.errors`,c.default.vErrors),K.unevaluated&&ve(h),v.return((0,o._)`${c.default.errors} === 0`))}function ve({gen:h,evaluated:v,props:k,items:R}){k instanceof o.Name&&h.assign((0,o._)`${v}.props`,k),R instanceof o.Name&&h.assign((0,o._)`${v}.items`,R)}function Pe(h,v,k,R){const{gen:A,schema:K,data:te,allErrors:fe,opts:oe,self:ie}=h,{RULES:re}=ie;if(K.$ref&&(oe.ignoreKeywordsWithRef||!(0,p.schemaHasRulesButRef)(K,re))){A.block(()=>M(h,"$ref",re.all.$ref.definition));return}oe.jtd||ze(h,v),A.block(()=>{for(const ue of re.rules)Ie(ue);Ie(re.post)});function Ie(ue){(0,r.shouldUseGroup)(K,ue)&&(ue.type?(A.if((0,a.checkDataType)(ue.type,te,oe.strictNumbers)),Re(h,ue),v.length===1&&v[0]===ue.type&&k&&(A.else(),(0,a.reportTypeError)(h)),A.endIf()):Re(h,ue),fe||A.if((0,o._)`${c.default.errors} === ${R||0}`))}}function Re(h,v){const{gen:k,schema:R,opts:{useDefaults:A}}=h;A&&(0,i.assignDefaults)(h,v.type),k.block(()=>{for(const K of v.rules)(0,r.shouldUseRule)(R,K)&&M(h,K.keyword,K.definition,v.type)})}function ze(h,v){h.schemaEnv.meta||!h.opts.strictTypes||(Ce(h,v),h.opts.allowUnionTypes||C(h,v),_(h,h.dataTypes))}function Ce(h,v){if(v.length){if(!h.dataTypes.length){h.dataTypes=v;return}v.forEach(k=>{w(h.dataTypes,k)||l(h,`type "${k}" not allowed by context "${h.dataTypes.join(",")}"`)}),n(h,v)}}function C(h,v){v.length>1&&!(v.length===2&&v.includes("null"))&&l(h,"use allowUnionTypes to allow union type keyword")}function _(h,v){const k=h.self.RULES.all;for(const R in k){const A=k[R];if(typeof A=="object"&&(0,r.shouldUseRule)(h.schema,A)){const{type:K}=A.definition;K.length&&!K.some(te=>O(v,te))&&l(h,`missing type "${K.join(",")}" for keyword "${R}"`)}}}function O(h,v){return h.includes(v)||v==="number"&&h.includes("integer")}function w(h,v){return h.includes(v)||v==="integer"&&h.includes("number")}function n(h,v){const k=[];for(const R of h.dataTypes)w(v,R)?k.push(R):v.includes("integer")&&R==="number"&&k.push("integer");h.dataTypes=k}function l(h,v){const k=h.schemaEnv.baseId+h.errSchemaPath;v+=` at "${k}" (strictTypes)`,(0,p.checkStrictMode)(h,v,h.opts.strictTypes)}class S{constructor(v,k,R){if((0,s.validateKeywordUsage)(v,k,R),this.gen=v.gen,this.allErrors=v.allErrors,this.keyword=R,this.data=v.data,this.schema=v.schema[R],this.$data=k.$data&&v.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,p.schemaRefOrVal)(v,this.schema,R,this.$data),this.schemaType=k.schemaType,this.parentSchema=v.schema,this.params={},this.it=v,this.def=k,this.$data)this.schemaCode=v.gen.const("vSchema",z(this.$data,v));else if(this.schemaCode=this.schemaValue,!(0,s.validSchemaType)(this.schema,k.schemaType,k.allowUndefined))throw new Error(`${R} value must be ${JSON.stringify(k.schemaType)}`);("code"in k?k.trackErrors:k.errors!==!1)&&(this.errsCount=v.gen.const("_errs",c.default.errors))}result(v,k,R){this.failResult((0,o.not)(v),k,R)}failResult(v,k,R){this.gen.if(v),R?R():this.error(),k?(this.gen.else(),k(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(v,k){this.failResult((0,o.not)(v),void 0,k)}fail(v){if(v===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(v),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(v){if(!this.$data)return this.fail(v);const{schemaCode:k}=this;this.fail((0,o._)`${k} !== undefined && (${(0,o.or)(this.invalid$data(),v)})`)}error(v,k,R){if(k){this.setParams(k),this._error(v,R),this.setParams({});return}this._error(v,R)}_error(v,k){(v?g.reportExtraError:g.reportError)(this,this.def.error,k)}$dataError(){(0,g.reportError)(this,this.def.$dataError||g.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,g.resetErrorsCount)(this.gen,this.errsCount)}ok(v){this.allErrors||this.gen.if(v)}setParams(v,k){k?Object.assign(this.params,v):this.params=v}block$data(v,k,R=o.nil){this.gen.block(()=>{this.check$data(v,R),k()})}check$data(v=o.nil,k=o.nil){if(!this.$data)return;const{gen:R,schemaCode:A,schemaType:K,def:te}=this;R.if((0,o.or)((0,o._)`${A} === undefined`,k)),v!==o.nil&&R.assign(v,!0),(K.length||te.validateSchema)&&(R.elseIf(this.invalid$data()),this.$dataError(),v!==o.nil&&R.assign(v,!1)),R.else()}invalid$data(){const{gen:v,schemaCode:k,schemaType:R,def:A,it:K}=this;return(0,o.or)(te(),fe());function te(){if(R.length){if(!(k instanceof o.Name))throw new Error("ajv implementation error");const oe=Array.isArray(R)?R:[R];return(0,o._)`${(0,a.checkDataTypes)(oe,k,K.opts.strictNumbers,a.DataType.Wrong)}`}return o.nil}function fe(){if(A.validateSchema){const oe=v.scopeValue("validate$data",{ref:A.validateSchema});return(0,o._)`!${oe}(${k})`}return o.nil}}subschema(v,k){const R=(0,u.getSubschema)(this.it,v);(0,u.extendSubschemaData)(R,this.it,v),(0,u.extendSubschemaMode)(R,v);const A={...this.it,...R,items:void 0,props:void 0};return P(A,k),A}mergeEvaluated(v,k){const{it:R,gen:A}=this;R.opts.unevaluated&&(R.props!==!0&&v.props!==void 0&&(R.props=p.mergeEvaluated.props(A,v.props,R.props,k)),R.items!==!0&&v.items!==void 0&&(R.items=p.mergeEvaluated.items(A,v.items,R.items,k)))}mergeValidEvaluated(v,k){const{it:R,gen:A}=this;if(R.opts.unevaluated&&(R.props!==!0||R.items!==!0))return A.if(k,()=>this.mergeEvaluated(v,o.Name)),!0}}ge.KeywordCxt=S;function M(h,v,k,R){const A=new S(h,k,v);"code"in k?k.code(A,R):A.$data&&k.validate?(0,s.funcKeywordCode)(A,k):"macro"in k?(0,s.macroKeywordCode)(A,k):(k.compile||k.validate)&&(0,s.funcKeywordCode)(A,k)}const D=/^\/(?:[^~]|~0|~1)*$/,L=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function z(h,{dataLevel:v,dataNames:k,dataPathArr:R}){let A,K;if(h==="")return c.default.rootData;if(h[0]==="/"){if(!D.test(h))throw new Error(`Invalid JSON-pointer: ${h}`);A=h,K=c.default.rootData}else{const ie=L.exec(h);if(!ie)throw new Error(`Invalid JSON-pointer: ${h}`);const re=+ie[1];if(A=ie[2],A==="#"){if(re>=v)throw new Error(oe("property/index",re));return R[v-re]}if(re>v)throw new Error(oe("data",re));if(K=k[v-re],!A)return K}let te=K;const fe=A.split("/");for(const ie of fe)ie&&(K=(0,o._)`${K}${(0,o.getProperty)((0,p.unescapeJsonPointer)(ie))}`,te=(0,o._)`${te} && ${K}`);return te;function oe(ie,re){return`Cannot access ${ie} ${re} levels up, current level is ${v}`}}return ge.getData=z,ge}var Ze={};Object.defineProperty(Ze,"__esModule",{value:!0});class ns extends Error{constructor(t){super("validation failed"),this.errors=t,this.ajv=this.validation=!0}}Ze.default=ns;var Fe={};Object.defineProperty(Fe,"__esModule",{value:!0});const bt=se;class ss extends Error{constructor(t,r,a,i){super(i||`can't resolve reference ${a} from id ${r}`),this.missingRef=(0,bt.resolveUrl)(t,r,a),this.missingSchema=(0,bt.normalizeId)((0,bt.getFullPath)(t,this.missingRef))}}Fe.default=ss;var le={};Object.defineProperty(le,"__esModule",{value:!0});le.resolveSchema=le.getCompilingSchema=le.resolveRef=le.compileSchema=le.SchemaEnv=void 0;const me=U,as=Ze,Ne=_e,ye=se,Or=I,os=ht();class mt{constructor(t){var r;this.refs={},this.dynamicAnchors={};let a;typeof t.schema=="object"&&(a=t.schema),this.schema=t.schema,this.schemaId=t.schemaId,this.root=t.root||this,this.baseId=(r=t.baseId)!==null&&r!==void 0?r:(0,ye.normalizeId)(a?.[t.schemaId||"$id"]),this.schemaPath=t.schemaPath,this.localRefs=t.localRefs,this.meta=t.meta,this.$async=a?.$async,this.refs={}}}le.SchemaEnv=mt;function qt(e){const t=nn.call(this,e);if(t)return t;const r=(0,ye.getFullPath)(this.opts.uriResolver,e.root.baseId),{es5:a,lines:i}=this.opts.code,{ownProperties:s}=this.opts,u=new me.CodeGen(this.scope,{es5:a,lines:i,ownProperties:s});let o;e.$async&&(o=u.scopeValue("Error",{ref:as.default,code:(0,me._)`require("ajv/dist/runtime/validation_error").default`}));const c=u.scopeName("validate");e.validateName=c;const f={gen:u,allErrors:this.opts.allErrors,data:Ne.default.data,parentData:Ne.default.parentData,parentDataProperty:Ne.default.parentDataProperty,dataNames:[Ne.default.data],dataPathArr:[me.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:u.scopeValue("schema",this.opts.code.source===!0?{ref:e.schema,code:(0,me.stringify)(e.schema)}:{ref:e.schema}),validateName:c,ValidationError:o,schema:e.schema,schemaEnv:e,rootId:r,baseId:e.baseId||r,schemaPath:me.nil,errSchemaPath:e.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,me._)`""`,opts:this.opts,self:this};let p;try{this._compilations.add(e),(0,os.validateFunctionCode)(f),u.optimize(this.opts.code.optimize);const g=u.toString();p=`${u.scopeRefs(Ne.default.scope)}return ${g}`,this.opts.code.process&&(p=this.opts.code.process(p,e));const E=new Function(`${Ne.default.self}`,`${Ne.default.scope}`,p)(this,this.scope.get());if(this.scope.value(c,{ref:E}),E.errors=null,E.schema=e.schema,E.schemaEnv=e,e.$async&&(E.$async=!0),this.opts.code.source===!0&&(E.source={validateName:c,validateCode:g,scopeValues:u._values}),this.opts.unevaluated){const{props:$,items:b}=f;E.evaluated={props:$ instanceof me.Name?void 0:$,items:b instanceof me.Name?void 0:b,dynamicProps:$ instanceof me.Name,dynamicItems:b instanceof me.Name},E.source&&(E.source.evaluated=(0,me.stringify)(E.evaluated))}return e.validate=E,e}catch(g){throw delete e.validate,delete e.validateName,p&&this.logger.error("Error compiling schema, function code:",p),g}finally{this._compilations.delete(e)}}le.compileSchema=qt;function is(e,t,r){var a;r=(0,ye.resolveUrl)(this.opts.uriResolver,t,r);const i=e.refs[r];if(i)return i;let s=us.call(this,e,r);if(s===void 0){const u=(a=e.localRefs)===null||a===void 0?void 0:a[r],{schemaId:o}=this.opts;u&&(s=new mt({schema:u,schemaId:o,root:e,baseId:t}))}if(s!==void 0)return e.refs[r]=cs.call(this,s)}le.resolveRef=is;function cs(e){return(0,ye.inlineRef)(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:qt.call(this,e)}function nn(e){for(const t of this._compilations)if(ls(t,e))return t}le.getCompilingSchema=nn;function ls(e,t){return e.schema===t.schema&&e.root===t.root&&e.baseId===t.baseId}function us(e,t){let r;for(;typeof(r=this.refs[t])=="string";)t=r;return r||this.schemas[t]||pt.call(this,e,t)}function pt(e,t){const r=this.opts.uriResolver.parse(t),a=(0,ye._getFullPath)(this.opts.uriResolver,r);let i=(0,ye.getFullPath)(this.opts.uriResolver,e.baseId,void 0);if(Object.keys(e.schema).length>0&&a===i)return Et.call(this,r,e);const s=(0,ye.normalizeId)(a),u=this.refs[s]||this.schemas[s];if(typeof u=="string"){const o=pt.call(this,e,u);return typeof o?.schema!="object"?void 0:Et.call(this,r,o)}if(typeof u?.schema=="object"){if(u.validate||qt.call(this,u),s===(0,ye.normalizeId)(t)){const{schema:o}=u,{schemaId:c}=this.opts,f=o[c];return f&&(i=(0,ye.resolveUrl)(this.opts.uriResolver,i,f)),new mt({schema:o,schemaId:c,root:e,baseId:i})}return Et.call(this,r,u)}}le.resolveSchema=pt;const ds=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function Et(e,{baseId:t,schema:r,root:a}){var i;if(((i=e.fragment)===null||i===void 0?void 0:i[0])!=="/")return;for(const o of e.fragment.slice(1).split("/")){if(typeof r=="boolean")return;const c=r[(0,Or.unescapeFragment)(o)];if(c===void 0)return;r=c;const f=typeof r=="object"&&r[this.opts.schemaId];!ds.has(o)&&f&&(t=(0,ye.resolveUrl)(this.opts.uriResolver,t,f))}let s;if(typeof r!="boolean"&&r.$ref&&!(0,Or.schemaHasRulesButRef)(r,this.RULES)){const o=(0,ye.resolveUrl)(this.opts.uriResolver,t,r.$ref);s=pt.call(this,a,o)}const{schemaId:u}=this.opts;if(s=s||new mt({schema:r,schemaId:u,root:a,baseId:t}),s.schema!==s.root.schema)return s}const fs="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",hs="Meta-schema for $data reference (JSON AnySchema extension proposal)",ms="object",ps=["$data"],ys={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},$s=!1,_s={$id:fs,description:hs,type:ms,required:ps,properties:ys,additionalProperties:$s};var Ft={};Object.defineProperty(Ft,"__esModule",{value:!0});const sn=yn;sn.code='require("ajv/dist/runtime/uri").default';Ft.default=sn;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;var t=ht();Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return t.KeywordCxt}});var r=U;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return r.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return r.CodeGen}});const a=Ze,i=Fe,s=Oe,u=le,o=U,c=se,f=Z,p=I,g=_s,N=Ft,E=(C,_)=>new RegExp(C,_);E.code="new RegExp";const $=["removeAdditional","useDefaults","coerceTypes"],b=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),y={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},d={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},m=200;function P(C){var _,O,w,n,l,S,M,D,L,z,h,v,k,R,A,K,te,fe,oe,ie,re,Ie,ue,_t,vt;const Le=C.strict,gt=(_=C.code)===null||_===void 0?void 0:_.optimize,$r=gt===!0||gt===void 0?1:gt||0,_r=(w=(O=C.code)===null||O===void 0?void 0:O.regExp)!==null&&w!==void 0?w:E,mn=(n=C.uriResolver)!==null&&n!==void 0?n:N.default;return{strictSchema:(S=(l=C.strictSchema)!==null&&l!==void 0?l:Le)!==null&&S!==void 0?S:!0,strictNumbers:(D=(M=C.strictNumbers)!==null&&M!==void 0?M:Le)!==null&&D!==void 0?D:!0,strictTypes:(z=(L=C.strictTypes)!==null&&L!==void 0?L:Le)!==null&&z!==void 0?z:"log",strictTuples:(v=(h=C.strictTuples)!==null&&h!==void 0?h:Le)!==null&&v!==void 0?v:"log",strictRequired:(R=(k=C.strictRequired)!==null&&k!==void 0?k:Le)!==null&&R!==void 0?R:!1,code:C.code?{...C.code,optimize:$r,regExp:_r}:{optimize:$r,regExp:_r},loopRequired:(A=C.loopRequired)!==null&&A!==void 0?A:m,loopEnum:(K=C.loopEnum)!==null&&K!==void 0?K:m,meta:(te=C.meta)!==null&&te!==void 0?te:!0,messages:(fe=C.messages)!==null&&fe!==void 0?fe:!0,inlineRefs:(oe=C.inlineRefs)!==null&&oe!==void 0?oe:!0,schemaId:(ie=C.schemaId)!==null&&ie!==void 0?ie:"$id",addUsedSchema:(re=C.addUsedSchema)!==null&&re!==void 0?re:!0,validateSchema:(Ie=C.validateSchema)!==null&&Ie!==void 0?Ie:!0,validateFormats:(ue=C.validateFormats)!==null&&ue!==void 0?ue:!0,unicodeRegExp:(_t=C.unicodeRegExp)!==null&&_t!==void 0?_t:!0,int32range:(vt=C.int32range)!==null&&vt!==void 0?vt:!0,uriResolver:mn}}class j{constructor(_={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,_=this.opts={..._,...P(_)};const{es5:O,lines:w}=this.opts.code;this.scope=new o.ValueScope({scope:{},prefixes:b,es5:O,lines:w}),this.logger=x(_.logger);const n=_.validateFormats;_.validateFormats=!1,this.RULES=(0,s.getRules)(),T.call(this,y,_,"NOT SUPPORTED"),T.call(this,d,_,"DEPRECATED","warn"),this._metaOpts=Y.call(this),_.formats&&H.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),_.keywords&&W.call(this,_.keywords),typeof _.meta=="object"&&this.addMetaSchema(_.meta),q.call(this),_.validateFormats=n}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:_,meta:O,schemaId:w}=this.opts;let n=g;w==="id"&&(n={...g},n.id=n.$id,delete n.$id),O&&_&&this.addMetaSchema(n,n[w],!1)}defaultMeta(){const{meta:_,schemaId:O}=this.opts;return this.opts.defaultMeta=typeof _=="object"?_[O]||_:void 0}validate(_,O){let w;if(typeof _=="string"){if(w=this.getSchema(_),!w)throw new Error(`no schema with key or ref "${_}"`)}else w=this.compile(_);const n=w(O);return"$async"in w||(this.errors=w.errors),n}compile(_,O){const w=this._addSchema(_,O);return w.validate||this._compileSchemaEnv(w)}compileAsync(_,O){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:w}=this.opts;return n.call(this,_,O);async function n(z,h){await l.call(this,z.$schema);const v=this._addSchema(z,h);return v.validate||S.call(this,v)}async function l(z){z&&!this.getSchema(z)&&await n.call(this,{$ref:z},!0)}async function S(z){try{return this._compileSchemaEnv(z)}catch(h){if(!(h instanceof i.default))throw h;return M.call(this,h),await D.call(this,h.missingSchema),S.call(this,z)}}function M({missingSchema:z,missingRef:h}){if(this.refs[z])throw new Error(`AnySchema ${z} is loaded but ${h} cannot be resolved`)}async function D(z){const h=await L.call(this,z);this.refs[z]||await l.call(this,h.$schema),this.refs[z]||this.addSchema(h,z,O)}async function L(z){const h=this._loading[z];if(h)return h;try{return await(this._loading[z]=w(z))}finally{delete this._loading[z]}}}addSchema(_,O,w,n=this.opts.validateSchema){if(Array.isArray(_)){for(const S of _)this.addSchema(S,void 0,w,n);return this}let l;if(typeof _=="object"){const{schemaId:S}=this.opts;if(l=_[S],l!==void 0&&typeof l!="string")throw new Error(`schema ${S} must be string`)}return O=(0,c.normalizeId)(O||l),this._checkUnique(O),this.schemas[O]=this._addSchema(_,w,O,n,!0),this}addMetaSchema(_,O,w=this.opts.validateSchema){return this.addSchema(_,O,!0,w),this}validateSchema(_,O){if(typeof _=="boolean")return!0;let w;if(w=_.$schema,w!==void 0&&typeof w!="string")throw new Error("$schema must be a string");if(w=w||this.opts.defaultMeta||this.defaultMeta(),!w)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const n=this.validate(w,_);if(!n&&O){const l="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(l);else throw new Error(l)}return n}getSchema(_){let O;for(;typeof(O=V.call(this,_))=="string";)_=O;if(O===void 0){const{schemaId:w}=this.opts,n=new u.SchemaEnv({schema:{},schemaId:w});if(O=u.resolveSchema.call(this,n,_),!O)return;this.refs[_]=O}return O.validate||this._compileSchemaEnv(O)}removeSchema(_){if(_ instanceof RegExp)return this._removeAllSchemas(this.schemas,_),this._removeAllSchemas(this.refs,_),this;switch(typeof _){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const O=V.call(this,_);return typeof O=="object"&&this._cache.delete(O.schema),delete this.schemas[_],delete this.refs[_],this}case"object":{const O=_;this._cache.delete(O);let w=_[this.opts.schemaId];return w&&(w=(0,c.normalizeId)(w),delete this.schemas[w],delete this.refs[w]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(_){for(const O of _)this.addKeyword(O);return this}addKeyword(_,O){let w;if(typeof _=="string")w=_,typeof O=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),O.keyword=w);else if(typeof _=="object"&&O===void 0){if(O=_,w=O.keyword,Array.isArray(w)&&!w.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(Q.call(this,w,O),!O)return(0,p.eachItem)(w,l=>ve.call(this,l)),this;Re.call(this,O);const n={...O,type:(0,f.getJSONTypes)(O.type),schemaType:(0,f.getJSONTypes)(O.schemaType)};return(0,p.eachItem)(w,n.type.length===0?l=>ve.call(this,l,n):l=>n.type.forEach(S=>ve.call(this,l,n,S))),this}getKeyword(_){const O=this.RULES.all[_];return typeof O=="object"?O.definition:!!O}removeKeyword(_){const{RULES:O}=this;delete O.keywords[_],delete O.all[_];for(const w of O.rules){const n=w.rules.findIndex(l=>l.keyword===_);n>=0&&w.rules.splice(n,1)}return this}addFormat(_,O){return typeof O=="string"&&(O=new RegExp(O)),this.formats[_]=O,this}errorsText(_=this.errors,{separator:O=", ",dataVar:w="data"}={}){return!_||_.length===0?"No errors":_.map(n=>`${w}${n.instancePath} ${n.message}`).reduce((n,l)=>n+O+l)}$dataMetaSchema(_,O){const w=this.RULES.all;_=JSON.parse(JSON.stringify(_));for(const n of O){const l=n.split("/").slice(1);let S=_;for(const M of l)S=S[M];for(const M in w){const D=w[M];if(typeof D!="object")continue;const{$data:L}=D.definition,z=S[M];L&&z&&(S[M]=Ce(z))}}return _}_removeAllSchemas(_,O){for(const w in _){const n=_[w];(!O||O.test(w))&&(typeof n=="string"?delete _[w]:n&&!n.meta&&(this._cache.delete(n.schema),delete _[w]))}}_addSchema(_,O,w,n=this.opts.validateSchema,l=this.opts.addUsedSchema){let S;const{schemaId:M}=this.opts;if(typeof _=="object")S=_[M];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof _!="boolean")throw new Error("schema must be object or boolean")}let D=this._cache.get(_);if(D!==void 0)return D;w=(0,c.normalizeId)(S||w);const L=c.getSchemaRefs.call(this,_,w);return D=new u.SchemaEnv({schema:_,schemaId:M,meta:O,baseId:w,localRefs:L}),this._cache.set(D.schema,D),l&&!w.startsWith("#")&&(w&&this._checkUnique(w),this.refs[w]=D),n&&this.validateSchema(_,!0),D}_checkUnique(_){if(this.schemas[_]||this.refs[_])throw new Error(`schema with key or id "${_}" already exists`)}_compileSchemaEnv(_){if(_.meta?this._compileMetaSchema(_):u.compileSchema.call(this,_),!_.validate)throw new Error("ajv implementation error");return _.validate}_compileMetaSchema(_){const O=this.opts;this.opts=this._metaOpts;try{u.compileSchema.call(this,_)}finally{this.opts=O}}}j.ValidationError=a.default,j.MissingRefError=i.default,e.default=j;function T(C,_,O,w="error"){for(const n in C){const l=n;l in _&&this.logger[w](`${O}: option ${n}. ${C[l]}`)}}function V(C){return C=(0,c.normalizeId)(C),this.schemas[C]||this.refs[C]}function q(){const C=this.opts.schemas;if(C)if(Array.isArray(C))this.addSchema(C);else for(const _ in C)this.addSchema(C[_],_)}function H(){for(const C in this.opts.formats){const _=this.opts.formats[C];_&&this.addFormat(C,_)}}function W(C){if(Array.isArray(C)){this.addVocabulary(C);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const _ in C){const O=C[_];O.keyword||(O.keyword=_),this.addKeyword(O)}}function Y(){const C={...this.opts};for(const _ of $)delete C[_];return C}const ee={log(){},warn(){},error(){}};function x(C){if(C===!1)return ee;if(C===void 0)return console;if(C.log&&C.warn&&C.error)return C;throw new Error("logger must implement log, warn and error methods")}const B=/^[a-z_$][a-z0-9_$:-]*$/i;function Q(C,_){const{RULES:O}=this;if((0,p.eachItem)(C,w=>{if(O.keywords[w])throw new Error(`Keyword ${w} is already defined`);if(!B.test(w))throw new Error(`Keyword ${w} has invalid name`)}),!!_&&_.$data&&!("code"in _||"validate"in _))throw new Error('$data keyword must have "code" or "validate" function')}function ve(C,_,O){var w;const n=_?.post;if(O&&n)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:l}=this;let S=n?l.post:l.rules.find(({type:D})=>D===O);if(S||(S={type:O,rules:[]},l.rules.push(S)),l.keywords[C]=!0,!_)return;const M={keyword:C,definition:{..._,type:(0,f.getJSONTypes)(_.type),schemaType:(0,f.getJSONTypes)(_.schemaType)}};_.before?Pe.call(this,S,M,_.before):S.rules.push(M),l.all[C]=M,(w=_.implements)===null||w===void 0||w.forEach(D=>this.addKeyword(D))}function Pe(C,_,O){const w=C.rules.findIndex(n=>n.keyword===O);w>=0?C.rules.splice(w,0,_):(C.rules.push(_),this.logger.warn(`rule ${O} is not defined`))}function Re(C){let{metaSchema:_}=C;_!==void 0&&(C.$data&&this.opts.$data&&(_=Ce(_)),C.validateSchema=this.compile(_,!0))}const ze={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function Ce(C){return{anyOf:[C,ze]}}})(Gr);var Kt={},Ut={},zt={};Object.defineProperty(zt,"__esModule",{value:!0});const vs={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};zt.default=vs;var Te={};Object.defineProperty(Te,"__esModule",{value:!0});Te.callRef=Te.getValidate=void 0;const gs=Fe,Tr=$e(),ce=U,Me=_e,Rr=le,et=I,ws={keyword:"$ref",schemaType:"string",code(e){const{gen:t,schema:r,it:a}=e,{baseId:i,schemaEnv:s,validateName:u,opts:o,self:c}=a,{root:f}=s;if((r==="#"||r==="#/")&&i===f.baseId)return g();const p=Rr.resolveRef.call(c,f,i,r);if(p===void 0)throw new gs.default(a.opts.uriResolver,i,r);if(p instanceof Rr.SchemaEnv)return N(p);return E(p);function g(){if(s===f)return at(e,u,s,s.$async);const $=t.scopeValue("root",{ref:f});return at(e,(0,ce._)`${$}.validate`,f,f.$async)}function N($){const b=an(e,$);at(e,b,$,$.$async)}function E($){const b=t.scopeValue("schema",o.code.source===!0?{ref:$,code:(0,ce.stringify)($)}:{ref:$}),y=t.name("valid"),d=e.subschema({schema:$,dataTypes:[],schemaPath:ce.nil,topSchemaRef:b,errSchemaPath:r},y);e.mergeEvaluated(d),e.ok(y)}}};function an(e,t){const{gen:r}=e;return t.validate?r.scopeValue("validate",{ref:t.validate}):(0,ce._)`${r.scopeValue("wrapper",{ref:t})}.validate`}Te.getValidate=an;function at(e,t,r,a){const{gen:i,it:s}=e,{allErrors:u,schemaEnv:o,opts:c}=s,f=c.passContext?Me.default.this:ce.nil;a?p():g();function p(){if(!o.$async)throw new Error("async schema referenced by sync schema");const $=i.let("valid");i.try(()=>{i.code((0,ce._)`await ${(0,Tr.callValidateCode)(e,t,f)}`),E(t),u||i.assign($,!0)},b=>{i.if((0,ce._)`!(${b} instanceof ${s.ValidationError})`,()=>i.throw(b)),N(b),u||i.assign($,!1)}),e.ok($)}function g(){e.result((0,Tr.callValidateCode)(e,t,f),()=>E(t),()=>N(t))}function N($){const b=(0,ce._)`${$}.errors`;i.assign(Me.default.vErrors,(0,ce._)`${Me.default.vErrors} === null ? ${b} : ${Me.default.vErrors}.concat(${b})`),i.assign(Me.default.errors,(0,ce._)`${Me.default.vErrors}.length`)}function E($){var b;if(!s.opts.unevaluated)return;const y=(b=r?.validate)===null||b===void 0?void 0:b.evaluated;if(s.props!==!0)if(y&&!y.dynamicProps)y.props!==void 0&&(s.props=et.mergeEvaluated.props(i,y.props,s.props));else{const d=i.var("props",(0,ce._)`${$}.evaluated.props`);s.props=et.mergeEvaluated.props(i,d,s.props,ce.Name)}if(s.items!==!0)if(y&&!y.dynamicItems)y.items!==void 0&&(s.items=et.mergeEvaluated.items(i,y.items,s.items));else{const d=i.var("items",(0,ce._)`${$}.evaluated.items`);s.items=et.mergeEvaluated.items(i,d,s.items,ce.Name)}}}Te.callRef=at;Te.default=ws;Object.defineProperty(Ut,"__esModule",{value:!0});const bs=zt,Es=Te,Ps=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",bs.default,Es.default];Ut.default=Ps;var Lt={},Gt={};Object.defineProperty(Gt,"__esModule",{value:!0});const ct=U,Ee=ct.operators,lt={maximum:{okStr:"<=",ok:Ee.LTE,fail:Ee.GT},minimum:{okStr:">=",ok:Ee.GTE,fail:Ee.LT},exclusiveMaximum:{okStr:"<",ok:Ee.LT,fail:Ee.GTE},exclusiveMinimum:{okStr:">",ok:Ee.GT,fail:Ee.LTE}},Ss={message:({keyword:e,schemaCode:t})=>(0,ct.str)`must be ${lt[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>(0,ct._)`{comparison: ${lt[e].okStr}, limit: ${t}}`},Ns={keyword:Object.keys(lt),type:"number",schemaType:"number",$data:!0,error:Ss,code(e){const{keyword:t,data:r,schemaCode:a}=e;e.fail$data((0,ct._)`${r} ${lt[t].fail} ${a} || isNaN(${r})`)}};Gt.default=Ns;var Jt={};Object.defineProperty(Jt,"__esModule",{value:!0});const Be=U,ks={message:({schemaCode:e})=>(0,Be.str)`must be multiple of ${e}`,params:({schemaCode:e})=>(0,Be._)`{multipleOf: ${e}}`},js={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:ks,code(e){const{gen:t,data:r,schemaCode:a,it:i}=e,s=i.opts.multipleOfPrecision,u=t.let("res"),o=s?(0,Be._)`Math.abs(Math.round(${u}) - ${u}) > 1e-${s}`:(0,Be._)`${u} !== parseInt(${u})`;e.fail$data((0,Be._)`(${a} === 0 || (${u} = ${r}/${a}, ${o}))`)}};Jt.default=js;var Ht={},Bt={};Object.defineProperty(Bt,"__esModule",{value:!0});function on(e){const t=e.length;let r=0,a=0,i;for(;a<t;)r++,i=e.charCodeAt(a++),i>=55296&&i<=56319&&a<t&&(i=e.charCodeAt(a),(i&64512)===56320&&a++);return r}Bt.default=on;on.code='require("ajv/dist/runtime/ucs2length").default';Object.defineProperty(Ht,"__esModule",{value:!0});const ke=U,Os=I,Ts=Bt,Rs={message({keyword:e,schemaCode:t}){const r=e==="maxLength"?"more":"fewer";return(0,ke.str)`must NOT have ${r} than ${t} characters`},params:({schemaCode:e})=>(0,ke._)`{limit: ${e}}`},Cs={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:Rs,code(e){const{keyword:t,data:r,schemaCode:a,it:i}=e,s=t==="maxLength"?ke.operators.GT:ke.operators.LT,u=i.opts.unicode===!1?(0,ke._)`${r}.length`:(0,ke._)`${(0,Os.useFunc)(e.gen,Ts.default)}(${r})`;e.fail$data((0,ke._)`${u} ${s} ${a}`)}};Ht.default=Cs;var Wt={};Object.defineProperty(Wt,"__esModule",{value:!0});const Is=$e(),ut=U,Ms={message:({schemaCode:e})=>(0,ut.str)`must match pattern "${e}"`,params:({schemaCode:e})=>(0,ut._)`{pattern: ${e}}`},As={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:Ms,code(e){const{data:t,$data:r,schema:a,schemaCode:i,it:s}=e,u=s.opts.unicodeRegExp?"u":"",o=r?(0,ut._)`(new RegExp(${i}, ${u}))`:(0,Is.usePattern)(e,a);e.fail$data((0,ut._)`!${o}.test(${t})`)}};Wt.default=As;var Qt={};Object.defineProperty(Qt,"__esModule",{value:!0});const We=U,Ds={message({keyword:e,schemaCode:t}){const r=e==="maxProperties"?"more":"fewer";return(0,We.str)`must NOT have ${r} than ${t} properties`},params:({schemaCode:e})=>(0,We._)`{limit: ${e}}`},Vs={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:Ds,code(e){const{keyword:t,data:r,schemaCode:a}=e,i=t==="maxProperties"?We.operators.GT:We.operators.LT;e.fail$data((0,We._)`Object.keys(${r}).length ${i} ${a}`)}};Qt.default=Vs;var Xt={};Object.defineProperty(Xt,"__esModule",{value:!0});const Je=$e(),Qe=U,qs=I,Fs={message:({params:{missingProperty:e}})=>(0,Qe.str)`must have required property '${e}'`,params:({params:{missingProperty:e}})=>(0,Qe._)`{missingProperty: ${e}}`},Ks={keyword:"required",type:"object",schemaType:"array",$data:!0,error:Fs,code(e){const{gen:t,schema:r,schemaCode:a,data:i,$data:s,it:u}=e,{opts:o}=u;if(!s&&r.length===0)return;const c=r.length>=o.loopRequired;if(u.allErrors?f():p(),o.strictRequired){const E=e.parentSchema.properties,{definedProperties:$}=e.it;for(const b of r)if(E?.[b]===void 0&&!$.has(b)){const y=u.schemaEnv.baseId+u.errSchemaPath,d=`required property "${b}" is not defined at "${y}" (strictRequired)`;(0,qs.checkStrictMode)(u,d,u.opts.strictRequired)}}function f(){if(c||s)e.block$data(Qe.nil,g);else for(const E of r)(0,Je.checkReportMissingProp)(e,E)}function p(){const E=t.let("missing");if(c||s){const $=t.let("valid",!0);e.block$data($,()=>N(E,$)),e.ok($)}else t.if((0,Je.checkMissingProp)(e,r,E)),(0,Je.reportMissingProp)(e,E),t.else()}function g(){t.forOf("prop",a,E=>{e.setParams({missingProperty:E}),t.if((0,Je.noPropertyInData)(t,i,E,o.ownProperties),()=>e.error())})}function N(E,$){e.setParams({missingProperty:E}),t.forOf(E,a,()=>{t.assign($,(0,Je.propertyInData)(t,i,E,o.ownProperties)),t.if((0,Qe.not)($),()=>{e.error(),t.break()})},Qe.nil)}}};Xt.default=Ks;var Yt={};Object.defineProperty(Yt,"__esModule",{value:!0});const Xe=U,Us={message({keyword:e,schemaCode:t}){const r=e==="maxItems"?"more":"fewer";return(0,Xe.str)`must NOT have ${r} than ${t} items`},params:({schemaCode:e})=>(0,Xe._)`{limit: ${e}}`},zs={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:Us,code(e){const{keyword:t,data:r,schemaCode:a}=e,i=t==="maxItems"?Xe.operators.GT:Xe.operators.LT;e.fail$data((0,Xe._)`${r}.length ${i} ${a}`)}};Yt.default=zs;var Zt={},xe={};Object.defineProperty(xe,"__esModule",{value:!0});const cn=Lr;cn.code='require("ajv/dist/runtime/equal").default';xe.default=cn;Object.defineProperty(Zt,"__esModule",{value:!0});const Pt=Z,ne=U,Ls=I,Gs=xe,Js={message:({params:{i:e,j:t}})=>(0,ne.str)`must NOT have duplicate items (items ## ${t} and ${e} are identical)`,params:({params:{i:e,j:t}})=>(0,ne._)`{i: ${e}, j: ${t}}`},Hs={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:Js,code(e){const{gen:t,data:r,$data:a,schema:i,parentSchema:s,schemaCode:u,it:o}=e;if(!a&&!i)return;const c=t.let("valid"),f=s.items?(0,Pt.getSchemaTypes)(s.items):[];e.block$data(c,p,(0,ne._)`${u} === false`),e.ok(c);function p(){const $=t.let("i",(0,ne._)`${r}.length`),b=t.let("j");e.setParams({i:$,j:b}),t.assign(c,!0),t.if((0,ne._)`${$} > 1`,()=>(g()?N:E)($,b))}function g(){return f.length>0&&!f.some($=>$==="object"||$==="array")}function N($,b){const y=t.name("item"),d=(0,Pt.checkDataTypes)(f,y,o.opts.strictNumbers,Pt.DataType.Wrong),m=t.const("indices",(0,ne._)`{}`);t.for((0,ne._)`;${$}--;`,()=>{t.let(y,(0,ne._)`${r}[${$}]`),t.if(d,(0,ne._)`continue`),f.length>1&&t.if((0,ne._)`typeof ${y} == "string"`,(0,ne._)`${y} += "_"`),t.if((0,ne._)`typeof ${m}[${y}] == "number"`,()=>{t.assign(b,(0,ne._)`${m}[${y}]`),e.error(),t.assign(c,!1).break()}).code((0,ne._)`${m}[${y}] = ${$}`)})}function E($,b){const y=(0,Ls.useFunc)(t,Gs.default),d=t.name("outer");t.label(d).for((0,ne._)`;${$}--;`,()=>t.for((0,ne._)`${b} = ${$}; ${b}--;`,()=>t.if((0,ne._)`${y}(${r}[${$}], ${r}[${b}])`,()=>{e.error(),t.assign(c,!1).break(d)})))}}};Zt.default=Hs;var xt={};Object.defineProperty(xt,"__esModule",{value:!0});const Rt=U,Bs=I,Ws=xe,Qs={message:"must be equal to constant",params:({schemaCode:e})=>(0,Rt._)`{allowedValue: ${e}}`},Xs={keyword:"const",$data:!0,error:Qs,code(e){const{gen:t,data:r,$data:a,schemaCode:i,schema:s}=e;a||s&&typeof s=="object"?e.fail$data((0,Rt._)`!${(0,Bs.useFunc)(t,Ws.default)}(${r}, ${i})`):e.fail((0,Rt._)`${s} !== ${r}`)}};xt.default=Xs;var er={};Object.defineProperty(er,"__esModule",{value:!0});const He=U,Ys=I,Zs=xe,xs={message:"must be equal to one of the allowed values",params:({schemaCode:e})=>(0,He._)`{allowedValues: ${e}}`},ea={keyword:"enum",schemaType:"array",$data:!0,error:xs,code(e){const{gen:t,data:r,$data:a,schema:i,schemaCode:s,it:u}=e;if(!a&&i.length===0)throw new Error("enum must have non-empty array");const o=i.length>=u.opts.loopEnum;let c;const f=()=>c??(c=(0,Ys.useFunc)(t,Zs.default));let p;if(o||a)p=t.let("valid"),e.block$data(p,g);else{if(!Array.isArray(i))throw new Error("ajv implementation error");const E=t.const("vSchema",s);p=(0,He.or)(...i.map(($,b)=>N(E,b)))}e.pass(p);function g(){t.assign(p,!1),t.forOf("v",s,E=>t.if((0,He._)`${f()}(${r}, ${E})`,()=>t.assign(p,!0).break()))}function N(E,$){const b=i[$];return typeof b=="object"&&b!==null?(0,He._)`${f()}(${r}, ${E}[${$}])`:(0,He._)`${r} === ${b}`}}};er.default=ea;Object.defineProperty(Lt,"__esModule",{value:!0});const ta=Gt,ra=Jt,na=Ht,sa=Wt,aa=Qt,oa=Xt,ia=Yt,ca=Zt,la=xt,ua=er,da=[ta.default,ra.default,na.default,sa.default,aa.default,oa.default,ia.default,ca.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},la.default,ua.default];Lt.default=da;var tr={},Ke={};Object.defineProperty(Ke,"__esModule",{value:!0});Ke.validateAdditionalItems=void 0;const je=U,Ct=I,fa={message:({params:{len:e}})=>(0,je.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,je._)`{limit: ${e}}`},ha={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:fa,code(e){const{parentSchema:t,it:r}=e,{items:a}=t;if(!Array.isArray(a)){(0,Ct.checkStrictMode)(r,'"additionalItems" is ignored when "items" is not an array of schemas');return}ln(e,a)}};function ln(e,t){const{gen:r,schema:a,data:i,keyword:s,it:u}=e;u.items=!0;const o=r.const("len",(0,je._)`${i}.length`);if(a===!1)e.setParams({len:t.length}),e.pass((0,je._)`${o} <= ${t.length}`);else if(typeof a=="object"&&!(0,Ct.alwaysValidSchema)(u,a)){const f=r.var("valid",(0,je._)`${o} <= ${t.length}`);r.if((0,je.not)(f),()=>c(f)),e.ok(f)}function c(f){r.forRange("i",t.length,o,p=>{e.subschema({keyword:s,dataProp:p,dataPropType:Ct.Type.Num},f),u.allErrors||r.if((0,je.not)(f),()=>r.break())})}}Ke.validateAdditionalItems=ln;Ke.default=ha;var rr={},Ue={};Object.defineProperty(Ue,"__esModule",{value:!0});Ue.validateTuple=void 0;const Cr=U,ot=I,ma=$e(),pa={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(e){const{schema:t,it:r}=e;if(Array.isArray(t))return un(e,"additionalItems",t);r.items=!0,!(0,ot.alwaysValidSchema)(r,t)&&e.ok((0,ma.validateArray)(e))}};function un(e,t,r=e.schema){const{gen:a,parentSchema:i,data:s,keyword:u,it:o}=e;p(i),o.opts.unevaluated&&r.length&&o.items!==!0&&(o.items=ot.mergeEvaluated.items(a,r.length,o.items));const c=a.name("valid"),f=a.const("len",(0,Cr._)`${s}.length`);r.forEach((g,N)=>{(0,ot.alwaysValidSchema)(o,g)||(a.if((0,Cr._)`${f} > ${N}`,()=>e.subschema({keyword:u,schemaProp:N,dataProp:N},c)),e.ok(c))});function p(g){const{opts:N,errSchemaPath:E}=o,$=r.length,b=$===g.minItems&&($===g.maxItems||g[t]===!1);if(N.strictTuples&&!b){const y=`"${u}" is ${$}-tuple, but minItems or maxItems/${t} are not specified or different at path "${E}"`;(0,ot.checkStrictMode)(o,y,N.strictTuples)}}}Ue.validateTuple=un;Ue.default=pa;Object.defineProperty(rr,"__esModule",{value:!0});const ya=Ue,$a={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:e=>(0,ya.validateTuple)(e,"items")};rr.default=$a;var nr={};Object.defineProperty(nr,"__esModule",{value:!0});const Ir=U,_a=I,va=$e(),ga=Ke,wa={message:({params:{len:e}})=>(0,Ir.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,Ir._)`{limit: ${e}}`},ba={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:wa,code(e){const{schema:t,parentSchema:r,it:a}=e,{prefixItems:i}=r;a.items=!0,!(0,_a.alwaysValidSchema)(a,t)&&(i?(0,ga.validateAdditionalItems)(e,i):e.ok((0,va.validateArray)(e)))}};nr.default=ba;var sr={};Object.defineProperty(sr,"__esModule",{value:!0});const de=U,tt=I,Ea={message:({params:{min:e,max:t}})=>t===void 0?(0,de.str)`must contain at least ${e} valid item(s)`:(0,de.str)`must contain at least ${e} and no more than ${t} valid item(s)`,params:({params:{min:e,max:t}})=>t===void 0?(0,de._)`{minContains: ${e}}`:(0,de._)`{minContains: ${e}, maxContains: ${t}}`},Pa={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:Ea,code(e){const{gen:t,schema:r,parentSchema:a,data:i,it:s}=e;let u,o;const{minContains:c,maxContains:f}=a;s.opts.next?(u=c===void 0?1:c,o=f):u=1;const p=t.const("len",(0,de._)`${i}.length`);if(e.setParams({min:u,max:o}),o===void 0&&u===0){(0,tt.checkStrictMode)(s,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(o!==void 0&&u>o){(0,tt.checkStrictMode)(s,'"minContains" > "maxContains" is always invalid'),e.fail();return}if((0,tt.alwaysValidSchema)(s,r)){let b=(0,de._)`${p} >= ${u}`;o!==void 0&&(b=(0,de._)`${b} && ${p} <= ${o}`),e.pass(b);return}s.items=!0;const g=t.name("valid");o===void 0&&u===1?E(g,()=>t.if(g,()=>t.break())):u===0?(t.let(g,!0),o!==void 0&&t.if((0,de._)`${i}.length > 0`,N)):(t.let(g,!1),N()),e.result(g,()=>e.reset());function N(){const b=t.name("_valid"),y=t.let("count",0);E(b,()=>t.if(b,()=>$(y)))}function E(b,y){t.forRange("i",0,p,d=>{e.subschema({keyword:"contains",dataProp:d,dataPropType:tt.Type.Num,compositeRule:!0},b),y()})}function $(b){t.code((0,de._)`${b}++`),o===void 0?t.if((0,de._)`${b} >= ${u}`,()=>t.assign(g,!0).break()):(t.if((0,de._)`${b} > ${o}`,()=>t.assign(g,!1).break()),u===1?t.assign(g,!0):t.if((0,de._)`${b} >= ${u}`,()=>t.assign(g,!0)))}}};sr.default=Pa;var dn={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateSchemaDeps=e.validatePropertyDeps=e.error=void 0;const t=U,r=I,a=$e();e.error={message:({params:{property:c,depsCount:f,deps:p}})=>{const g=f===1?"property":"properties";return(0,t.str)`must have ${g} ${p} when property ${c} is present`},params:({params:{property:c,depsCount:f,deps:p,missingProperty:g}})=>(0,t._)`{property: ${c},
    missingProperty: ${g},
    depsCount: ${f},
    deps: ${p}}`};const i={keyword:"dependencies",type:"object",schemaType:"object",error:e.error,code(c){const[f,p]=s(c);u(c,f),o(c,p)}};function s({schema:c}){const f={},p={};for(const g in c){if(g==="__proto__")continue;const N=Array.isArray(c[g])?f:p;N[g]=c[g]}return[f,p]}function u(c,f=c.schema){const{gen:p,data:g,it:N}=c;if(Object.keys(f).length===0)return;const E=p.let("missing");for(const $ in f){const b=f[$];if(b.length===0)continue;const y=(0,a.propertyInData)(p,g,$,N.opts.ownProperties);c.setParams({property:$,depsCount:b.length,deps:b.join(", ")}),N.allErrors?p.if(y,()=>{for(const d of b)(0,a.checkReportMissingProp)(c,d)}):(p.if((0,t._)`${y} && (${(0,a.checkMissingProp)(c,b,E)})`),(0,a.reportMissingProp)(c,E),p.else())}}e.validatePropertyDeps=u;function o(c,f=c.schema){const{gen:p,data:g,keyword:N,it:E}=c,$=p.name("valid");for(const b in f)(0,r.alwaysValidSchema)(E,f[b])||(p.if((0,a.propertyInData)(p,g,b,E.opts.ownProperties),()=>{const y=c.subschema({keyword:N,schemaProp:b},$);c.mergeValidEvaluated(y,$)},()=>p.var($,!0)),c.ok($))}e.validateSchemaDeps=o,e.default=i})(dn);var ar={};Object.defineProperty(ar,"__esModule",{value:!0});const fn=U,Sa=I,Na={message:"property name must be valid",params:({params:e})=>(0,fn._)`{propertyName: ${e.propertyName}}`},ka={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:Na,code(e){const{gen:t,schema:r,data:a,it:i}=e;if((0,Sa.alwaysValidSchema)(i,r))return;const s=t.name("valid");t.forIn("key",a,u=>{e.setParams({propertyName:u}),e.subschema({keyword:"propertyNames",data:u,dataTypes:["string"],propertyName:u,compositeRule:!0},s),t.if((0,fn.not)(s),()=>{e.error(!0),i.allErrors||t.break()})}),e.ok(s)}};ar.default=ka;var yt={};Object.defineProperty(yt,"__esModule",{value:!0});const rt=$e(),pe=U,ja=_e,nt=I,Oa={message:"must NOT have additional properties",params:({params:e})=>(0,pe._)`{additionalProperty: ${e.additionalProperty}}`},Ta={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:Oa,code(e){const{gen:t,schema:r,parentSchema:a,data:i,errsCount:s,it:u}=e;if(!s)throw new Error("ajv implementation error");const{allErrors:o,opts:c}=u;if(u.props=!0,c.removeAdditional!=="all"&&(0,nt.alwaysValidSchema)(u,r))return;const f=(0,rt.allSchemaProperties)(a.properties),p=(0,rt.allSchemaProperties)(a.patternProperties);g(),e.ok((0,pe._)`${s} === ${ja.default.errors}`);function g(){t.forIn("key",i,y=>{!f.length&&!p.length?$(y):t.if(N(y),()=>$(y))})}function N(y){let d;if(f.length>8){const m=(0,nt.schemaRefOrVal)(u,a.properties,"properties");d=(0,rt.isOwnProperty)(t,m,y)}else f.length?d=(0,pe.or)(...f.map(m=>(0,pe._)`${y} === ${m}`)):d=pe.nil;return p.length&&(d=(0,pe.or)(d,...p.map(m=>(0,pe._)`${(0,rt.usePattern)(e,m)}.test(${y})`))),(0,pe.not)(d)}function E(y){t.code((0,pe._)`delete ${i}[${y}]`)}function $(y){if(c.removeAdditional==="all"||c.removeAdditional&&r===!1){E(y);return}if(r===!1){e.setParams({additionalProperty:y}),e.error(),o||t.break();return}if(typeof r=="object"&&!(0,nt.alwaysValidSchema)(u,r)){const d=t.name("valid");c.removeAdditional==="failing"?(b(y,d,!1),t.if((0,pe.not)(d),()=>{e.reset(),E(y)})):(b(y,d),o||t.if((0,pe.not)(d),()=>t.break()))}}function b(y,d,m){const P={keyword:"additionalProperties",dataProp:y,dataPropType:nt.Type.Str};m===!1&&Object.assign(P,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema(P,d)}}};yt.default=Ta;var or={};Object.defineProperty(or,"__esModule",{value:!0});const Ra=ht(),Mr=$e(),St=I,Ar=yt,Ca={keyword:"properties",type:"object",schemaType:"object",code(e){const{gen:t,schema:r,parentSchema:a,data:i,it:s}=e;s.opts.removeAdditional==="all"&&a.additionalProperties===void 0&&Ar.default.code(new Ra.KeywordCxt(s,Ar.default,"additionalProperties"));const u=(0,Mr.allSchemaProperties)(r);for(const g of u)s.definedProperties.add(g);s.opts.unevaluated&&u.length&&s.props!==!0&&(s.props=St.mergeEvaluated.props(t,(0,St.toHash)(u),s.props));const o=u.filter(g=>!(0,St.alwaysValidSchema)(s,r[g]));if(o.length===0)return;const c=t.name("valid");for(const g of o)f(g)?p(g):(t.if((0,Mr.propertyInData)(t,i,g,s.opts.ownProperties)),p(g),s.allErrors||t.else().var(c,!0),t.endIf()),e.it.definedProperties.add(g),e.ok(c);function f(g){return s.opts.useDefaults&&!s.compositeRule&&r[g].default!==void 0}function p(g){e.subschema({keyword:"properties",schemaProp:g,dataProp:g},c)}}};or.default=Ca;var ir={};Object.defineProperty(ir,"__esModule",{value:!0});const Dr=$e(),st=U,Vr=I,qr=I,Ia={keyword:"patternProperties",type:"object",schemaType:"object",code(e){const{gen:t,schema:r,data:a,parentSchema:i,it:s}=e,{opts:u}=s,o=(0,Dr.allSchemaProperties)(r),c=o.filter(b=>(0,Vr.alwaysValidSchema)(s,r[b]));if(o.length===0||c.length===o.length&&(!s.opts.unevaluated||s.props===!0))return;const f=u.strictSchema&&!u.allowMatchingProperties&&i.properties,p=t.name("valid");s.props!==!0&&!(s.props instanceof st.Name)&&(s.props=(0,qr.evaluatedPropsToName)(t,s.props));const{props:g}=s;N();function N(){for(const b of o)f&&E(b),s.allErrors?$(b):(t.var(p,!0),$(b),t.if(p))}function E(b){for(const y in f)new RegExp(b).test(y)&&(0,Vr.checkStrictMode)(s,`property ${y} matches pattern ${b} (use allowMatchingProperties)`)}function $(b){t.forIn("key",a,y=>{t.if((0,st._)`${(0,Dr.usePattern)(e,b)}.test(${y})`,()=>{const d=c.includes(b);d||e.subschema({keyword:"patternProperties",schemaProp:b,dataProp:y,dataPropType:qr.Type.Str},p),s.opts.unevaluated&&g!==!0?t.assign((0,st._)`${g}[${y}]`,!0):!d&&!s.allErrors&&t.if((0,st.not)(p),()=>t.break())})})}}};ir.default=Ia;var cr={};Object.defineProperty(cr,"__esModule",{value:!0});const Ma=I,Aa={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(e){const{gen:t,schema:r,it:a}=e;if((0,Ma.alwaysValidSchema)(a,r)){e.fail();return}const i=t.name("valid");e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},i),e.failResult(i,()=>e.reset(),()=>e.error())},error:{message:"must NOT be valid"}};cr.default=Aa;var lr={};Object.defineProperty(lr,"__esModule",{value:!0});const Da=$e(),Va={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:Da.validateUnion,error:{message:"must match a schema in anyOf"}};lr.default=Va;var ur={};Object.defineProperty(ur,"__esModule",{value:!0});const it=U,qa=I,Fa={message:"must match exactly one schema in oneOf",params:({params:e})=>(0,it._)`{passingSchemas: ${e.passing}}`},Ka={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:Fa,code(e){const{gen:t,schema:r,parentSchema:a,it:i}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");if(i.opts.discriminator&&a.discriminator)return;const s=r,u=t.let("valid",!1),o=t.let("passing",null),c=t.name("_valid");e.setParams({passing:o}),t.block(f),e.result(u,()=>e.reset(),()=>e.error(!0));function f(){s.forEach((p,g)=>{let N;(0,qa.alwaysValidSchema)(i,p)?t.var(c,!0):N=e.subschema({keyword:"oneOf",schemaProp:g,compositeRule:!0},c),g>0&&t.if((0,it._)`${c} && ${u}`).assign(u,!1).assign(o,(0,it._)`[${o}, ${g}]`).else(),t.if(c,()=>{t.assign(u,!0),t.assign(o,g),N&&e.mergeEvaluated(N,it.Name)})})}}};ur.default=Ka;var dr={};Object.defineProperty(dr,"__esModule",{value:!0});const Ua=I,za={keyword:"allOf",schemaType:"array",code(e){const{gen:t,schema:r,it:a}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");const i=t.name("valid");r.forEach((s,u)=>{if((0,Ua.alwaysValidSchema)(a,s))return;const o=e.subschema({keyword:"allOf",schemaProp:u},i);e.ok(i),e.mergeEvaluated(o)})}};dr.default=za;var fr={};Object.defineProperty(fr,"__esModule",{value:!0});const dt=U,hn=I,La={message:({params:e})=>(0,dt.str)`must match "${e.ifClause}" schema`,params:({params:e})=>(0,dt._)`{failingKeyword: ${e.ifClause}}`},Ga={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:La,code(e){const{gen:t,parentSchema:r,it:a}=e;r.then===void 0&&r.else===void 0&&(0,hn.checkStrictMode)(a,'"if" without "then" and "else" is ignored');const i=Fr(a,"then"),s=Fr(a,"else");if(!i&&!s)return;const u=t.let("valid",!0),o=t.name("_valid");if(c(),e.reset(),i&&s){const p=t.let("ifClause");e.setParams({ifClause:p}),t.if(o,f("then",p),f("else",p))}else i?t.if(o,f("then")):t.if((0,dt.not)(o),f("else"));e.pass(u,()=>e.error(!0));function c(){const p=e.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},o);e.mergeEvaluated(p)}function f(p,g){return()=>{const N=e.subschema({keyword:p},o);t.assign(u,o),e.mergeValidEvaluated(N,u),g?t.assign(g,(0,dt._)`${p}`):e.setParams({ifClause:p})}}}};function Fr(e,t){const r=e.schema[t];return r!==void 0&&!(0,hn.alwaysValidSchema)(e,r)}fr.default=Ga;var hr={};Object.defineProperty(hr,"__esModule",{value:!0});const Ja=I,Ha={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:e,parentSchema:t,it:r}){t.if===void 0&&(0,Ja.checkStrictMode)(r,`"${e}" without "if" is ignored`)}};hr.default=Ha;Object.defineProperty(tr,"__esModule",{value:!0});const Ba=Ke,Wa=rr,Qa=Ue,Xa=nr,Ya=sr,Za=dn,xa=ar,eo=yt,to=or,ro=ir,no=cr,so=lr,ao=ur,oo=dr,io=fr,co=hr;function lo(e=!1){const t=[no.default,so.default,ao.default,oo.default,io.default,co.default,xa.default,eo.default,Za.default,to.default,ro.default];return e?t.push(Wa.default,Xa.default):t.push(Ba.default,Qa.default),t.push(Ya.default),t}tr.default=lo;var mr={},pr={};Object.defineProperty(pr,"__esModule",{value:!0});const X=U,uo={message:({schemaCode:e})=>(0,X.str)`must match format "${e}"`,params:({schemaCode:e})=>(0,X._)`{format: ${e}}`},fo={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:uo,code(e,t){const{gen:r,data:a,$data:i,schema:s,schemaCode:u,it:o}=e,{opts:c,errSchemaPath:f,schemaEnv:p,self:g}=o;if(!c.validateFormats)return;i?N():E();function N(){const $=r.scopeValue("formats",{ref:g.formats,code:c.code.formats}),b=r.const("fDef",(0,X._)`${$}[${u}]`),y=r.let("fType"),d=r.let("format");r.if((0,X._)`typeof ${b} == "object" && !(${b} instanceof RegExp)`,()=>r.assign(y,(0,X._)`${b}.type || "string"`).assign(d,(0,X._)`${b}.validate`),()=>r.assign(y,(0,X._)`"string"`).assign(d,b)),e.fail$data((0,X.or)(m(),P()));function m(){return c.strictSchema===!1?X.nil:(0,X._)`${u} && !${d}`}function P(){const j=p.$async?(0,X._)`(${b}.async ? await ${d}(${a}) : ${d}(${a}))`:(0,X._)`${d}(${a})`,T=(0,X._)`(typeof ${d} == "function" ? ${j} : ${d}.test(${a}))`;return(0,X._)`${d} && ${d} !== true && ${y} === ${t} && !${T}`}}function E(){const $=g.formats[s];if(!$){m();return}if($===!0)return;const[b,y,d]=P($);b===t&&e.pass(j());function m(){if(c.strictSchema===!1){g.logger.warn(T());return}throw new Error(T());function T(){return`unknown format "${s}" ignored in schema at path "${f}"`}}function P(T){const V=T instanceof RegExp?(0,X.regexpCode)(T):c.code.formats?(0,X._)`${c.code.formats}${(0,X.getProperty)(s)}`:void 0,q=r.scopeValue("formats",{key:s,ref:T,code:V});return typeof T=="object"&&!(T instanceof RegExp)?[T.type||"string",T.validate,(0,X._)`${q}.validate`]:["string",T,q]}function j(){if(typeof $=="object"&&!($ instanceof RegExp)&&$.async){if(!p.$async)throw new Error("async format in sync schema");return(0,X._)`await ${d}(${a})`}return typeof y=="function"?(0,X._)`${d}(${a})`:(0,X._)`${d}.test(${a})`}}}};pr.default=fo;Object.defineProperty(mr,"__esModule",{value:!0});const ho=pr,mo=[ho.default];mr.default=mo;var qe={};Object.defineProperty(qe,"__esModule",{value:!0});qe.contentVocabulary=qe.metadataVocabulary=void 0;qe.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];qe.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"];Object.defineProperty(Kt,"__esModule",{value:!0});const po=Ut,yo=Lt,$o=tr,_o=mr,Kr=qe,vo=[po.default,yo.default,(0,$o.default)(),_o.default,Kr.metadataVocabulary,Kr.contentVocabulary];Kt.default=vo;var yr={},$t={};Object.defineProperty($t,"__esModule",{value:!0});$t.DiscrError=void 0;var Ur;(function(e){e.Tag="tag",e.Mapping="mapping"})(Ur||($t.DiscrError=Ur={}));Object.defineProperty(yr,"__esModule",{value:!0});const Ae=U,It=$t,zr=le,go=Fe,wo=I,bo={message:({params:{discrError:e,tagName:t}})=>e===It.DiscrError.Tag?`tag "${t}" must be string`:`value of tag "${t}" must be in oneOf`,params:({params:{discrError:e,tag:t,tagName:r}})=>(0,Ae._)`{error: ${e}, tag: ${r}, tagValue: ${t}}`},Eo={keyword:"discriminator",type:"object",schemaType:"object",error:bo,code(e){const{gen:t,data:r,schema:a,parentSchema:i,it:s}=e,{oneOf:u}=i;if(!s.opts.discriminator)throw new Error("discriminator: requires discriminator option");const o=a.propertyName;if(typeof o!="string")throw new Error("discriminator: requires propertyName");if(a.mapping)throw new Error("discriminator: mapping is not supported");if(!u)throw new Error("discriminator: requires oneOf keyword");const c=t.let("valid",!1),f=t.const("tag",(0,Ae._)`${r}${(0,Ae.getProperty)(o)}`);t.if((0,Ae._)`typeof ${f} == "string"`,()=>p(),()=>e.error(!1,{discrError:It.DiscrError.Tag,tag:f,tagName:o})),e.ok(c);function p(){const E=N();t.if(!1);for(const $ in E)t.elseIf((0,Ae._)`${f} === ${$}`),t.assign(c,g(E[$]));t.else(),e.error(!1,{discrError:It.DiscrError.Mapping,tag:f,tagName:o}),t.endIf()}function g(E){const $=t.name("valid"),b=e.subschema({keyword:"oneOf",schemaProp:E},$);return e.mergeEvaluated(b,Ae.Name),$}function N(){var E;const $={},b=d(i);let y=!0;for(let j=0;j<u.length;j++){let T=u[j];if(T?.$ref&&!(0,wo.schemaHasRulesButRef)(T,s.self.RULES)){const q=T.$ref;if(T=zr.resolveRef.call(s.self,s.schemaEnv.root,s.baseId,q),T instanceof zr.SchemaEnv&&(T=T.schema),T===void 0)throw new go.default(s.opts.uriResolver,s.baseId,q)}const V=(E=T?.properties)===null||E===void 0?void 0:E[o];if(typeof V!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${o}"`);y=y&&(b||d(T)),m(V,j)}if(!y)throw new Error(`discriminator: "${o}" must be required`);return $;function d({required:j}){return Array.isArray(j)&&j.includes(o)}function m(j,T){if(j.const)P(j.const,T);else if(j.enum)for(const V of j.enum)P(V,T);else throw new Error(`discriminator: "properties/${o}" must have "const" or "enum"`)}function P(j,T){if(typeof j!="string"||j in $)throw new Error(`discriminator: "${o}" values must be unique strings`);$[j]=T}}}};yr.default=Eo;const Po="http://json-schema.org/draft-07/schema#",So="http://json-schema.org/draft-07/schema#",No="Core schema meta-schema",ko={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},jo=["object","boolean"],Oo={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},To={$schema:Po,$id:So,title:No,definitions:ko,type:jo,properties:Oo,default:!0};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=t.Ajv=void 0;const r=Gr,a=Kt,i=yr,s=To,u=["/properties"],o="http://json-schema.org/draft-07/schema";class c extends r.default{_addVocabularies(){super._addVocabularies(),a.default.forEach($=>this.addVocabulary($)),this.opts.discriminator&&this.addKeyword(i.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const $=this.opts.$data?this.$dataMetaSchema(s,u):s;this.addMetaSchema($,o,!1),this.refs["http://json-schema.org/schema"]=o}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(o)?o:void 0)}}t.Ajv=c,e.exports=t=c,e.exports.Ajv=c,Object.defineProperty(t,"__esModule",{value:!0}),t.default=c;var f=ht();Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return f.KeywordCxt}});var p=U;Object.defineProperty(t,"_",{enumerable:!0,get:function(){return p._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return p.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return p.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return p.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return p.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return p.CodeGen}});var g=Ze;Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return g.default}});var N=Fe;Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return N.default}})})(Nt,Nt.exports);var Ro=Nt.exports;const Vo=$n(Ro);export{Vo as A,Do as a,Ao as c,$n as g};
