import{defineComponent as L,ref as d,computed as f,watch as k,onUnmounted as S,openBlock as g,createElementBlock as $,Fragment as P,renderList as T,normalizeClass as U,createBlock as X,resolveDynamicComponent as Y}from"vue";import{a as y,b as C}from"./vueuse-Bs6x0GOr.js";import{$ as s,g as V,d as x,b as E,a as O,p as B,r as q,s as j,t as A,_ as G}from"./index-BIM-ObEI.js";import{b as I}from"./vue-router-DgSFFxGk.js";import"./unocss-BkcBwv3F.js";import"./ofetch-CwKPICM-.js";import"./destr-CVtkxrq9.js";import"./ufo-CsG24Xhf.js";import"./magic-string-CTxECtaK.js";import"./jridgewell-CS0TOL6_.js";import"./ajv-DVT_ztRr.js";import"./fast-deep-equal-DhA4GXGS.js";import"./json-schema-traverse-DW8_mBst.js";import"./fast-uri-DiSllsZr.js";import"./ajv-keywords-fgJOexQU.js";import"./uuid-random-C5LgB_p5.js";import"./iconify-DZNnka9g.js";import"./unhead-12oOAFTY.js";import"./hookable-B8xFkYCm.js";import"./vue3-sfc-loader-CoUr1SK8.js";import"./vue-Cow_pXkh.js";const H=L({__name:"MultiView",setup(R,{expose:v}){v();const a=d([]),r=I(),l=f(()=>Object.fromEntries(s.value.map(e=>[e.id,V(e)]))),_=({id:e})=>l.value[e],t=f(()=>new Map(s.value.map(({id:e})=>[e,!1]))),o=d(new Map(t.value)),h=()=>{var e,n;if(!B.value&&A.value&&s.value.length){const{scrollX:c,scrollY:z}=window,[p]=s.value,{root:M}=p,{$children:[{id:D}]=[{}]}=M,F=!Math.floor(c)&&!Math.floor(z)&&p.id===D?M.id:((e=[...t.value.entries()].find(([,m])=>m))==null?void 0:e[0])??((n=[...o.value.entries()].find(([,m])=>m))==null?void 0:n[0])??p.id;j.value=!1,r.push({name:F}).catch(()=>{})}};y(window,{behavior:E,onStop:h});const b=([{isIntersecting:e,target:{id:n}}])=>{o.value=new Map(t.value),t.value.set(n,e)},i=[],u=()=>{i.forEach(e=>{e()}),i.length=0};k(a,e=>{u(),setTimeout(()=>{e.forEach(n=>{const{stop:c}=C(n,b,{threshold:O});i.push(c)})})},{deep:x}),S(u);const w={refs:a,router:r,templates:l,template:_,intersecting:t,$intersecting:o,onStop:h,callback:b,stops:i,clearStops:u,get useIntersectionObserver(){return C},get useScroll(){return y},get behavior(){return E},get deep(){return x},get threshold(){return O},computed:f,onUnmounted:S,ref:d,watch:k,get useRouter(){return I},get $siblings(){return s},get getAsyncComponent(){return V},get paused(){return B},get resolve(){return q},get scroll(){return j},get that(){return A}};return Object.defineProperty(w,"__isScriptSetup",{enumerable:!1,value:!0}),w}}),J=["id","role"];function K(R,v,a,r,l,_){return g(!0),$(P,null,T(r.$siblings,t=>{var o;return g(),$("div",{class:U(t.class),id:t.id,key:t.id,role:t.id===((o=r.that)==null?void 0:o.id)?"main":void 0,ref_for:!0,ref:"refs","un-cloak":""},[(g(),X(Y(r.template(t)),{id:t.id,onVnodeMounted:()=>{r.resolve(t)}},null,8,["id","onVnodeMounted"]))],10,J)}),128)}const _e=G(H,[["render",K],["__file","MultiView.vue"]]);export{_e as default};
