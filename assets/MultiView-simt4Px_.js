import{defineComponent as y,computed as w,ref as b,watch as B,onUnmounted as C,openBlock as v,createElementBlock as M,Fragment as O,renderList as j,normalizeClass as z,createBlock as D,resolveDynamicComponent as F}from"vue";import{p as L,b as P}from"./vues3-shared-DHbzacac.js";import{a as R,b as T}from"./vueuse-core-oETn3pEl.js";import{useRouter as U}from"vue-router";import{$ as l,p as _,m as X,r as Y,t as k,a as q,s as A,_ as G}from"./index-B8x36-Ce.js";import{v as E}from"./uuid-C_lTrkZC.js";import"./vues3-flat-json-tree-DWn-WHoD.js";import"./vueuse-shared-C_TsAxLO.js";import"./ajv-keywords-CuM6mo8B.js";import"./fast-deep-equal-C148XJoK.js";import"./fast-uri-J6I7s6O_.js";import"./unocss-preset-web-fonts-B9GE9DkF.js";import"./unocss-core-D551XE6q.js";import"./unhead-vue-C2LkYYVz.js";import"./unhead-Cc5VaV_e.js";import"./hookable-B7_1qfUG.js";/* empty css                     */import"./unocss-runtime-DcS1hwRb.js";import"./unocss-preset-attributify-B43C78ya.js";import"./unocss-preset-icons-DCdkrEjQ.js";import"./ofetch-DKyuTA_G.js";import"./destr-Cx7WjB9q.js";import"./ufo-LxZlbPj-.js";import"./iconify-utils-_zRJGn6S.js";import"./debug-CP4J2T3R.js";import"./ms-CzQ2E3wO.js";import"./unocss-preset-tagify-C_-PbrOu.js";import"./unocss-preset-typography-DM_u03oK.js";import"./unocss-rule-utils-DjuvZIE4.js";import"./magic-string-BGCKWeEl.js";import"./jridgewell-sourcemap-codec-9KHfGwW6.js";import"./unocss-preset-wind3-nvR3uG2n.js";import"./unocss-preset-mini-BuCoYosa.js";import"./unocss-extractor-arbitrary-variants-BEoR-_Vl.js";import"./iconify-vue-C320287R.js";import"./vues3-vue3-sfc-loader-Ck717SxP.js";const H=y({__name:"MultiView",setup(S,{expose:h}){h();const i=w(()=>new Map(l.value.map(({id:e=E()})=>[e,!1]))),r=b(new Map(i.value)),u=b([]),c=U(),t=[],a=w(()=>{const[[e,o]=[]]=_;return _.clear(),e&&o&&_.set(e,o),Object.fromEntries(l.value.map(s=>[s.id,X(s)]))}),m=()=>{t.forEach(e=>{e()}),t.length=0},V=({id:e})=>a.value[e];B(u,e=>{m(),setTimeout(()=>{e.forEach(o=>{const{stop:s}=R(o,([{isIntersecting:p,target:{id:n}={}}={}]=[])=>{r.value=new Map(i.value),n&&p!==void 0&&i.value.set(n,p)},{threshold:.1});t.push(s)})})},{deep:!0}),T(window,{behavior:"smooth",onStop:()=>{var e,o;if(!q.value&&k.value&&l.value.length){const{scrollX:s,scrollY:p}=window,[n]=l.value,[d]=L.value;if(d&&n){const{$children:[{id:$}={}]=[]}=d,x=!Math.floor(s)&&!Math.floor(p)&&n.id===$?d.id:((e=[...i.value.entries()].find(([,f])=>f))==null?void 0:e[0])??((o=[...r.value.entries()].find(([,f])=>f))==null?void 0:o[0])??n.id;A.value=!1,c.push({name:x}).catch(P)}}}}),C(m);const g={intersecting:i,$intersecting:r,refs:u,router:c,stops:t,templates:a,clearStops:m,template:V,get v4(){return E},get $siblings(){return l},get resolve(){return Y},get that(){return k}};return Object.defineProperty(g,"__isScriptSetup",{enumerable:!1,value:!0}),g}}),I=["id","role"];function J(S,h,i,r,u,c){return v(!0),M(O,null,j(r.$siblings,t=>{var a;return v(),M("div",{id:t.id??r.v4(),key:t.id??r.v4(),ref_for:!0,ref:"refs",class:z(t.class),role:t.id===((a=r.that)==null?void 0:a.id)?"main":"section","un-cloak":""},[(v(),D(F(r.template(t)),{id:t.id,onVnodeMounted:m=>r.resolve(t)},null,8,["id","onVnodeMounted"]))],10,I)}),128)}const Oe=G(H,[["render",J],["__file","MultiView.vue"]]);export{Oe as default};
