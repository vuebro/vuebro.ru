import{isRef as p,toValue as y,ref as c,watchEffect as l,getCurrentInstance as m,onBeforeUnmount as u,onDeactivated as v,onActivated as H,hasInjectionContext as A,inject as g,defineComponent as w}from"vue";import{w as b,F as T,c as x,a as M,r as O}from"./unhead-Cc5VaV_e.js";const j=(t,e)=>p(e)?y(e):e,d="usehead";function C(t){return{install(n){n.config.globalProperties.$unhead=t,n.config.globalProperties.$head=t,n.provide(d,t)}}.install}function f(){if(A()){const t=g(d);if(!t)throw new Error("useHead() was called without provide context, ensure you call it through the setup() function.");return t}throw new Error("useHead() was called without provide context, ensure you call it through the setup() function.")}function h(t,e={}){const n=e.head||f();return n.ssr?n.push(t||{},e):D(n,t,e)}function D(t,e,n={}){const r=c(!1);let s;return l(()=>{const a=r.value?{}:b(e,j);s?s.patch(a):s=t.push(a,n)}),m()&&(u(()=>{s.dispose()}),v(()=>{r.value=!0}),H(()=>{r.value=!1})),s}function P(t={},e={}){(e.head||f()).use(T);const{title:r,titleTemplate:s,...o}=t;return h({title:r,titleTemplate:s,_flatMeta:o},e)}function R(t={}){const e=x({domOptions:{render:M(()=>O(e),n=>setTimeout(n,0))},...t});return e.install=C(e),e}function i(t,e){const n=t.type,r=n==="html"?"htmlAttrs":n==="body"?"bodyAttrs":n;if(typeof r!="string"||!(r in e))return;const s=t.props||{};if(t.children){const o="children";s.children=Array.isArray(t.children)?t.children[0][o]:t[o]}Array.isArray(e[r])?e[r].push(s):r==="title"?e.title=s.children:e[r]=s}function E(t){const e={title:void 0,htmlAttrs:void 0,bodyAttrs:void 0,base:void 0,meta:[],link:[],style:[],script:[],noscript:[]};for(const n of t)if(typeof n.type=="symbol"&&Array.isArray(n.children))for(const r of n.children)i(r,e);else i(n,e);return e}const V=w({name:"Head",setup(t,{slots:e}){const n=c({}),r=h(n);return u(()=>{r.dispose()}),()=>(l(()=>{e.default&&r.patch(E(e.default()))}),null)}});export{V as H,P as a,R as c,h as u};
