import{defineComponent as P,ref as f,computed as g,watch as y,onUnmounted as S,openBlock as v,createElementBlock as $,Fragment as T,renderList as U,normalizeClass as X,createBlock as Y,resolveDynamicComponent as q}from"vue";import{a as C,b as V}from"./vueuse-Bs6x0GOr.js";import{p as a,$ as s,g as x,d as E,b as O,a as B,c as j,r as G,s as A,t as I,_ as H}from"./index-Bf-UBogk.js";import{b as R}from"./vue-router-DgSFFxGk.js";import"./unocss-wUcHOrf3.js";import"./ofetch-DfaEl5Lr.js";import"./destr-CVtkxrq9.js";import"./ufo-CsG24Xhf.js";import"./magic-string-l2mojYcN.js";import"./jridgewell-CS0TOL6_.js";import"./ajv-DVT_ztRr.js";import"./fast-deep-equal-DhA4GXGS.js";import"./json-schema-traverse-DW8_mBst.js";import"./fast-uri-DiSllsZr.js";import"./ajv-keywords-fgJOexQU.js";import"./uuid-random-C5LgB_p5.js";import"./iconify-DZNnka9g.js";import"./unhead-CEwDqR4t.js";import"./hookable-B8xFkYCm.js";import"./vue3-sfc-loader-CoUr1SK8.js";import"./vue-Cow_pXkh.js";const J=P({__name:"MultiView",setup(z,{expose:_}){_();const l=f([]),o=R(),u=g(()=>{{const[[e,r]]=a;a.clear(),a.set(e,r)}return Object.fromEntries(s.value.map(e=>[e.id,x(e)]))}),h=({id:e})=>u.value[e],t=g(()=>new Map(s.value.map(({id:e})=>[e,!1]))),n=f(new Map(t.value)),b=()=>{var e,r;if(!j.value&&I.value&&s.value.length){const{scrollX:p,scrollY:D}=window,[m]=s.value,{root:k}=m,{$children:[{id:F}]=[{}]}=k,L=!Math.floor(p)&&!Math.floor(D)&&m.id===F?k.id:((e=[...t.value.entries()].find(([,d])=>d))==null?void 0:e[0])??((r=[...n.value.entries()].find(([,d])=>d))==null?void 0:r[0])??m.id;A.value=!1,o.push({name:L}).catch(()=>{})}};C(window,{behavior:O,onStop:b});const w=([{isIntersecting:e,target:{id:r}}])=>{n.value=new Map(t.value),t.value.set(r,e)},i=[],c=()=>{i.forEach(e=>{e()}),i.length=0};y(l,e=>{c(),setTimeout(()=>{e.forEach(r=>{const{stop:p}=V(r,w,{threshold:B});i.push(p)})})},{deep:E}),S(c);const M={refs:l,router:o,templates:u,template:h,intersecting:t,$intersecting:n,onStop:b,callback:w,stops:i,clearStops:c,get useIntersectionObserver(){return V},get useScroll(){return C},get behavior(){return O},get deep(){return E},get threshold(){return B},computed:g,onUnmounted:S,ref:f,watch:y,get useRouter(){return R},get $siblings(){return s},get getAsyncComponent(){return x},get paused(){return j},get promises(){return a},get resolve(){return G},get scroll(){return A},get that(){return I}};return Object.defineProperty(M,"__isScriptSetup",{enumerable:!1,value:!0}),M}}),K=["id","role"];function N(z,_,l,o,u,h){return v(!0),$(T,null,U(o.$siblings,t=>{var n;return v(),$("div",{class:X(t.class),id:t.id,key:t.id,role:t.id===((n=o.that)==null?void 0:n.id)?"main":void 0,ref_for:!0,ref:"refs","un-cloak":""},[(v(),Y(q(o.template(t)),{id:t.id,onVnodeMounted:()=>{o.resolve(t)}},null,8,["id","onVnodeMounted"]))],10,K)}),128)}const he=H(J,[["render",N],["__file","MultiView.vue"]]);export{he as default};
