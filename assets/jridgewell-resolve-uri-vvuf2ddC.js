var l={exports:{}},T=l.exports,v;function S(){return v||(v=1,function(R,z){(function(p,f){R.exports=f()})(T,function(){const p=/^[\w+.-]+:\/\//,f=/^([\w+.-]+:)\/\/([^@/#?]*@)?([^:/#?]*)(:\d+)?(\/[^#?]*)?(\?[^#]*)?(#.*)?/,g=/^file:(?:\/\/((?![a-z]:)[^/#?]*)?)?(\/?[^#?]*)(\?[^#]*)?(#.*)?/i;function W(e){return p.test(e)}function q(e){return e.startsWith("//")}function m(e){return e.startsWith("/")}function w(e){return e.startsWith("file:")}function x(e){return/^[.?#]/.test(e)}function h(e){const r=f.exec(e);return d(r[1],r[2]||"",r[3],r[4]||"",r[5]||"/",r[6]||"",r[7]||"")}function P(e){const r=g.exec(e),t=r[2];return d("file:","",r[1]||"","",m(t)?t:"/"+t,r[3]||"",r[4]||"")}function d(e,r,t,n,o,s,i){return{scheme:e,user:r,host:t,port:n,path:o,query:s,hash:i,type:7}}function y(e){if(q(e)){const t=h("http:"+e);return t.scheme="",t.type=6,t}if(m(e)){const t=h("http://foo.com"+e);return t.scheme="",t.host="",t.type=5,t}if(w(e))return P(e);if(W(e))return h(e);const r=h("http://foo.com/"+e);return r.scheme="",r.host="",r.type=e?e.startsWith("?")?3:e.startsWith("#")?2:4:1,r}function _(e){if(e.endsWith("/.."))return e;const r=e.lastIndexOf("/");return e.slice(0,r+1)}function A(e,r){U(r,r.type),e.path==="/"?e.path=r.path:e.path=_(r.path)+e.path}function U(e,r){const t=r<=4,n=e.path.split("/");let o=1,s=0,i=!1;for(let c=1;c<n.length;c++){const u=n[c];if(!u){i=!0;continue}if(i=!1,u!=="."){if(u===".."){s?(i=!0,s--,o--):t&&(n[o++]=u);continue}n[o++]=u,s++}}let a="";for(let c=1;c<o;c++)a+="/"+n[c];(!a||i&&!a.endsWith("/.."))&&(a+="/"),e.path=a}function F(e,r){if(!e&&!r)return"";const t=y(e);let n=t.type;if(r&&n!==7){const s=y(r),i=s.type;switch(n){case 1:t.hash=s.hash;case 2:t.query=s.query;case 3:case 4:A(t,s);case 5:t.user=s.user,t.host=s.host,t.port=s.port;case 6:t.scheme=s.scheme}i>n&&(n=i)}U(t,n);const o=t.query+t.hash;switch(n){case 2:case 3:return o;case 4:{const s=t.path.slice(1);return s?x(r||e)&&!x(s)?"./"+s+o:s+o:o||"."}case 5:return t.path+o;default:return t.scheme+"//"+t.user+t.host+t.port+t.path+o}}return F})}(l)),l.exports}export{S as r};
